<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Verooo" />

<meta name="date" content="2024-11-01" />

<title>1-Define Data</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    My journal
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="testjt.html">Week 1</a>
    </li>
    <li>
      <a href="week2.html">Week 2</a>
    </li>
    <li>
      <a href="Webscraping-Chapter8-tutorial.html">Chapter 8 - Webscraping tutorial</a>
    </li>
    <li>
      <a href="week3RSelenium.html">Week 3 - RSelenium (see Ch.8 tab tho)</a>
    </li>
    <li>
      <a href="networkvis.html">Chapter 9 - Netw. Visualisation tutorial</a>
    </li>
    <li>
      <a href="week5.html">Week 5/Chapter 7 - Analysis pt.1</a>
    </li>
    <li>
      <a href="week5-2.html">Week 5/Chapter 7 - Analysis pt.2</a>
    </li>
    <li>
      <a href="datapractice1.html">Week 5 - Practice data 1</a>
    </li>
    <li>
      <a href="week6.html">Week 6</a>
    </li>
    <li>
      <a href="weekbacktrack.html">Week Nr. getbackontrack</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    RQs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="RQdraft1.html">1st draft</a>
    </li>
    <li>
      <a href="RQdraft2.html">2nd draft - w Intro &amp; data types</a>
    </li>
    <li>
      <a href="RQdraft3.html">3rd draft</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Project design
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="clarifyRQsandDesign.html">Clarify RQs</a>
    </li>
    <li class="dropdown-header">Clarify design &amp; hypotheses</li>
    <li class="dropdown-header">page</li>
    <li class="dropdown-header">page</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Step-by-step analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="1definedata.html">Step 1&amp;2: Define data&amp;effects structure</a>
    </li>
    <li class="dropdown-header">Step 3: Get initial description</li>
    <li class="dropdown-header">Step 4: Specify model</li>
    <li class="dropdown-header">Step 5: Estimate model</li>
    <li class="dropdown-header">Step 6: Goodness of Fit</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Draft report
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="draftintro.html">Introduction</a>
    </li>
    <li>
      <a href="drafttheory.html">Theory</a>
    </li>
    <li>
      <a href="draftdata.html">Data</a>
    </li>
    <li class="dropdown-header">Methods</li>
    <li class="dropdown-header">Results</li>
    <li class="dropdown-header">Discussion &amp; Conclusion</li>
    <li class="dropdown-header">Appendices</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Final report
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Introduction</li>
    <li class="dropdown-header">Theory</li>
    <li class="dropdown-header">Data</li>
    <li class="dropdown-header">Methods</li>
    <li class="dropdown-header">Results</li>
    <li class="dropdown-header">Discussion &amp; Conclusion</li>
    <li class="dropdown-header">Appendices</li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JochemTolsma/labjournal">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">1-Define Data</h1>
<h4 class="author">Verooo</h4>
<h4 class="date">2024-11-01</h4>

</div>


<p><u><strong>Defining Data</strong></u></p>
<div id="before-the-start" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Before the start</h1>
<div id="clean-workspace" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Clean workspace</h2>
<pre class="r test"><code># start with clean workspace
rm(list = ls())</code></pre>
</div>
<div id="packages" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Packages</h2>
<pre class="r test"><code># install.packages(&#39;tidyverse&#39;)
require(tidyverse)

# install an old version of RSiena including sienaRI remove.packages(&#39;RSiena&#39;) #use this to remove
# the current version of RSiena devtools::install_version(&#39;RSiena&#39;, version = &#39;1.3.14&#39;, repos =
# &#39;C:/Users/Vero/OneDrive - Radboud Universiteit/Documents/GitHub/labjournal&#39;) # This installs an
# older version

# Run R as administrator when you install the older version!!

# You should end up with version 1.3.14 loaded in instead of 1.4.7, but then make sure there isn&#39;t
# a install.packages(&#39;RSiena&#39;) function running somewhere, because then it will reinstall the
# newest version

# require(RSiena) require(RsienaTwoStep)</code></pre>
<p>I do not seem to be able to call on the package RSiena, nor can I
reinstall it…. I know programming never works on the first try but…
goddamnit, why not even after 15?</p>
</div>
<div id="functions" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Functions</h2>
<div id="question" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Question</h3>
<p><strong>HOW do I get the discipline of political science in there
too?</strong></p>
<p><strong>How can I find out what the name for the discipline of
political science in the original data frame (e.g. whether it is called
polsci, political science, or politicalscience)?</strong></p>
<p><strong>I don’t know how to view the data set BEFORE we include only
those scholars that have discipline = sociology. I cannot view the
data</strong></p>
<p>I tried removing the discipline = “sociology” part in the f_pubnets,
fcolnet and all following functions that select data BUT SINCE
‘discipline’ is also relevant in the rest of the functions’ code, it
does not end up doing what I hoped (having a dataset with scholars of no
specific discipline because then I could hopefully check how the
department is named in the data and then find out how to add that to the
data set initially).</p>
<pre class="r test"><code>fpackage.check &lt;- function(packages) {
    lapply(packages, FUN = function(x) {
        if (!require(x, character.only = TRUE)) {
            install.packages(x, dependencies = TRUE)
            library(x, character.only = TRUE)
        }
    })
}

fsave &lt;- function(x, file = NULL, location = &quot;./data/processed/&quot;) {
    ifelse(!dir.exists(&quot;data&quot;), dir.create(&quot;data&quot;), FALSE)
    ifelse(!dir.exists(&quot;data/processed&quot;), dir.create(&quot;data/processed&quot;), FALSE)
    if (is.null(file))
        file = deparse(substitute(x))
    datename &lt;- substr(gsub(&quot;[:-]&quot;, &quot;&quot;, Sys.time()), 1, 8)
    totalname &lt;- paste(location, file, &quot;_&quot;, datename, &quot;.rda&quot;, sep = &quot;&quot;)
    save(x, file = totalname)  #need to fix if file is reloaded as input name, not as x. 
}

fload &lt;- function(filename) {
    load(filename)
    get(ls()[ls() != &quot;filename&quot;])
}

fshowdf &lt;- function(x, ...) {
    knitr::kable(x, digits = 2, &quot;html&quot;, ...) %&gt;%
        kableExtra::kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
        kableExtra::scroll_box(width = &quot;100%&quot;, height = &quot;300px&quot;)
}


# this is the most important one. We created it in the previous script

f_pubnets &lt;- function(df_scholars = df, list_publications = publications, discip = &quot;sociology&quot; + &quot;political science&quot;,
    affiliation = &quot;RU&quot;, waves = list(wave1 = c(2018, 2019, 2020), wave2 = c(2021, 2022, 2023))) {

    publications &lt;- list_publications %&gt;%
        bind_rows() %&gt;%
        distinct(title, .keep_all = TRUE)

    df_scholars %&gt;%
        filter(affil1 == affiliation | affil2 == affiliation) %&gt;%
        filter(discipline == discip) -&gt; df_sel

    networklist &lt;- list()
    for (wave in 1:length(waves)) {
        networklist[[wave]] &lt;- matrix(0, nrow = nrow(df_sel), ncol = nrow(df_sel))
    }

    publicationlist &lt;- list()
    for (wave in 1:length(waves)) {
        publicationlist[[wave]] &lt;- publications %&gt;%
            filter(gs_id %in% df_sel$gs_id) %&gt;%
            filter(year %in% waves[[wave]]) %&gt;%
            select(author) %&gt;%
            lapply(str_split, pattern = &quot;,&quot;)
    }

    publicationlist2 &lt;- list()
    for (wave in 1:length(waves)) {
        publicationlist2[[wave]] &lt;- publicationlist[[wave]]$author %&gt;%
            # lowercase
        lapply(tolower) %&gt;%
            # Removing diacritics
        lapply(stri_trans_general, id = &quot;latin-ascii&quot;) %&gt;%
            # only last name
        lapply(word, start = -1, sep = &quot; &quot;) %&gt;%
            # only last last name
        lapply(word, start = -1, sep = &quot;-&quot;)
    }

    for (wave in 1:length(waves)) {
        # let us remove all publications with only one author
        remove &lt;- which(sapply(publicationlist2[[wave]], FUN = function(x) length(x) == 1) == TRUE)
        publicationlist2[[wave]] &lt;- publicationlist2[[wave]][-remove]
    }

    for (wave in 1:length(waves)) {
        pubs &lt;- publicationlist2[[wave]]
        for (ego in 1:nrow(df_sel)) {
            # which ego?
            lastname_ego &lt;- df_sel$lastname[ego]
            # for all publications
            for (pub in 1:length(pubs)) {
                # only continue if ego is author of pub
                if (lastname_ego %in% pubs[[pub]]) {
                  aut_pot &lt;- which.max(pubs[[pub]] %in% lastname_ego)
                  # only continue if ego is first author of pub
                  if (aut_pot == 1) {
                    # check all alters/co-authors
                    for (alter in 1:nrow(df_sel)) {
                      # which alter
                      lastname_alter &lt;- df_sel$lastname[alter]
                      if (lastname_alter %in% pubs[[pub]]) {
                        networklist[[wave]][ego, alter] &lt;- networklist[[wave]][ego, alter] + 1
                      }
                    }
                  }
                }
            }
        }
    }
    return(list(df = df_sel, network = networklist))
}</code></pre>
</div>
</div>
<div id="more-functions" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> more functions</h2>
<pre class="r test"><code>fcolnet &lt;- function(data = scholars, university = &quot;RU&quot;, discipline = &quot;sociology&quot; + &quot;political science&quot;,
    waves = list(c(2015, 2018), c(2019, 2023)), type = c(&quot;first&quot;)) {

    # step 1
    demographics &lt;- do.call(rbind.data.frame, data$demographics)
    demographics &lt;- demographics %&gt;%
        mutate(Universiteit1.22 = replace(Universiteit1.22, is.na(Universiteit1.22), &quot;&quot;), Universiteit2.22 = replace(Universiteit2.22,
            is.na(Universiteit2.22), &quot;&quot;), Universiteit1.24 = replace(Universiteit1.24, is.na(Universiteit1.24),
            &quot;&quot;), Universiteit2.24 = replace(Universiteit2.24, is.na(Universiteit2.24), &quot;&quot;), discipline.22 = replace(discipline.22,
            is.na(discipline.22), &quot;&quot;), discipline.24 = replace(discipline.24, is.na(discipline.24), &quot;&quot;))

    sample &lt;- which((demographics$Universiteit1.22 %in% university | demographics$Universiteit2.22 %in%
        university | demographics$Universiteit1.24 %in% university | demographics$Universiteit2.24 %in%
        university) &amp; (demographics$discipline.22 %in% discipline | demographics$discipline.24 %in% discipline))

    demographics_soc &lt;- demographics[sample, ]
    scholars_sel &lt;- lapply(scholars, &quot;[&quot;, sample)

    # step 2
    ids &lt;- demographics_soc$au_id
    nwaves &lt;- length(waves)
    nets &lt;- array(0, dim = c(nwaves, length(ids), length(ids)), dimnames = list(wave = 1:nwaves, ids,
        ids))
    dimnames(nets)

    # step 3
    df_works &lt;- tibble(works_id = unlist(lapply(scholars_sel$work, function(l) l$id)), works_author = unlist(lapply(scholars_sel$work,
        function(l) l$author), recursive = FALSE), works_year = unlist(lapply(scholars_sel$work, function(l) l$publication_year),
        recursive = FALSE))

    df_works &lt;- df_works[!duplicated(df_works), ]

    # step 4
    if (type == &quot;first&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- df_works_w$works_author[i][[1]]$au_id[1]
                alters &lt;- df_works_w$works_author[i][[1]]$au_id[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;last&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[1]
                alters &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;all&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                egos &lt;- df_works_w$works_author[i][[1]]$au_id
                if (sum(ids %in% egos) &gt; 0) {
                  nets[j, which(ids %in% egos), which(ids %in% egos)] &lt;- 1
                }
            }
        }
    }
    output &lt;- list()
    output$data &lt;- scholars_sel
    output$nets &lt;- nets
    return(output)
}</code></pre>
</div>
<div id="load-and-inspect-data" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> load and inspect
data</h2>
<pre class="r test"><code>scholars &lt;- fload(&quot;./data/processed/scholars_20240924.rda&quot;) #make sure to lead fload first ofcourse

#inspecting scholars_20240924.rda object
#df_ego &lt;- do.call(rbind.data.frame, scholars$demographics)
#unique(df_ego$discipline.22)

# save the output of your function
testsoc  &lt;- fcolnet(data = scholars, 
                university = &quot;RU&quot;, 
                discipline = &quot;sociology&quot;, 
                waves = list(c(2015, 2018), c(2019, 2023)), 
    
                            type = c(&quot;first&quot;))

# I DONT KNOW HOW TO MAKE ALL SCHOLARS BE PART OF SAME FUNCTION (&quot;sociology&quot;+ &quot;political science&quot; does not work...)

testpolsci &lt;- fcolnet(data = scholars, 
                university = &quot;RU&quot;, 
                discipline = &quot;political science&quot;, 
                waves = list(c(2015, 2018), c(2019, 2023)), 
                type = c(&quot;first&quot;))</code></pre>
<hr />
</div>
</div>
<div id="define-data" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Define Data</h1>
<div id="waves---sociology-department" class="section level2"
number="2.1">
<h2><span class="header-section-number">2.1</span> waves - sociology
department</h2>
<pre class="r test"><code># Jochem messed up and did: waves, rows, columns [1, , ]
socwave1 &lt;- testsoc$nets[, , 1]  #rows, columns, waves
socwave2 &lt;- testsoc$nets[, , 2]  #rows, columns, waves
# let us put the diagonal to zero
diag(socwave1) &lt;- 0
diag(socwave2) &lt;- 0
# we want a binary tie (not a weighted tie)
socwave1[socwave1 &gt; 1] &lt;- 1
socwave2[socwave2 &gt; 1] &lt;- 1
# put the nets in an array
net_soc_array &lt;- array(data = c(socwave1, socwave2), dim = c(dim(socwave1), 2))

str(net_soc_array)  #now we basically restructured this </code></pre>
<pre class="test2"><code>#&gt;  num [1:2, 1:50, 1:2] 0 0 0 0 0 0 0 0 0 0 ...</code></pre>
<pre class="r test"><code># output: num [1:50, 1:50, 1:2] 0 0 0 0 0 0 0 0 0 0</code></pre>
</div>
<div id="waves---polsci-department" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> waves - polsci
department</h2>
<pre class="r test"><code># Jochem messed up and did: waves, rows, columns [1, , ]
polwave1 &lt;- testpolsci$nets[, , 1]  #rows, columns, waves
polwave2 &lt;- testpolsci$nets[, , 2]  #rows, columns, waves
# let us put the diagonal to zero
diag(polwave1) &lt;- 0
diag(polwave2) &lt;- 0
# we want a binary tie (not a weighted tie)
polwave1[polwave1 &gt; 1] &lt;- 1
polwave2[polwave2 &gt; 1] &lt;- 1
# put the nets in an array
net_pol_array &lt;- array(data = c(polwave1, polwave2), dim = c(dim(polwave1), 2))

str(net_pol_array)  #now we basically restructured this </code></pre>
<pre class="test2"><code>#&gt;  num [1:2, 1:51, 1:2] 0 0 0 0 0 0 0 0 0 0 ...</code></pre>
<div id="question-1" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span>
<strong>QUESTION:</strong></h3>
<p><strong>What’s the difference between putting the 2 and the 1 at the
dimensions. I feel like one is appropriate since I am only looking at
one wave, not two, but since the output is among the ‘values’ not
‘data’, I cannot view the variable net_soc_array(1) nor “visualize” what
that means in terms of its structure. I don’t really know what the
difference would be between the 1:2 and the 1 in the outputs,
structurally.</strong></p>
</div>
<div id="answer" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> ANSWER:</h3>
<p>RSiena needs at least two waves, because it models the evolution of
the networks. We have to store the networks in an array before we can
convert it to an dependent variable objects. Moreover, for RSiena the
dimensions should be in the following order: rows, columns, waves.</p>
<p>I ‘messed up’ my function (for didactic reasons ;-) )and stored the
nets in the following order: waves, rows, columns. Thus, either correct
my function or retrieve the separate waves and store them in the order
RSiena requires.</p>
</div>
<div id="question-to-the-answer" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> QUESTION TO THE
ANSWER:</h3>
<p>We had agreed on me only investigating one time point for the sake of
simplicity. It seems I basically have no choice but to investigate two
waves, revisit my RQs and make an additional RQ about tie changes over
time, right?</p>
<p>Then I would end up with 4 RQs and that seems like more than it needs
to be for this project (great for a research incentive, but for this
class I need to keep it simple, as I am currently very overworked).</p>
<p>Any advice on how I can keep it simple, nonetheless?</p>
</div>
</div>
<div id="examine-structure" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Examine
structure</h2>
<pre class="r test"><code>dim(testsoc$nets)</code></pre>
<pre class="test2"><code>#&gt; [1]  2 50 50</code></pre>
<pre class="r test"><code>dim(testpolsci$nets)</code></pre>
<pre class="test2"><code>#&gt; [1]  2 51 51</code></pre>
</div>
<div id="my-data" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> My data</h2>
<div id="sociology-dep." class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> sociology dep.</h3>
<p>not using net_soc_array for now since I am unsure about its use due
to question above</p>
<pre class="r test"><code># dependent net &lt;- sienaDependent(net_soc_array)


# dependent
nets &lt;- testsoc$nets


df_ego_demo &lt;- testsoc$data$demographics
df_ego_oa &lt;- testsoc$data$scholars_oa
df_ego_works &lt;- testsoc$data$works


# DEMO
str(df_ego_demo, 1)</code></pre>
<pre class="test2"><code>#&gt; List of 50
#&gt;  $ 22 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 49 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 50 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 51 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 52 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 53 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 54 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 55 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 56 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 57 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 58 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 59 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 60 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 61 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 62 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 63 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 64 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 65 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 66 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 67 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 68 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 69 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 70 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 71 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 72 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 73 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 74 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 75 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 76 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 77 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 78 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 79 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 80 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 81 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 82 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 83 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 84 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 85 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 86 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 87 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 88 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 89 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 90 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 91 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 92 : tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 129: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 618: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 619: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 620: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 621: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)</code></pre>
<pre class="r test"><code>df_ego_demo &lt;- do.call(rbind.data.frame, df_ego_demo)
df_ego_demo[[1]]</code></pre>
<pre class="test2"><code>#&gt;  [1] &quot;Ana Macanovic&quot;            &quot;Ronald Batenburg&quot;         &quot;Katia Begall&quot;            
#&gt;  [4] &quot;Hidde Bekhuis&quot;            &quot;Lonneke van den Berg&quot;     &quot;Lieselotte Blommaert&quot;    
#&gt;  [7] &quot;Rob Eisinga&quot;              &quot;Maurice Gesthuizen&quot;       &quot;Nella Geurts&quot;            
#&gt; [10] &quot;Saskia Glas&quot;              &quot;Margriet van Hek&quot;         &quot;Remco Hoekman&quot;           
#&gt; [13] &quot;Bas Hofstra&quot;              &quot;Judith Koops&quot;             &quot;Gerbert Kraaykamp&quot;       
#&gt; [16] &quot;Roza Meuleman&quot;            &quot;Michael Savelkoul&quot;        &quot;Peer Scheepers&quot;          
#&gt; [19] &quot;Niels Spierings&quot;          &quot;Jochem Tolsma&quot;            &quot;Ellen Verbakel&quot;          
#&gt; [22] &quot;Mark Visser&quot;              &quot;Maarten Wolbers&quot;          &quot;Carlijn Bussemakers&quot;     
#&gt; [25] &quot;Rob Franken&quot;              &quot;Mustafa Firat&quot;            &quot;Inge Hendriks&quot;           
#&gt; [28] &quot;Thijmen Jeroense&quot;         &quot;Rachel Kollar&quot;            &quot;Nik Linders&quot;             
#&gt; [31] &quot;Renae  Loh&quot;               &quot;Maikel Meijeren&quot;          &quot;Carly van Mensvoort&quot;     
#&gt; [34] &quot;Anne Maaike Mulders&quot;      &quot;Katrin Müller&quot;            &quot;Klara Raiber&quot;            
#&gt; [37] &quot;Marlou Ramaekers&quot;         &quot;Sara Wiertsema&quot;           &quot;Janos Betko&quot;             
#&gt; [40] &quot;Jansje van Middendorp&quot;    &quot;Elize Vis&quot;                &quot;Tijmen Weber&quot;            
#&gt; [43] &quot;Carl Sterkens&quot;            &quot;Paul Vermeer&quot;             &quot;Malou Grubben&quot;           
#&gt; [46] &quot;Marcel Lubbers&quot;           &quot;Annick van Brouwershaven&quot; &quot;Lex Thijssen&quot;            
#&gt; [49] &quot;Renate Wit&quot;               &quot;Samira Azabar&quot;</code></pre>
<pre class="r test"><code># OA str(df_ego_oa, 1)
df_ego_oa[[1]]</code></pre>
<pre class="test2"><code>#&gt; # A tibble: 1 × 18
#&gt;   id      display_name display_name_alterna…¹ relevance_score ids   orcid works_count cited_by_count
#&gt;   &lt;chr&gt;   &lt;chr&gt;        &lt;list&gt;                           &lt;dbl&gt; &lt;lis&gt; &lt;chr&gt;       &lt;int&gt;          &lt;int&gt;
#&gt; 1 https:… Ana Macanov… &lt;chr [1]&gt;                        1498. &lt;chr&gt; http…           9             70
#&gt; # ℹ abbreviated name: ¹​display_name_alternatives
#&gt; # ℹ 10 more variables: counts_by_year &lt;list&gt;, affiliation_display_name &lt;chr&gt;, affiliation_id &lt;chr&gt;,
#&gt; #   affiliation_ror &lt;chr&gt;, affiliation_country_code &lt;chr&gt;, affiliation_type &lt;chr&gt;,
#&gt; #   affiliation_lineage &lt;chr&gt;, affiliations_other &lt;list&gt;, x_concepts &lt;list&gt;, works_api_url &lt;chr&gt;</code></pre>
<pre class="r test"><code>df_ego_oa &lt;- do.call(rbind.data.frame, df_ego_oa)


# --&gt; EGO DATAFRAME with demo and oa (sociology)
`?`(join.data.frame)
df_soc_ego &lt;- left_join(df_ego_demo, df_ego_oa, by = join_by(au_id == id))

rownames(nets[1, , ]) == df_soc_ego$au_id  # checking if the author id&#39;s are the same as in df_ego in nets dataframe </code></pre>
<pre class="test2"><code>#&gt;  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
#&gt; [20] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
#&gt; [39] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<pre class="r test"><code># --&gt; yes, the correct ones!!!


df_ego_works[[1]]$author</code></pre>
<pre class="test2"><code>#&gt; [[1]]
#&gt;                              au_id   au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5022704573    Étienne Ollion https://orcid.org/0000-0003-3099-5240
#&gt; 2 https://openalex.org/A5077634022       Rubing Shen https://orcid.org/0000-0002-5504-6108
#&gt; 3 https://openalex.org/A5011326378     Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt; 4 https://openalex.org/A5005519980 Arnault Chatelain https://orcid.org/0009-0002-6450-2176
#&gt;   author_position is_corresponding
#&gt; 1           first             TRUE
#&gt; 2          middle            FALSE
#&gt; 3          middle            FALSE
#&gt; 4            last            FALSE
#&gt;                                                                                                                                              au_affiliation_raw
#&gt; 1 Centre de Recherche en Économie et de Statistiques (CREST), CNRS, École polytechnique, GENES, ENSAE Paris, Institut Polytechnique de Paris, Palaiseau, France
#&gt; 2 Centre de Recherche en Économie et de Statistiques (CREST), CNRS, École polytechnique, GENES, ENSAE Paris, Institut Polytechnique de Paris, Palaiseau, France
#&gt; 3                                                                                     Department of Sociology, Utrecht University/ICS, Utrecht, The Netherlands
#&gt; 4 Centre de Recherche en Économie et de Statistiques (CREST), CNRS, École polytechnique, GENES, ENSAE Paris, Institut Polytechnique de Paris, Palaiseau, France
#&gt;                     institution_id
#&gt; 1 https://openalex.org/I1294671590
#&gt; 2  https://openalex.org/I142476485
#&gt; 3  https://openalex.org/I193662353
#&gt; 4   https://openalex.org/I84009706
#&gt;                                              institution_display_name           institution_ror
#&gt; 1                        Centre National de la Recherche Scientifique https://ror.org/02feahw73
#&gt; 2                                                 École Polytechnique https://ror.org/05hy3tk52
#&gt; 3                                                  Utrecht University https://ror.org/04pp8hn57
#&gt; 4 École Nationale de la Statistique et de l&#39;Administration Économique https://ror.org/01fz7mn40
#&gt;   institution_country_code institution_type
#&gt; 1                       FR       government
#&gt; 2                       FR        education
#&gt; 3                       NL        education
#&gt; 4                       FR        education
#&gt;                                                 institution_lineage
#&gt; 1                                  https://openalex.org/I1294671590
#&gt; 2 https://openalex.org/I142476485, https://openalex.org/I4210145102
#&gt; 3                                   https://openalex.org/I193662353
#&gt; 4  https://openalex.org/I4210108488, https://openalex.org/I84009706
#&gt; 
#&gt; [[2]]
#&gt;                              au_id au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5011326378   Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt;   author_position is_corresponding
#&gt; 1           first             TRUE
#&gt;                                                                                   au_affiliation_raw
#&gt; 1 Utrecht University, Department of Sociology / ICS, Padualaan 14, 3584 CH, Utrecht, The Netherlands
#&gt;                    institution_id institution_display_name           institution_ror
#&gt; 1 https://openalex.org/I193662353       Utrecht University https://ror.org/04pp8hn57
#&gt;   institution_country_code institution_type             institution_lineage
#&gt; 1                       NL        education https://openalex.org/I193662353
#&gt; 
#&gt; [[3]]
#&gt;                              au_id   au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5011326378     Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt; 2 https://openalex.org/A5069791094  Milena Tsvetkova https://orcid.org/0000-0002-3552-108X
#&gt; 3 https://openalex.org/A5042566717 Wojtek Przepiorka https://orcid.org/0000-0001-9432-8696
#&gt; 4 https://openalex.org/A5060904065   Vincent Buskens https://orcid.org/0000-0002-4483-7238
#&gt;   author_position is_corresponding
#&gt; 1           first             TRUE
#&gt; 2          middle            FALSE
#&gt; 3          middle             TRUE
#&gt; 4            last            FALSE
#&gt;                                                                                  au_affiliation_raw
#&gt; 1                  Centre for Complex Systems Studies, Utrecht University, Utrecht, The Netherlands
#&gt; 2 Department of Methodology, London School of Economics and Political Science, London, WC2A 2AE, UK
#&gt; 3                         Department of Sociology/ICS, Utrecht University, Utrecht, The Netherlands
#&gt; 4                  Centre for Complex Systems Studies, Utrecht University, Utrecht, The Netherlands
#&gt;                    institution_id                         institution_display_name
#&gt; 1 https://openalex.org/I193662353                               Utrecht University
#&gt; 2 https://openalex.org/I909854389 London School of Economics and Political Science
#&gt; 3 https://openalex.org/I193662353                               Utrecht University
#&gt; 4 https://openalex.org/I173063890           University of Applied Sciences Utrecht
#&gt;             institution_ror institution_country_code institution_type
#&gt; 1 https://ror.org/04pp8hn57                       NL        education
#&gt; 2 https://ror.org/0090zs177                       GB        education
#&gt; 3 https://ror.org/04pp8hn57                       NL        education
#&gt; 4 https://ror.org/028z9kw20                       NL        education
#&gt;                                                institution_lineage
#&gt; 1                                  https://openalex.org/I193662353
#&gt; 2 https://openalex.org/I124357947, https://openalex.org/I909854389
#&gt; 3                                  https://openalex.org/I193662353
#&gt; 4                                  https://openalex.org/I173063890
#&gt; 
#&gt; [[4]]
#&gt;                              au_id   au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5022704573    Étienne Ollion https://orcid.org/0000-0003-3099-5240
#&gt; 2 https://openalex.org/A5077634022       Rubing Shen https://orcid.org/0000-0002-5504-6108
#&gt; 3 https://openalex.org/A5011326378     Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt; 4 https://openalex.org/A5005519980 Arnault Chatelain https://orcid.org/0009-0002-6450-2176
#&gt;   author_position is_corresponding au_affiliation_raw institution_id institution_display_name
#&gt; 1           first            FALSE               &lt;NA&gt;             NA                       NA
#&gt; 2          middle            FALSE               &lt;NA&gt;             NA                       NA
#&gt; 3          middle            FALSE               &lt;NA&gt;             NA                       NA
#&gt; 4            last            FALSE               &lt;NA&gt;             NA                       NA
#&gt;   institution_ror institution_country_code institution_type institution_lineage
#&gt; 1              NA                       NA               NA                  NA
#&gt; 2              NA                       NA               NA                  NA
#&gt; 3              NA                       NA               NA                  NA
#&gt; 4              NA                       NA               NA                  NA
#&gt; 
#&gt; [[5]]
#&gt;                              au_id   au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5011326378     Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt; 2 https://openalex.org/A5042566717 Wojtek Przepiorka https://orcid.org/0000-0001-9432-8696
#&gt;   author_position is_corresponding
#&gt; 1           first            FALSE
#&gt; 2            last            FALSE
#&gt;                                                           au_affiliation_raw
#&gt; 1 Department of Sociology/ICS, Utrecht University , Utrecht, The Netherlands
#&gt; 2 Department of Sociology/ICS, Utrecht University , Utrecht, The Netherlands
#&gt;                    institution_id institution_display_name           institution_ror
#&gt; 1 https://openalex.org/I193662353       Utrecht University https://ror.org/04pp8hn57
#&gt; 2 https://openalex.org/I193662353       Utrecht University https://ror.org/04pp8hn57
#&gt;   institution_country_code institution_type             institution_lineage
#&gt; 1                       NL        education https://openalex.org/I193662353
#&gt; 2                       NL        education https://openalex.org/I193662353
#&gt; 
#&gt; [[6]]
#&gt;                              au_id   au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5011326378     Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt; 2 https://openalex.org/A5042566717 Wojtek Przepiorka https://orcid.org/0000-0001-9432-8696
#&gt;   author_position is_corresponding
#&gt; 1           first            FALSE
#&gt; 2            last            FALSE
#&gt;                                                          au_affiliation_raw
#&gt; 1 Department of Sociology/ICS, Utrecht University, Utrecht, The Netherlands
#&gt; 2 Department of Sociology/ICS, Utrecht University, Utrecht, The Netherlands
#&gt;                    institution_id institution_display_name           institution_ror
#&gt; 1 https://openalex.org/I193662353       Utrecht University https://ror.org/04pp8hn57
#&gt; 2 https://openalex.org/I193662353       Utrecht University https://ror.org/04pp8hn57
#&gt;   institution_country_code institution_type             institution_lineage
#&gt; 1                       NL        education https://openalex.org/I193662353
#&gt; 2                       NL        education https://openalex.org/I193662353
#&gt; 
#&gt; [[7]]
#&gt;                              au_id   au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5011326378     Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt; 2 https://openalex.org/A5069791094  Milena Tsvetkova https://orcid.org/0000-0002-3552-108X
#&gt; 3 https://openalex.org/A5042566717 Wojtek Przepiorka https://orcid.org/0000-0001-9432-8696
#&gt; 4 https://openalex.org/A5060904065   Vincent Buskens https://orcid.org/0000-0002-4483-7238
#&gt;   author_position is_corresponding
#&gt; 1           first            FALSE
#&gt; 2          middle            FALSE
#&gt; 3          middle            FALSE
#&gt; 4            last            FALSE
#&gt;                                                                                    au_affiliation_raw
#&gt; 1                    Centre for Complex Systems Studies, Utrecht University, Utrecht, The Netherlands
#&gt; 2 Department of Methodology, London School of Economics and Political Science, London, United Kingdom
#&gt; 3                         Department of Sociology / ICS, Utrecht University, Utrecht, The Netherlands
#&gt; 4                    Centre for Complex Systems Studies, Utrecht University, Utrecht, The Netherlands
#&gt;                    institution_id                         institution_display_name
#&gt; 1 https://openalex.org/I173063890           University of Applied Sciences Utrecht
#&gt; 2 https://openalex.org/I909854389 London School of Economics and Political Science
#&gt; 3 https://openalex.org/I193662353                               Utrecht University
#&gt; 4 https://openalex.org/I173063890           University of Applied Sciences Utrecht
#&gt;             institution_ror institution_country_code institution_type
#&gt; 1 https://ror.org/028z9kw20                       NL        education
#&gt; 2 https://ror.org/0090zs177                       GB        education
#&gt; 3 https://ror.org/04pp8hn57                       NL        education
#&gt; 4 https://ror.org/028z9kw20                       NL        education
#&gt;                                                institution_lineage
#&gt; 1                                  https://openalex.org/I173063890
#&gt; 2 https://openalex.org/I124357947, https://openalex.org/I909854389
#&gt; 3                                  https://openalex.org/I193662353
#&gt; 4                                  https://openalex.org/I173063890
#&gt; 
#&gt; [[8]]
#&gt;                              au_id au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5011326378   Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt;   author_position is_corresponding au_affiliation_raw institution_id institution_display_name
#&gt; 1           first             TRUE               &lt;NA&gt;             NA                       NA
#&gt;   institution_ror institution_country_code institution_type institution_lineage
#&gt; 1              NA                       NA               NA                  NA
#&gt; 
#&gt; [[9]]
#&gt;                              au_id   au_display_name                              au_orcid
#&gt; 1 https://openalex.org/A5011326378     Ana Macanovic https://orcid.org/0000-0003-0800-5271
#&gt; 2 https://openalex.org/A5042566717 Wojtek Przepiorka https://orcid.org/0000-0001-9432-8696
#&gt;   author_position is_corresponding                                au_affiliation_raw
#&gt; 1           first             TRUE Utrecht University, Department of Sociology / ICS
#&gt; 2            last            FALSE Utrecht University, Department of Sociology / ICS
#&gt;                    institution_id institution_display_name           institution_ror
#&gt; 1 https://openalex.org/I193662353       Utrecht University https://ror.org/04pp8hn57
#&gt; 2 https://openalex.org/I193662353       Utrecht University https://ror.org/04pp8hn57
#&gt;   institution_country_code institution_type             institution_lineage
#&gt; 1                       NL        education https://openalex.org/I193662353
#&gt; 2                       NL        education https://openalex.org/I193662353</code></pre>
<pre class="r test"><code># authors of all the works that first scholar (here: Ana Macanovic) is part of</code></pre>
</div>
<div id="polsci-department" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> polsci
department</h3>
<pre class="r test"><code># dependent pol_net &lt;- sienaDependent(net_pol_array)


# dependent
pol_nets &lt;- testpolsci$nets


df_pol_ego_demo &lt;- testpolsci$data$demographics
df_pol_ego_oa &lt;- testpolsci$data$scholars_oa
df_pol_ego_works &lt;- testpolsci$data$works


# DEMO
str(df_pol_ego_demo, 1)</code></pre>
<pre class="test2"><code>#&gt; List of 51
#&gt;  $ 358: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 359: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 360: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 361: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 362: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 363: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 364: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 365: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 366: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 367: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 368: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 369: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 370: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 371: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 372: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 373: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 374: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 375: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 376: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 377: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 378: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 379: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 380: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 381: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 382: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 383: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 384: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 385: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 386: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 387: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 388: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 389: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 390: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 391: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 392: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 393: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 394: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 395: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 396: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 397: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 398: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 399: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 400: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 401: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 402: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 403: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 404: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 640: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 641: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 642: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)
#&gt;  $ 643: tibble [1 × 21] (S3: tbl_df/tbl/data.frame)</code></pre>
<pre class="r test"><code>df_pol_ego_demo &lt;- do.call(rbind.data.frame, df_pol_ego_demo)
df_pol_ego_demo[[1]]</code></pre>
<pre class="test2"><code>#&gt;  [1] &quot;Daniel DeRock&quot;            &quot;Yaël van Drunen&quot;          &quot;Teun Eikenaar&quot;           
#&gt;  [4] &quot;Erika van Elsas&quot;          &quot;Naomi Gilhuis&quot;            &quot;Emily Gravesteijn&quot;       
#&gt;  [7] &quot;Gijs Hablous&quot;             &quot;Carolien van Ham&quot;         &quot;Kristof Jacobs&quot;          
#&gt; [10] &quot;Jutta Joachim&quot;            &quot;Gerry van der Kamp-Alons&quot; &quot;Gaard Kets&quot;              
#&gt; [13] &quot;Rosa Kindt&quot;               &quot;Marijn Knieriem&quot;          &quot;Bart van Leeuwen&quot;        
#&gt; [16] &quot;Mathijs van Leeuwen&quot;      &quot;Alex Lehr&quot;                &quot;Charlie Loopuijt&quot;        
#&gt; [19] &quot;Sofie van der Maarel&quot;     &quot;Romain Malejacq&quot;          &quot;Katerina Manevska&quot;       
#&gt; [22] &quot;Gustav Meibauer&quot;          &quot;Maurits Meijers&quot;          &quot;Tine Molendijk&quot;          
#&gt; [25] &quot;Camille Munezero&quot;         &quot;Chris Nijhuis&quot;            &quot;Bob Reinalda&quot;            
#&gt; [28] &quot;Roderik Rekker&quot;           &quot;Saskia Ruth-Lovell&quot;       &quot;Indra Römgens&quot;           
#&gt; [31] &quot;Melisa Soto&quot;              &quot;Nora Stel&quot;                &quot;Haley Swedlund&quot;          
#&gt; [34] &quot;Tjidde Tempels&quot;           &quot;Niels Terpstra&quot;           &quot;Marie Theuwis&quot;           
#&gt; [37] &quot;Maya Turolla&quot;             &quot;Reinout van der Veer&quot;     &quot;Bertjan Verbeek&quot;         
#&gt; [40] &quot;Willemijn Verkoren&quot;       &quot;Mieke Verloo&quot;             &quot;Désirée Verweij&quot;         
#&gt; [43] &quot;Anna van der Vleuten&quot;     &quot;Koen Vossen&quot;              &quot;Angela Wigger&quot;           
#&gt; [46] &quot;Marcel Wissenburg&quot;        &quot;Andrej Zaslove&quot;           &quot;Michal Mochtak&quot;          
#&gt; [49] &quot;Puck Overhaart&quot;           &quot;Guangyu Qiao-Franco&quot;      &quot;Sanne Weber&quot;</code></pre>
<pre class="r test"><code># OA str(df_pol_ego_oa, 1)
df_pol_ego_oa[[1]]</code></pre>
<pre class="test2"><code>#&gt; # A tibble: 1 × 18
#&gt;   id      display_name display_name_alterna…¹ relevance_score ids   orcid works_count cited_by_count
#&gt;   &lt;chr&gt;   &lt;chr&gt;        &lt;list&gt;                           &lt;dbl&gt; &lt;lis&gt; &lt;chr&gt;       &lt;int&gt;          &lt;int&gt;
#&gt; 1 https:… Daniel DeRo… &lt;chr [1]&gt;                        1039. &lt;chr&gt; http…           4             28
#&gt; # ℹ abbreviated name: ¹​display_name_alternatives
#&gt; # ℹ 10 more variables: counts_by_year &lt;list&gt;, affiliation_display_name &lt;chr&gt;, affiliation_id &lt;chr&gt;,
#&gt; #   affiliation_ror &lt;chr&gt;, affiliation_country_code &lt;chr&gt;, affiliation_type &lt;chr&gt;,
#&gt; #   affiliation_lineage &lt;chr&gt;, affiliations_other &lt;list&gt;, x_concepts &lt;list&gt;, works_api_url &lt;chr&gt;</code></pre>
<pre class="r test"><code>df_pol_ego_oa &lt;- do.call(rbind.data.frame, df_pol_ego_oa)


# --&gt; EGO DATAFRAME with demo and oa (political science)
df_pol_ego &lt;- left_join(df_pol_ego_demo, df_pol_ego_oa, by = join_by(au_id == id))

rownames(pol_nets[1, , ]) == df_pol_ego$au_id  # checking if the author id&#39;s are the same as in df_ego in nets dataframe </code></pre>
<pre class="test2"><code>#&gt;  [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
#&gt; [20] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
#&gt; [39] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<pre class="r test"><code># --&gt; yes, the correct ones!!!</code></pre>
</div>
</div>
<div id="gender" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Gender</h2>
<div id="gender-soc" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> gender-soc</h3>
<pre class="r test"><code>df_soc_ego$Naam  # list of all names in sociology department </code></pre>
<pre class="test2"><code>#&gt;  [1] &quot;Ana Macanovic&quot;            &quot;Ronald Batenburg&quot;         &quot;Katia Begall&quot;            
#&gt;  [4] &quot;Hidde Bekhuis&quot;            &quot;Lonneke van den Berg&quot;     &quot;Lieselotte Blommaert&quot;    
#&gt;  [7] &quot;Rob Eisinga&quot;              &quot;Maurice Gesthuizen&quot;       &quot;Nella Geurts&quot;            
#&gt; [10] &quot;Saskia Glas&quot;              &quot;Margriet van Hek&quot;         &quot;Remco Hoekman&quot;           
#&gt; [13] &quot;Bas Hofstra&quot;              &quot;Judith Koops&quot;             &quot;Gerbert Kraaykamp&quot;       
#&gt; [16] &quot;Roza Meuleman&quot;            &quot;Michael Savelkoul&quot;        &quot;Peer Scheepers&quot;          
#&gt; [19] &quot;Niels Spierings&quot;          &quot;Jochem Tolsma&quot;            &quot;Ellen Verbakel&quot;          
#&gt; [22] &quot;Mark Visser&quot;              &quot;Maarten Wolbers&quot;          &quot;Carlijn Bussemakers&quot;     
#&gt; [25] &quot;Rob Franken&quot;              &quot;Mustafa Firat&quot;            &quot;Inge Hendriks&quot;           
#&gt; [28] &quot;Thijmen Jeroense&quot;         &quot;Rachel Kollar&quot;            &quot;Nik Linders&quot;             
#&gt; [31] &quot;Renae  Loh&quot;               &quot;Maikel Meijeren&quot;          &quot;Carly van Mensvoort&quot;     
#&gt; [34] &quot;Anne Maaike Mulders&quot;      &quot;Katrin Müller&quot;            &quot;Klara Raiber&quot;            
#&gt; [37] &quot;Marlou Ramaekers&quot;         &quot;Sara Wiertsema&quot;           &quot;Janos Betko&quot;             
#&gt; [40] &quot;Jansje van Middendorp&quot;    &quot;Elize Vis&quot;                &quot;Tijmen Weber&quot;            
#&gt; [43] &quot;Carl Sterkens&quot;            &quot;Paul Vermeer&quot;             &quot;Malou Grubben&quot;           
#&gt; [46] &quot;Marcel Lubbers&quot;           &quot;Annick van Brouwershaven&quot; &quot;Lex Thijssen&quot;            
#&gt; [49] &quot;Renate Wit&quot;               &quot;Samira Azabar&quot;</code></pre>
<pre class="r test"><code>df_soc_ego$gender &lt;- c(0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1,
    0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0)
# manually filled in gender 0 = woman, 1 = man, based on majority given in NL voornamen bank

# check if it went smoothly
view(df_soc_ego[c(&quot;Naam&quot;, &quot;gender&quot;, &quot;au_id&quot;)])</code></pre>
</div>
<div id="gender---polsci" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> gender -
polsci</h3>
<pre class="r test"><code>df_pol_ego$Naam  # list of all names </code></pre>
<pre class="test2"><code>#&gt;  [1] &quot;Daniel DeRock&quot;            &quot;Yaël van Drunen&quot;          &quot;Teun Eikenaar&quot;           
#&gt;  [4] &quot;Erika van Elsas&quot;          &quot;Naomi Gilhuis&quot;            &quot;Emily Gravesteijn&quot;       
#&gt;  [7] &quot;Gijs Hablous&quot;             &quot;Carolien van Ham&quot;         &quot;Kristof Jacobs&quot;          
#&gt; [10] &quot;Jutta Joachim&quot;            &quot;Gerry van der Kamp-Alons&quot; &quot;Gaard Kets&quot;              
#&gt; [13] &quot;Rosa Kindt&quot;               &quot;Marijn Knieriem&quot;          &quot;Bart van Leeuwen&quot;        
#&gt; [16] &quot;Mathijs van Leeuwen&quot;      &quot;Alex Lehr&quot;                &quot;Charlie Loopuijt&quot;        
#&gt; [19] &quot;Sofie van der Maarel&quot;     &quot;Romain Malejacq&quot;          &quot;Katerina Manevska&quot;       
#&gt; [22] &quot;Gustav Meibauer&quot;          &quot;Maurits Meijers&quot;          &quot;Tine Molendijk&quot;          
#&gt; [25] &quot;Camille Munezero&quot;         &quot;Chris Nijhuis&quot;            &quot;Bob Reinalda&quot;            
#&gt; [28] &quot;Roderik Rekker&quot;           &quot;Saskia Ruth-Lovell&quot;       &quot;Indra Römgens&quot;           
#&gt; [31] &quot;Melisa Soto&quot;              &quot;Nora Stel&quot;                &quot;Haley Swedlund&quot;          
#&gt; [34] &quot;Tjidde Tempels&quot;           &quot;Niels Terpstra&quot;           &quot;Marie Theuwis&quot;           
#&gt; [37] &quot;Maya Turolla&quot;             &quot;Reinout van der Veer&quot;     &quot;Bertjan Verbeek&quot;         
#&gt; [40] &quot;Willemijn Verkoren&quot;       &quot;Mieke Verloo&quot;             &quot;Désirée Verweij&quot;         
#&gt; [43] &quot;Anna van der Vleuten&quot;     &quot;Koen Vossen&quot;              &quot;Angela Wigger&quot;           
#&gt; [46] &quot;Marcel Wissenburg&quot;        &quot;Andrej Zaslove&quot;           &quot;Michal Mochtak&quot;          
#&gt; [49] &quot;Puck Overhaart&quot;           &quot;Guangyu Qiao-Franco&quot;      &quot;Sanne Weber&quot;</code></pre>
<pre class="r test"><code>df_pol_ego$gender &lt;- c(1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
    1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0)
# manually filled in gender 0 = woman, 1 = man, based on majority given in NL voornamen bank,
# Guangyu was not in name bank but based on the employee-picture of RU, this person presents
# feminine, thus I assumed 0.

# check if it went smoothly
view(df_pol_ego[c(&quot;Naam&quot;, &quot;gender&quot;, &quot;au_id&quot;)])

# covariate gender &lt;- coCovar(df_ego$gender)</code></pre>
</div>
<div id="joining-polsci-and-soc-data" class="section level3"
number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> joining polsci and
soc data</h3>
<pre class="r test"><code>df_both_ego &lt;- full_join(df_soc_ego, df_pol_ego, by = join_by(au_id == au_id, Naam == Naam, gender ==
    gender, discipline.22 == discipline.22, discipline.24 == discipline.24, counts_by_year == counts_by_year,
    works_count == works_count, cited_by_count == cited_by_count, Universiteit1.22 == Universiteit1.22,
    Universiteit2.22 == Universiteit2.22, Universiteit1.24 == Universiteit1.24, Universiteit2.24 == Universiteit2.24,
    Universiteit.22 == Universiteit.22, Universiteit.24 == Universiteit.24, no_oa_id == no_oa_id, display_name ==
        display_name, display_name_alternatives == display_name_alternatives, ids == ids, orcid == orcid,
    year.22 == year.22, year.24 == year.24, Functie.24 == Functie.24, relevance_score == relevance_score,
    affiliation_display_name == affiliation_display_name, affiliation_ror == affiliation_ror, affiliation_id ==
        affiliation_id, affiliation_country_code == affiliation_country_code, affiliation_type == affiliation_type,
    affiliations_other == affiliations_other, affiliation_lineage == affiliation_lineage, Specialisatie.22 ==
        Specialisatie.22, Specialisatie.24 == Specialisatie.24, x_concepts == x_concepts, works_api_url ==
        works_api_url))
# 101 scholars (50 sociology + 51 polsci) and 43 variables (as opposed to 21 bc i could not join
# them all.)



# GODDAMMIT WHY DO I ONLY FIND THIS NOW?!?!?!?!  mydata &lt;- sienaDataCreate(net, gender)</code></pre>
</div>
</div>
<div id="question-2" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> QUESTION:</h2>
<p>With 101 scholars, instead of the nr. of scholars of looking at just
one department, I wonder if this is where we could simplify. Looking at
a change over time, but not looking through a lens that wants to compare
the two departments. Instead, I could just look at one department.</p>
<p>What do you think?</p>
</div>
<div id="h-index-webscraping" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> H-index
webscraping</h2>
<p>Credits to Lucan for the code.</p>
<pre class="r test"><code># Add h-index and i10-index columns to df_ego
df_ego &lt;- df_both_ego %&gt;%
    mutate(h_index = NA_real_, i10_index = NA_real_)

# Get H-index and i10-index
get_openalex_metrics &lt;- function(openalex_id) {
    url &lt;- paste0(&quot;https://api.openalex.org/authors/&quot;, openalex_id)
    author_data &lt;- tryCatch({
        jsonlite::fromJSON(url)
    }, error = function(e) {
        message(paste(&quot;Error fetching data for OpenAlex ID:&quot;, openalex_id))
        return(NULL)
    })

    if (!is.null(author_data)) {
        h_index &lt;- author_data$summary_stats$h_index
        i10_index &lt;- author_data$summary_stats$i10_index
        works_count &lt;- author_data$works_count
        cited_by_count &lt;- author_data$cited_by_count
        return(list(h_index = h_index, i10_index = i10_index, works_count = works_count, cited_by_count = cited_by_count))
    } else {
        return(list(h_index = NA, i10_index = NA, works_count = NA, cited_by_count = NA))
    }
}

# Loop for each scholar
for (i in 1:nrow(df_ego)) {
    openalex_id &lt;- df_ego$au_id[i]  # assuming au_id is the OpenAlex ID in df_ego
    metrics &lt;- get_openalex_metrics(openalex_id)
    df_ego$h_index[i] &lt;- metrics$h_index
    df_ego$i10_index[i] &lt;- metrics$i10_index
    df_ego$works_count[i] &lt;- metrics$works_count
    df_ego$cited_by_count[i] &lt;- metrics$cited_by_count
}

# View updated df_ego with h-index and i10-index
view(df_ego[c(&quot;au_id&quot;, &quot;Naam&quot;, &quot;gender&quot;, &quot;h_index&quot;, &quot;i10_index&quot;)])


# covariate h_index &lt;- coCovar(df_ego$h_index)</code></pre>
</div>
<div id="actually-define-data" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Actually define
data:</h2>
<pre class="r test"><code># dependent: net &lt;- sienaDependent(net_soc_array)

# covariate 1 gender &lt;- coCovar(df_ego$gender) covariate 2 h_index &lt;- coCovar(df_ego$h_index)


# combining data: wish I knew of this shit earlier...  mydata &lt;- sienaDataCreate(net, gender)</code></pre>
</div>
</div>
<div id="create-effects-structure" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Create effects
structure</h1>
<pre class="r test"><code># myeff &lt;- getEffects(mydata)</code></pre>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIjEtRGVmaW5lIERhdGEiDQphdXRob3I6ICJWZXJvb28iDQpkYXRlOiAiMjAyNC0xMS0wMSINCm91dHB1dDogaHRtbF9kb2N1bWVudA0KLS0tDQoNCmBgYHtyLCBnbG9iYWxzZXR0aW5ncywgZWNobz1GQUxTRSwgd2FybmluZz1GQUxTRSwgcmVzdWx0cz0naGlkZSd9DQpsaWJyYXJ5KGtuaXRyKQ0KDQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpDQpvcHRzX2NodW5rJHNldCh0aWR5Lm9wdHM9bGlzdCh3aWR0aC5jdXRvZmY9MTAwKSx0aWR5PVRSVUUsIHdhcm5pbmcgPSBGQUxTRSwgbWVzc2FnZSA9IEZBTFNFLGNvbW1lbnQgPSAiIz4iLCBjYWNoZT1UUlVFLCBjbGFzcy5zb3VyY2U9YygidGVzdCIpLCBjbGFzcy5vdXRwdXQ9YygidGVzdDIiKSkNCm9wdGlvbnMod2lkdGggPSAxMDApDQpyZ2w6OnNldHVwS25pdHIoKQ0KDQpjb2xvcml6ZSA8LSBmdW5jdGlvbih4LCBjb2xvcikge3NwcmludGYoIjxzcGFuIHN0eWxlPSdjb2xvcjogJXM7Jz4lczwvc3Bhbj4iLCBjb2xvciwgeCkgfQ0KDQpgYGANCg0KYGBge3Iga2xpcHB5LCBlY2hvPUZBTFNFLCBpbmNsdWRlPUZBTFNFfQ0Ka2xpcHB5OjprbGlwcHkocG9zaXRpb24gPSBjKCd0b3AnLCAncmlnaHQnKSkNCmtsaXBweTo6a2xpcHB5KGNvbG9yID0gJ2RhcmtyZWQnKQ0Ka2xpcHB5OjprbGlwcHkodG9vbHRpcF9tZXNzYWdlID0gJ0NsaWNrIHRvIGNvcHknLCB0b29sdGlwX3N1Y2Nlc3MgPSAnRG9uZScpDQpgYGANCg0KYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9DQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpDQoNCmBgYA0KDQpbKipEZWZpbmluZyBEYXRhKipdey51bmRlcmxpbmV9DQoNCiMgQmVmb3JlIHRoZSBzdGFydA0KDQojIyBDbGVhbiB3b3Jrc3BhY2UNCg0KYGBge3J9DQojIHN0YXJ0IHdpdGggY2xlYW4gd29ya3NwYWNlDQpybShsaXN0ID0gbHMoKSkNCg0KYGBgDQoNCiMjIFBhY2thZ2VzDQoNCmBgYHtyfQ0KIyBpbnN0YWxsLnBhY2thZ2VzKCd0aWR5dmVyc2UnKQ0KcmVxdWlyZSh0aWR5dmVyc2UpDQoNCiMgaW5zdGFsbCBhbiBvbGQgdmVyc2lvbiBvZiBSU2llbmEgaW5jbHVkaW5nIHNpZW5hUkkNCiNyZW1vdmUucGFja2FnZXMoIlJTaWVuYSIpICN1c2UgdGhpcyB0byByZW1vdmUgdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBSU2llbmENCiNkZXZ0b29sczo6aW5zdGFsbF92ZXJzaW9uKCJSU2llbmEiLCB2ZXJzaW9uID0gIjEuMy4xNCIsIHJlcG9zID0gIkM6L1VzZXJzL1Zlcm8vT25lRHJpdmUgLSBSYWRib3VkIFVuaXZlcnNpdGVpdC9Eb2N1bWVudHMvR2l0SHViL2xhYmpvdXJuYWwiKSAjIFRoaXMgaW5zdGFsbHMgYW4gb2xkZXIgdmVyc2lvbg0KDQojIFJ1biBSIGFzIGFkbWluaXN0cmF0b3Igd2hlbiB5b3UgaW5zdGFsbCB0aGUgb2xkZXIgdmVyc2lvbiEhDQoNCiMgWW91IHNob3VsZCBlbmQgdXAgd2l0aCB2ZXJzaW9uIDEuMy4xNCBsb2FkZWQgaW4gaW5zdGVhZCBvZiAxLjQuNywgDQojIGJ1dCB0aGVuIG1ha2Ugc3VyZSB0aGVyZSBpc24ndCBhIGluc3RhbGwucGFja2FnZXMoIlJTaWVuYSIpIGZ1bmN0aW9uIHJ1bm5pbmcgc29tZXdoZXJlLCBiZWNhdXNlIHRoZW4gaXQgd2lsbCByZWluc3RhbGwgdGhlIG5ld2VzdCB2ZXJzaW9uDQoNCiMgcmVxdWlyZShSU2llbmEpDQojIHJlcXVpcmUoUnNpZW5hVHdvU3RlcCkNCg0KYGBgDQoNCkkgZG8gbm90IHNlZW0gdG8gYmUgYWJsZSB0byBjYWxsIG9uIHRoZSBwYWNrYWdlIFJTaWVuYSwgbm9yIGNhbiBJIHJlaW5zdGFsbCBpdC4uLi4gSSBrbm93IHByb2dyYW1taW5nIG5ldmVyIHdvcmtzIG9uIHRoZSBmaXJzdCB0cnkgYnV0Li4uIGdvZGRhbW5pdCwgd2h5IG5vdCBldmVuIGFmdGVyIDE1Pw0KDQojIyBGdW5jdGlvbnMNCg0KIyMjIFF1ZXN0aW9uDQoNCioqSE9XIGRvIEkgZ2V0IHRoZSBkaXNjaXBsaW5lIG9mIHBvbGl0aWNhbCBzY2llbmNlIGluIHRoZXJlIHRvbz8qKg0KDQoqKkhvdyBjYW4gSSBmaW5kIG91dCB3aGF0IHRoZSBuYW1lIGZvciB0aGUgZGlzY2lwbGluZSBvZiBwb2xpdGljYWwgc2NpZW5jZSBpbiB0aGUgb3JpZ2luYWwgZGF0YSBmcmFtZSAoZS5nLiB3aGV0aGVyIGl0IGlzIGNhbGxlZCBwb2xzY2ksIHBvbGl0aWNhbCBzY2llbmNlLCBvciBwb2xpdGljYWxzY2llbmNlKT8qKg0KDQoqKkkgZG9uJ3Qga25vdyBob3cgdG8gdmlldyB0aGUgZGF0YSBzZXQgQkVGT1JFIHdlIGluY2x1ZGUgb25seSB0aG9zZSBzY2hvbGFycyB0aGF0IGhhdmUgZGlzY2lwbGluZSA9IHNvY2lvbG9neS4gSSBjYW5ub3QgdmlldyB0aGUgZGF0YSoqDQoNCkkgdHJpZWQgcmVtb3ZpbmcgdGhlIGRpc2NpcGxpbmUgPSAic29jaW9sb2d5IiBwYXJ0IGluIHRoZSBmX3B1Ym5ldHMsIGZjb2xuZXQgYW5kIGFsbCBmb2xsb3dpbmcgZnVuY3Rpb25zIHRoYXQgc2VsZWN0IGRhdGEgQlVUIFNJTkNFICdkaXNjaXBsaW5lJyBpcyBhbHNvIHJlbGV2YW50IGluIHRoZSByZXN0IG9mIHRoZSBmdW5jdGlvbnMnIGNvZGUsIGl0IGRvZXMgbm90IGVuZCB1cCBkb2luZyB3aGF0IEkgaG9wZWQgKGhhdmluZyBhIGRhdGFzZXQgd2l0aCBzY2hvbGFycyBvZiBubyBzcGVjaWZpYyBkaXNjaXBsaW5lIGJlY2F1c2UgdGhlbiBJIGNvdWxkIGhvcGVmdWxseSBjaGVjayBob3cgdGhlIGRlcGFydG1lbnQgaXMgbmFtZWQgaW4gdGhlIGRhdGEgYW5kIHRoZW4gZmluZCBvdXQgaG93IHRvIGFkZCB0aGF0IHRvIHRoZSBkYXRhIHNldCBpbml0aWFsbHkpLg0KDQpgYGB7cn0NCmZwYWNrYWdlLmNoZWNrIDwtIGZ1bmN0aW9uKHBhY2thZ2VzKSB7DQogICAgbGFwcGx5KHBhY2thZ2VzLCBGVU4gPSBmdW5jdGlvbih4KSB7DQogICAgICAgIGlmICghcmVxdWlyZSh4LCBjaGFyYWN0ZXIub25seSA9IFRSVUUpKSB7DQogICAgICAgICAgICBpbnN0YWxsLnBhY2thZ2VzKHgsIGRlcGVuZGVuY2llcyA9IFRSVUUpDQogICAgICAgICAgICBsaWJyYXJ5KHgsIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSkNCiAgICAgICAgfQ0KICAgIH0pDQp9DQoNCmZzYXZlIDwtIGZ1bmN0aW9uKHgsIGZpbGUgPSBOVUxMLCBsb2NhdGlvbiA9ICIuL2RhdGEvcHJvY2Vzc2VkLyIpIHsNCiAgICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEiKSwgZGlyLmNyZWF0ZSgiZGF0YSIpLCBGQUxTRSkNCiAgICBpZmVsc2UoIWRpci5leGlzdHMoImRhdGEvcHJvY2Vzc2VkIiksIGRpci5jcmVhdGUoImRhdGEvcHJvY2Vzc2VkIiksIEZBTFNFKQ0KICAgIGlmIChpcy5udWxsKGZpbGUpKQ0KICAgICAgICBmaWxlID0gZGVwYXJzZShzdWJzdGl0dXRlKHgpKQ0KICAgIGRhdGVuYW1lIDwtIHN1YnN0cihnc3ViKCJbOi1dIiwgIiIsIFN5cy50aW1lKCkpLCAxLCA4KQ0KICAgIHRvdGFsbmFtZSA8LSBwYXN0ZShsb2NhdGlvbiwgZmlsZSwgIl8iLCBkYXRlbmFtZSwgIi5yZGEiLCBzZXAgPSAiIikNCiAgICBzYXZlKHgsIGZpbGUgPSB0b3RhbG5hbWUpICAjbmVlZCB0byBmaXggaWYgZmlsZSBpcyByZWxvYWRlZCBhcyBpbnB1dCBuYW1lLCBub3QgYXMgeC4gDQp9DQoNCmZsb2FkIDwtIGZ1bmN0aW9uKGZpbGVuYW1lKSB7DQogICAgbG9hZChmaWxlbmFtZSkNCiAgICBnZXQobHMoKVtscygpICE9ICJmaWxlbmFtZSJdKQ0KfQ0KDQpmc2hvd2RmIDwtIGZ1bmN0aW9uKHgsIC4uLikgew0KICAgIGtuaXRyOjprYWJsZSh4LCBkaWdpdHMgPSAyLCAiaHRtbCIsIC4uLikgJT4lDQogICAgICAgIGthYmxlRXh0cmE6OmthYmxlX3N0eWxpbmcoYm9vdHN0cmFwX29wdGlvbnMgPSBjKCJzdHJpcGVkIiwgImhvdmVyIikpICU+JQ0KICAgICAgICBrYWJsZUV4dHJhOjpzY3JvbGxfYm94KHdpZHRoID0gIjEwMCUiLCBoZWlnaHQgPSAiMzAwcHgiKQ0KfQ0KDQoNCiMgdGhpcyBpcyB0aGUgbW9zdCBpbXBvcnRhbnQgb25lLiBXZSBjcmVhdGVkIGl0IGluIHRoZSBwcmV2aW91cyBzY3JpcHQNCg0KZl9wdWJuZXRzIDwtIGZ1bmN0aW9uKGRmX3NjaG9sYXJzID0gZGYsIGxpc3RfcHVibGljYXRpb25zID0gcHVibGljYXRpb25zLCBkaXNjaXAgPSAic29jaW9sb2d5IisicG9saXRpY2FsIHNjaWVuY2UiLCBhZmZpbGlhdGlvbiA9ICJSVSIsDQogICAgd2F2ZXMgPSBsaXN0KHdhdmUxID0gYygyMDE4LCAyMDE5LCAyMDIwKSwgd2F2ZTIgPSBjKDIwMjEsIDIwMjIsIDIwMjMpKSkgew0KDQogICAgcHVibGljYXRpb25zIDwtIGxpc3RfcHVibGljYXRpb25zICU+JQ0KICAgICAgICBiaW5kX3Jvd3MoKSAlPiUNCiAgICAgICAgZGlzdGluY3QodGl0bGUsIC5rZWVwX2FsbCA9IFRSVUUpDQoNCiAgICBkZl9zY2hvbGFycyAlPiUNCiAgICAgICAgZmlsdGVyKGFmZmlsMSA9PSBhZmZpbGlhdGlvbiB8IGFmZmlsMiA9PSBhZmZpbGlhdGlvbikgJT4lDQogICAgICAgIGZpbHRlcihkaXNjaXBsaW5lID09IGRpc2NpcCkgLT4gZGZfc2VsDQoNCiAgICBuZXR3b3JrbGlzdCA8LSBsaXN0KCkNCiAgICBmb3IgKHdhdmUgaW4gMTpsZW5ndGgod2F2ZXMpKSB7DQogICAgICAgIG5ldHdvcmtsaXN0W1t3YXZlXV0gPC0gbWF0cml4KDAsIG5yb3cgPSBucm93KGRmX3NlbCksIG5jb2wgPSBucm93KGRmX3NlbCkpDQogICAgfQ0KDQogICAgcHVibGljYXRpb25saXN0IDwtIGxpc3QoKQ0KICAgIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsNCiAgICAgICAgcHVibGljYXRpb25saXN0W1t3YXZlXV0gPC0gcHVibGljYXRpb25zICU+JQ0KICAgICAgICAgICAgZmlsdGVyKGdzX2lkICVpbiUgZGZfc2VsJGdzX2lkKSAlPiUNCiAgICAgICAgICAgIGZpbHRlcih5ZWFyICVpbiUgd2F2ZXNbW3dhdmVdXSkgJT4lDQogICAgICAgICAgICBzZWxlY3QoYXV0aG9yKSAlPiUNCiAgICAgICAgICAgIGxhcHBseShzdHJfc3BsaXQsIHBhdHRlcm4gPSAiLCIpDQogICAgfQ0KDQogICAgcHVibGljYXRpb25saXN0MiA8LSBsaXN0KCkNCiAgICBmb3IgKHdhdmUgaW4gMTpsZW5ndGgod2F2ZXMpKSB7DQogICAgICAgIHB1YmxpY2F0aW9ubGlzdDJbW3dhdmVdXSA8LSBwdWJsaWNhdGlvbmxpc3RbW3dhdmVdXSRhdXRob3IgJT4lDQogICAgICAgICAgICAjIGxvd2VyY2FzZQ0KICAgICAgICBsYXBwbHkodG9sb3dlcikgJT4lDQogICAgICAgICAgICAjIFJlbW92aW5nIGRpYWNyaXRpY3MNCiAgICAgICAgbGFwcGx5KHN0cmlfdHJhbnNfZ2VuZXJhbCwgaWQgPSAibGF0aW4tYXNjaWkiKSAlPiUNCiAgICAgICAgICAgICMgb25seSBsYXN0IG5hbWUNCiAgICAgICAgbGFwcGx5KHdvcmQsIHN0YXJ0ID0gLTEsIHNlcCA9ICIgIikgJT4lDQogICAgICAgICAgICAjIG9ubHkgbGFzdCBsYXN0IG5hbWUNCiAgICAgICAgbGFwcGx5KHdvcmQsIHN0YXJ0ID0gLTEsIHNlcCA9ICItIikNCiAgICB9DQoNCiAgICBmb3IgKHdhdmUgaW4gMTpsZW5ndGgod2F2ZXMpKSB7DQogICAgICAgICMgbGV0IHVzIHJlbW92ZSBhbGwgcHVibGljYXRpb25zIHdpdGggb25seSBvbmUgYXV0aG9yDQogICAgICAgIHJlbW92ZSA8LSB3aGljaChzYXBwbHkocHVibGljYXRpb25saXN0Mltbd2F2ZV1dLCBGVU4gPSBmdW5jdGlvbih4KSBsZW5ndGgoeCkgPT0gMSkgPT0gVFJVRSkNCiAgICAgICAgcHVibGljYXRpb25saXN0Mltbd2F2ZV1dIDwtIHB1YmxpY2F0aW9ubGlzdDJbW3dhdmVdXVstcmVtb3ZlXQ0KICAgIH0NCg0KICAgIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsNCiAgICAgICAgcHVicyA8LSBwdWJsaWNhdGlvbmxpc3QyW1t3YXZlXV0NCiAgICAgICAgZm9yIChlZ28gaW4gMTpucm93KGRmX3NlbCkpIHsNCiAgICAgICAgICAgICMgd2hpY2ggZWdvPw0KICAgICAgICAgICAgbGFzdG5hbWVfZWdvIDwtIGRmX3NlbCRsYXN0bmFtZVtlZ29dDQogICAgICAgICAgICAjIGZvciBhbGwgcHVibGljYXRpb25zDQogICAgICAgICAgICBmb3IgKHB1YiBpbiAxOmxlbmd0aChwdWJzKSkgew0KICAgICAgICAgICAgICAgICMgb25seSBjb250aW51ZSBpZiBlZ28gaXMgYXV0aG9yIG9mIHB1Yg0KICAgICAgICAgICAgICAgIGlmIChsYXN0bmFtZV9lZ28gJWluJSBwdWJzW1twdWJdXSkgew0KICAgICAgICAgICAgICAgICAgYXV0X3BvdCA8LSB3aGljaC5tYXgocHVic1tbcHViXV0gJWluJSBsYXN0bmFtZV9lZ28pDQogICAgICAgICAgICAgICAgICAjIG9ubHkgY29udGludWUgaWYgZWdvIGlzIGZpcnN0IGF1dGhvciBvZiBwdWINCiAgICAgICAgICAgICAgICAgIGlmIChhdXRfcG90ID09IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgIyBjaGVjayBhbGwgYWx0ZXJzL2NvLWF1dGhvcnMNCiAgICAgICAgICAgICAgICAgICAgZm9yIChhbHRlciBpbiAxOm5yb3coZGZfc2VsKSkgew0KICAgICAgICAgICAgICAgICAgICAgICMgd2hpY2ggYWx0ZXINCiAgICAgICAgICAgICAgICAgICAgICBsYXN0bmFtZV9hbHRlciA8LSBkZl9zZWwkbGFzdG5hbWVbYWx0ZXJdDQogICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RuYW1lX2FsdGVyICVpbiUgcHVic1tbcHViXV0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtsaXN0W1t3YXZlXV1bZWdvLCBhbHRlcl0gPC0gbmV0d29ya2xpc3RbW3dhdmVdXVtlZ28sIGFsdGVyXSArIDENCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuKGxpc3QoZGYgPSBkZl9zZWwsIG5ldHdvcmsgPSBuZXR3b3JrbGlzdCkpDQp9DQoNCmBgYA0KDQojIyBtb3JlIGZ1bmN0aW9ucw0KDQpgYGB7cn0NCmZjb2xuZXQgPC0gZnVuY3Rpb24oZGF0YSA9IHNjaG9sYXJzLCB1bml2ZXJzaXR5ID0gIlJVIiwgZGlzY2lwbGluZSA9ICJzb2Npb2xvZ3kiKyJwb2xpdGljYWwgc2NpZW5jZSIsIHdhdmVzID0gbGlzdChjKDIwMTUsDQogICAgMjAxOCksIGMoMjAxOSwgMjAyMykpLCB0eXBlID0gYygiZmlyc3QiKSkgew0KDQogICAgIyBzdGVwIDENCiAgICBkZW1vZ3JhcGhpY3MgPC0gZG8uY2FsbChyYmluZC5kYXRhLmZyYW1lLCBkYXRhJGRlbW9ncmFwaGljcykNCiAgICBkZW1vZ3JhcGhpY3MgPC0gZGVtb2dyYXBoaWNzICU+JQ0KICAgICAgICBtdXRhdGUoVW5pdmVyc2l0ZWl0MS4yMiA9IHJlcGxhY2UoVW5pdmVyc2l0ZWl0MS4yMiwgaXMubmEoVW5pdmVyc2l0ZWl0MS4yMiksICIiKSwgVW5pdmVyc2l0ZWl0Mi4yMiA9IHJlcGxhY2UoVW5pdmVyc2l0ZWl0Mi4yMiwNCiAgICAgICAgICAgIGlzLm5hKFVuaXZlcnNpdGVpdDIuMjIpLCAiIiksIFVuaXZlcnNpdGVpdDEuMjQgPSByZXBsYWNlKFVuaXZlcnNpdGVpdDEuMjQsIGlzLm5hKFVuaXZlcnNpdGVpdDEuMjQpLA0KICAgICAgICAgICAgIiIpLCBVbml2ZXJzaXRlaXQyLjI0ID0gcmVwbGFjZShVbml2ZXJzaXRlaXQyLjI0LCBpcy5uYShVbml2ZXJzaXRlaXQyLjI0KSwgIiIpLCBkaXNjaXBsaW5lLjIyID0gcmVwbGFjZShkaXNjaXBsaW5lLjIyLA0KICAgICAgICAgICAgaXMubmEoZGlzY2lwbGluZS4yMiksICIiKSwgZGlzY2lwbGluZS4yNCA9IHJlcGxhY2UoZGlzY2lwbGluZS4yNCwgaXMubmEoZGlzY2lwbGluZS4yNCksICIiKSkNCg0KICAgIHNhbXBsZSA8LSB3aGljaCgoZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDEuMjIgJWluJSB1bml2ZXJzaXR5IHwgZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDIuMjIgJWluJQ0KICAgICAgICB1bml2ZXJzaXR5IHwgZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDEuMjQgJWluJSB1bml2ZXJzaXR5IHwgZGVtb2dyYXBoaWNzJFVuaXZlcnNpdGVpdDIuMjQgJWluJQ0KICAgICAgICB1bml2ZXJzaXR5KSAmIChkZW1vZ3JhcGhpY3MkZGlzY2lwbGluZS4yMiAlaW4lIGRpc2NpcGxpbmUgfCBkZW1vZ3JhcGhpY3MkZGlzY2lwbGluZS4yNCAlaW4lIGRpc2NpcGxpbmUpKQ0KDQogICAgZGVtb2dyYXBoaWNzX3NvYyA8LSBkZW1vZ3JhcGhpY3Nbc2FtcGxlLCBdDQogICAgc2Nob2xhcnNfc2VsIDwtIGxhcHBseShzY2hvbGFycywgIlsiLCBzYW1wbGUpDQoNCiAgICAjIHN0ZXAgMg0KICAgIGlkcyA8LSBkZW1vZ3JhcGhpY3Nfc29jJGF1X2lkDQogICAgbndhdmVzIDwtIGxlbmd0aCh3YXZlcykNCiAgICBuZXRzIDwtIGFycmF5KDAsIGRpbSA9IGMobndhdmVzLCBsZW5ndGgoaWRzKSwgbGVuZ3RoKGlkcykpLCBkaW1uYW1lcyA9IGxpc3Qod2F2ZSA9IDE6bndhdmVzLCBpZHMsDQogICAgICAgIGlkcykpDQogICAgZGltbmFtZXMobmV0cykNCg0KICAgICMgc3RlcCAzDQogICAgZGZfd29ya3MgPC0gdGliYmxlKHdvcmtzX2lkID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywgZnVuY3Rpb24obCkgbCRpZCkpLCB3b3Jrc19hdXRob3IgPSB1bmxpc3QobGFwcGx5KHNjaG9sYXJzX3NlbCR3b3JrLA0KICAgICAgICBmdW5jdGlvbihsKSBsJGF1dGhvciksIHJlY3Vyc2l2ZSA9IEZBTFNFKSwgd29ya3NfeWVhciA9IHVubGlzdChsYXBwbHkoc2Nob2xhcnNfc2VsJHdvcmssIGZ1bmN0aW9uKGwpIGwkcHVibGljYXRpb25feWVhciksDQogICAgICAgIHJlY3Vyc2l2ZSA9IEZBTFNFKSkNCg0KICAgIGRmX3dvcmtzIDwtIGRmX3dvcmtzWyFkdXBsaWNhdGVkKGRmX3dvcmtzKSwgXQ0KDQogICAgIyBzdGVwIDQNCiAgICBpZiAodHlwZSA9PSAiZmlyc3QiKSB7DQogICAgICAgIGZvciAoaiBpbiAxOm53YXZlcykgew0KICAgICAgICAgICAgZGZfd29ya3NfdyA8LSBkZl93b3Jrc1tkZl93b3JrcyR3b3Jrc195ZWFyID49IHdhdmVzW1tqXV1bMV0gJiBkZl93b3JrcyR3b3Jrc195ZWFyIDw9IHdhdmVzW1tqXV1bMl0sDQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgZm9yIChpIGluIDE6bnJvdyhkZl93b3Jrc193KSkgew0KICAgICAgICAgICAgICAgIGVnbyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkWzFdDQogICAgICAgICAgICAgICAgYWx0ZXJzIDwtIGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWRbLTFdDQogICAgICAgICAgICAgICAgaWYgKHN1bShpZHMgJWluJSBlZ28pID4gMCAmIHN1bShpZHMgJWluJSBhbHRlcnMpID4gMCkgew0KICAgICAgICAgICAgICAgICAgbmV0c1tqLCB3aGljaChpZHMgJWluJSBlZ28pLCB3aGljaChpZHMgJWluJSBhbHRlcnMpXSA8LSAxDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKHR5cGUgPT0gImxhc3QiKSB7DQogICAgICAgIGZvciAoaiBpbiAxOm53YXZlcykgew0KICAgICAgICAgICAgZGZfd29ya3NfdyA8LSBkZl93b3Jrc1tkZl93b3JrcyR3b3Jrc195ZWFyID49IHdhdmVzW1tqXV1bMV0gJiBkZl93b3JrcyR3b3Jrc195ZWFyIDw9IHdhdmVzW1tqXV1bMl0sDQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgZm9yIChpIGluIDE6bnJvdyhkZl93b3Jrc193KSkgew0KICAgICAgICAgICAgICAgIGVnbyA8LSByZXYoZGZfd29ya3NfdyR3b3Jrc19hdXRob3JbaV1bWzFdXSRhdV9pZClbMV0NCiAgICAgICAgICAgICAgICBhbHRlcnMgPC0gcmV2KGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQpWy0xXQ0KICAgICAgICAgICAgICAgIGlmIChzdW0oaWRzICVpbiUgZWdvKSA+IDAgJiBzdW0oaWRzICVpbiUgYWx0ZXJzKSA+IDApIHsNCiAgICAgICAgICAgICAgICAgIG5ldHNbaiwgd2hpY2goaWRzICVpbiUgZWdvKSwgd2hpY2goaWRzICVpbiUgYWx0ZXJzKV0gPC0gMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICh0eXBlID09ICJhbGwiKSB7DQogICAgICAgIGZvciAoaiBpbiAxOm53YXZlcykgew0KICAgICAgICAgICAgZGZfd29ya3NfdyA8LSBkZl93b3Jrc1tkZl93b3JrcyR3b3Jrc195ZWFyID49IHdhdmVzW1tqXV1bMV0gJiBkZl93b3JrcyR3b3Jrc195ZWFyIDw9IHdhdmVzW1tqXV1bMl0sDQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgZm9yIChpIGluIDE6bnJvdyhkZl93b3Jrc193KSkgew0KICAgICAgICAgICAgICAgIGVnb3MgPC0gZGZfd29ya3NfdyR3b3Jrc19hdXRob3JbaV1bWzFdXSRhdV9pZA0KICAgICAgICAgICAgICAgIGlmIChzdW0oaWRzICVpbiUgZWdvcykgPiAwKSB7DQogICAgICAgICAgICAgICAgICBuZXRzW2osIHdoaWNoKGlkcyAlaW4lIGVnb3MpLCB3aGljaChpZHMgJWluJSBlZ29zKV0gPC0gMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBvdXRwdXQgPC0gbGlzdCgpDQogICAgb3V0cHV0JGRhdGEgPC0gc2Nob2xhcnNfc2VsDQogICAgb3V0cHV0JG5ldHMgPC0gbmV0cw0KICAgIHJldHVybihvdXRwdXQpDQp9DQoNCg0KYGBgDQoNCiMjIGxvYWQgYW5kIGluc3BlY3QgZGF0YQ0KDQpgYGB7cn0NCnNjaG9sYXJzIDwtIGZsb2FkKCIuL2RhdGEvcHJvY2Vzc2VkL3NjaG9sYXJzXzIwMjQwOTI0LnJkYSIpICNtYWtlIHN1cmUgdG8gbGVhZCBmbG9hZCBmaXJzdCBvZmNvdXJzZQ0KDQojaW5zcGVjdGluZyBzY2hvbGFyc18yMDI0MDkyNC5yZGEgb2JqZWN0DQojZGZfZWdvIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgc2Nob2xhcnMkZGVtb2dyYXBoaWNzKQ0KI3VuaXF1ZShkZl9lZ28kZGlzY2lwbGluZS4yMikNCg0KIyBzYXZlIHRoZSBvdXRwdXQgb2YgeW91ciBmdW5jdGlvbg0KdGVzdHNvYyAgPC0gZmNvbG5ldChkYXRhID0gc2Nob2xhcnMsIA0KICAgICAgICAgICAgICAgIHVuaXZlcnNpdHkgPSAiUlUiLCANCiAgICAgICAgICAgICAgICBkaXNjaXBsaW5lID0gInNvY2lvbG9neSIsIA0KICAgICAgICAgICAgICAgIHdhdmVzID0gbGlzdChjKDIwMTUsIDIwMTgpLCBjKDIwMTksIDIwMjMpKSwgDQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9IGMoImZpcnN0IikpDQoNCiMgSSBET05UIEtOT1cgSE9XIFRPIE1BS0UgQUxMIFNDSE9MQVJTIEJFIFBBUlQgT0YgU0FNRSBGVU5DVElPTiAoInNvY2lvbG9neSIrICJwb2xpdGljYWwgc2NpZW5jZSIgZG9lcyBub3Qgd29yay4uLikNCg0KdGVzdHBvbHNjaSA8LSBmY29sbmV0KGRhdGEgPSBzY2hvbGFycywgDQogICAgICAgICAgICAgICAgdW5pdmVyc2l0eSA9ICJSVSIsIA0KICAgICAgICAgICAgICAgIGRpc2NpcGxpbmUgPSAicG9saXRpY2FsIHNjaWVuY2UiLCANCiAgICAgICAgICAgICAgICB3YXZlcyA9IGxpc3QoYygyMDE1LCAyMDE4KSwgYygyMDE5LCAyMDIzKSksIA0KICAgICAgICAgICAgICAgIHR5cGUgPSBjKCJmaXJzdCIpKQ0KYGBgDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQojIERlZmluZSBEYXRhDQoNCiMjIHdhdmVzIC0gc29jaW9sb2d5IGRlcGFydG1lbnQNCg0KYGBge3J9DQoNCiMgSm9jaGVtIG1lc3NlZCB1cCBhbmQgZGlkOiB3YXZlcywgcm93cywgY29sdW1ucyBbMSwgLCBdDQpzb2N3YXZlMSA8LSB0ZXN0c29jJG5ldHNbICwgLDFdICAjcm93cywgY29sdW1ucywgd2F2ZXMNCnNvY3dhdmUyIDwtIHRlc3Rzb2MkbmV0c1sgLCAsMl0gICNyb3dzLCBjb2x1bW5zLCB3YXZlcw0KIyBsZXQgdXMgcHV0IHRoZSBkaWFnb25hbCB0byB6ZXJvDQpkaWFnKHNvY3dhdmUxKSA8LSAwDQpkaWFnKHNvY3dhdmUyKSA8LSAwDQojIHdlIHdhbnQgYSBiaW5hcnkgdGllIChub3QgYSB3ZWlnaHRlZCB0aWUpDQpzb2N3YXZlMVtzb2N3YXZlMSA+IDFdIDwtIDENCnNvY3dhdmUyW3NvY3dhdmUyID4gMV0gPC0gMQ0KIyBwdXQgdGhlIG5ldHMgaW4gYW4gYXJyYXkNCm5ldF9zb2NfYXJyYXkgPC0gYXJyYXkoZGF0YSA9IGMoc29jd2F2ZTEsIHNvY3dhdmUyKSwgZGltID0gYyhkaW0oc29jd2F2ZTEpLCAyKSkNCg0Kc3RyKG5ldF9zb2NfYXJyYXkpICAjbm93IHdlIGJhc2ljYWxseSByZXN0cnVjdHVyZWQgdGhpcyANCiMgb3V0cHV0OiBudW0gWzE6NTAsIDE6NTAsIDE6Ml0gMCAwIDAgMCAwIDAgMCAwIDAgMA0KYGBgDQoNCiMjIHdhdmVzIC0gcG9sc2NpIGRlcGFydG1lbnQNCg0KYGBge3J9DQojIEpvY2hlbSBtZXNzZWQgdXAgYW5kIGRpZDogd2F2ZXMsIHJvd3MsIGNvbHVtbnMgWzEsICwgXQ0KcG9sd2F2ZTEgPC0gdGVzdHBvbHNjaSRuZXRzWyAsICwxXSAgI3Jvd3MsIGNvbHVtbnMsIHdhdmVzDQpwb2x3YXZlMiA8LSB0ZXN0cG9sc2NpJG5ldHNbICwgLDJdICAjcm93cywgY29sdW1ucywgd2F2ZXMNCiMgbGV0IHVzIHB1dCB0aGUgZGlhZ29uYWwgdG8gemVybw0KZGlhZyhwb2x3YXZlMSkgPC0gMA0KZGlhZyhwb2x3YXZlMikgPC0gMA0KIyB3ZSB3YW50IGEgYmluYXJ5IHRpZSAobm90IGEgd2VpZ2h0ZWQgdGllKQ0KcG9sd2F2ZTFbcG9sd2F2ZTEgPiAxXSA8LSAxDQpwb2x3YXZlMltwb2x3YXZlMiA+IDFdIDwtIDENCiMgcHV0IHRoZSBuZXRzIGluIGFuIGFycmF5DQpuZXRfcG9sX2FycmF5IDwtIGFycmF5KGRhdGEgPSBjKHBvbHdhdmUxLCBwb2x3YXZlMiksIGRpbSA9IGMoZGltKHBvbHdhdmUxKSwgMikpDQoNCnN0cihuZXRfcG9sX2FycmF5KSAgI25vdyB3ZSBiYXNpY2FsbHkgcmVzdHJ1Y3R1cmVkIHRoaXMgDQoNCmBgYA0KDQojIyMgKipRVUVTVElPTjoqKg0KDQoqKldoYXQncyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHB1dHRpbmcgdGhlIDIgYW5kIHRoZSAxIGF0IHRoZSBkaW1lbnNpb25zLiBJIGZlZWwgbGlrZSBvbmUgaXMgYXBwcm9wcmlhdGUgc2luY2UgSSBhbSBvbmx5IGxvb2tpbmcgYXQgb25lIHdhdmUsIG5vdCB0d28sIGJ1dCBzaW5jZSB0aGUgb3V0cHV0IGlzIGFtb25nIHRoZSAndmFsdWVzJyBub3QgJ2RhdGEnLCBJIGNhbm5vdCB2aWV3IHRoZSB2YXJpYWJsZSBuZXRfc29jX2FycmF5KDEpIG5vciAidmlzdWFsaXplIiB3aGF0IHRoYXQgbWVhbnMgaW4gdGVybXMgb2YgaXRzIHN0cnVjdHVyZS4gSSBkb24ndCByZWFsbHkga25vdyB3aGF0IHRoZSBkaWZmZXJlbmNlIHdvdWxkIGJlIGJldHdlZW4gdGhlIDE6MiBhbmQgdGhlIDEgaW4gdGhlIG91dHB1dHMsIHN0cnVjdHVyYWxseS4qKg0KDQojIyMgQU5TV0VSOiANCg0KUlNpZW5hIG5lZWRzIGF0IGxlYXN0IHR3byB3YXZlcywgYmVjYXVzZSBpdCBtb2RlbHMgdGhlIGV2b2x1dGlvbiBvZiB0aGUgbmV0d29ya3MuIFdlIGhhdmUgdG8gc3RvcmUgdGhlIG5ldHdvcmtzIGluIGFuIGFycmF5IGJlZm9yZSB3ZSBjYW4gY29udmVydCBpdCB0byBhbiBkZXBlbmRlbnQgdmFyaWFibGUgb2JqZWN0cy4gTW9yZW92ZXIsIGZvciBSU2llbmEgdGhlIGRpbWVuc2lvbnMgc2hvdWxkIGJlIGluIHRoZSBmb2xsb3dpbmcgb3JkZXI6IHJvd3MsIGNvbHVtbnMsIHdhdmVzLg0KDQpJICdtZXNzZWQgdXAnIG15IGZ1bmN0aW9uIChmb3IgZGlkYWN0aWMgcmVhc29ucyA7LSkgKWFuZCBzdG9yZWQgdGhlIG5ldHMgaW4gdGhlIGZvbGxvd2luZyBvcmRlcjogd2F2ZXMsIHJvd3MsIGNvbHVtbnMuIFRodXMsIGVpdGhlciBjb3JyZWN0IG15IGZ1bmN0aW9uIG9yIHJldHJpZXZlIHRoZSBzZXBhcmF0ZSB3YXZlcyBhbmQgc3RvcmUgdGhlbSBpbiB0aGUgb3JkZXIgUlNpZW5hIHJlcXVpcmVzLg0KDQojIyMgUVVFU1RJT04gVE8gVEhFIEFOU1dFUjoNCg0KV2UgaGFkIGFncmVlZCBvbiBtZSBvbmx5IGludmVzdGlnYXRpbmcgb25lIHRpbWUgcG9pbnQgZm9yIHRoZSBzYWtlIG9mIHNpbXBsaWNpdHkuIEl0IHNlZW1zIEkgYmFzaWNhbGx5IGhhdmUgbm8gY2hvaWNlIGJ1dCB0byBpbnZlc3RpZ2F0ZSB0d28gd2F2ZXMsIHJldmlzaXQgbXkgUlFzIGFuZCBtYWtlIGFuIGFkZGl0aW9uYWwgUlEgYWJvdXQgdGllIGNoYW5nZXMgb3ZlciB0aW1lLCByaWdodD8NCg0KVGhlbiBJIHdvdWxkIGVuZCB1cCB3aXRoIDQgUlFzIGFuZCB0aGF0IHNlZW1zIGxpa2UgbW9yZSB0aGFuIGl0IG5lZWRzIHRvIGJlIGZvciB0aGlzIHByb2plY3QgKGdyZWF0IGZvciBhIHJlc2VhcmNoIGluY2VudGl2ZSwgYnV0IGZvciB0aGlzIGNsYXNzIEkgbmVlZCB0byBrZWVwIGl0IHNpbXBsZSwgYXMgSSBhbSBjdXJyZW50bHkgdmVyeSBvdmVyd29ya2VkKS4NCg0KQW55IGFkdmljZSBvbiBob3cgSSBjYW4ga2VlcCBpdCBzaW1wbGUsIG5vbmV0aGVsZXNzPw0KDQojIyBFeGFtaW5lIHN0cnVjdHVyZQ0KDQpgYGB7cn0NCmRpbSh0ZXN0c29jJG5ldHMpDQpgYGANCg0KYGBge3J9DQpkaW0odGVzdHBvbHNjaSRuZXRzKQ0KYGBgDQoNCiMjIE15IGRhdGENCg0KIyMjIHNvY2lvbG9neSBkZXAuIA0KDQpub3QgdXNpbmcgbmV0X3NvY19hcnJheSBmb3Igbm93IHNpbmNlIEkgYW0gdW5zdXJlIGFib3V0IGl0cyB1c2UgZHVlIHRvIHF1ZXN0aW9uIGFib3ZlDQoNCmBgYHtyfQ0KIyBkZXBlbmRlbnQNCiMgbmV0IDwtIHNpZW5hRGVwZW5kZW50KG5ldF9zb2NfYXJyYXkpDQoNCg0KIyBkZXBlbmRlbnQgDQpuZXRzIDwtIHRlc3Rzb2MkbmV0cw0KDQogDQpkZl9lZ29fZGVtbyA8LSB0ZXN0c29jJGRhdGEkZGVtb2dyYXBoaWNzDQpkZl9lZ29fb2EgPC0gdGVzdHNvYyRkYXRhJHNjaG9sYXJzX29hDQpkZl9lZ29fd29ya3MgPC0gdGVzdHNvYyRkYXRhJHdvcmtzDQoNCg0KIyBERU1PDQogIHN0cihkZl9lZ29fZGVtbywgMSkgDQogIA0KICBkZl9lZ29fZGVtbyA8LSBkby5jYWxsKHJiaW5kLmRhdGEuZnJhbWUsIGRmX2Vnb19kZW1vKQ0KICBkZl9lZ29fZGVtb1tbMV1dDQoNCiMgT0ENCiAgI3N0cihkZl9lZ29fb2EsIDEpDQogIGRmX2Vnb19vYVtbMV1dDQogIGRmX2Vnb19vYSA8LSBkby5jYWxsKHJiaW5kLmRhdGEuZnJhbWUsIGRmX2Vnb19vYSkNCg0KDQogICMgLS0+IEVHTyBEQVRBRlJBTUUgd2l0aCBkZW1vIGFuZCBvYSAoc29jaW9sb2d5KQ0KICA/am9pbi5kYXRhLmZyYW1lDQogIGRmX3NvY19lZ28gPC0gbGVmdF9qb2luKGRmX2Vnb19kZW1vLCBkZl9lZ29fb2EsIGJ5ID0gam9pbl9ieShhdV9pZCA9PSBpZCkpDQogIA0KICByb3duYW1lcyhuZXRzWzEsLF0pID09IGRmX3NvY19lZ28kYXVfaWQgIyBjaGVja2luZyBpZiB0aGUgYXV0aG9yIGlkJ3MgYXJlIHRoZSBzYW1lIGFzIGluIGRmX2VnbyBpbiBuZXRzIGRhdGFmcmFtZSANCiAgIyAtLT4geWVzLCB0aGUgY29ycmVjdCBvbmVzISEhDQogIA0KICANCiAgZGZfZWdvX3dvcmtzW1sxXV0kYXV0aG9yIA0KI2F1dGhvcnMgb2YgYWxsIHRoZSB3b3JrcyB0aGF0IGZpcnN0IHNjaG9sYXIgKGhlcmU6IEFuYSBNYWNhbm92aWMpIGlzIHBhcnQgb2YgDQoNCg0KYGBgDQoNCiMjIyBwb2xzY2kgZGVwYXJ0bWVudCANCg0KYGBge3J9DQojIGRlcGVuZGVudA0KIyBwb2xfbmV0IDwtIHNpZW5hRGVwZW5kZW50KG5ldF9wb2xfYXJyYXkpDQoNCg0KIyBkZXBlbmRlbnQgDQpwb2xfbmV0cyA8LSB0ZXN0cG9sc2NpJG5ldHMNCg0KIA0KZGZfcG9sX2Vnb19kZW1vIDwtIHRlc3Rwb2xzY2kkZGF0YSRkZW1vZ3JhcGhpY3MNCmRmX3BvbF9lZ29fb2EgPC0gdGVzdHBvbHNjaSRkYXRhJHNjaG9sYXJzX29hDQpkZl9wb2xfZWdvX3dvcmtzIDwtIHRlc3Rwb2xzY2kkZGF0YSR3b3Jrcw0KDQoNCiMgREVNTw0KICBzdHIoZGZfcG9sX2Vnb19kZW1vLCAxKSANCiAgDQogIGRmX3BvbF9lZ29fZGVtbyA8LSBkby5jYWxsKHJiaW5kLmRhdGEuZnJhbWUsIGRmX3BvbF9lZ29fZGVtbykNCiAgZGZfcG9sX2Vnb19kZW1vW1sxXV0NCg0KIyBPQQ0KICAjc3RyKGRmX3BvbF9lZ29fb2EsIDEpDQogIGRmX3BvbF9lZ29fb2FbWzFdXQ0KICBkZl9wb2xfZWdvX29hIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGZfcG9sX2Vnb19vYSkNCiAgDQogIA0KIyAtLT4gRUdPIERBVEFGUkFNRSB3aXRoIGRlbW8gYW5kIG9hIChwb2xpdGljYWwgc2NpZW5jZSkNCiAgZGZfcG9sX2VnbyA8LSBsZWZ0X2pvaW4oZGZfcG9sX2Vnb19kZW1vLCBkZl9wb2xfZWdvX29hLCBieSA9IGpvaW5fYnkoYXVfaWQgPT0gaWQpKQ0KDQogIHJvd25hbWVzKHBvbF9uZXRzWzEsLF0pID09IGRmX3BvbF9lZ28kYXVfaWQgIyBjaGVja2luZyBpZiB0aGUgYXV0aG9yIGlkJ3MgYXJlIHRoZSBzYW1lIGFzIGluIGRmX2VnbyBpbiBuZXRzIGRhdGFmcmFtZSANCiAgIyAtLT4geWVzLCB0aGUgY29ycmVjdCBvbmVzISEhDQpgYGANCg0KIyMgR2VuZGVyDQoNCiMjIyBnZW5kZXItc29jDQoNCmBgYHtyfQ0KZGZfc29jX2VnbyROYWFtICMgbGlzdCBvZiBhbGwgbmFtZXMgaW4gc29jaW9sb2d5IGRlcGFydG1lbnQgDQoNCmRmX3NvY19lZ28kZ2VuZGVyIDwtIGMoMCwxLDAsMSwwLDAsMSwxLDAsMCwNCiAgICAgICAgICAgICAgICAgICAgICAgMCwxLDEsMCwxLDAsMSwxLDEsMSwNCiAgICAgICAgICAgICAgICAgICAgICAgMCwxLDEsMCwxLDEsMCwxLDAsMSwNCiAgICAgICAgICAgICAgICAgICAgICAgMCwxLDAsMCwwLDAsMCwwLDEsMCwNCiAgICAgICAgICAgICAgICAgICAgICAgMCwxLDEsMSwwLDEsMCwxLDAsMCkgDQojIG1hbnVhbGx5IGZpbGxlZCBpbiBnZW5kZXIgMCA9IHdvbWFuLCAxID0gbWFuLCBiYXNlZCBvbiBtYWpvcml0eSBnaXZlbiBpbiBOTCB2b29ybmFtZW4gYmFuayANCg0KIyBjaGVjayBpZiBpdCB3ZW50IHNtb290aGx5IA0KdmlldyhkZl9zb2NfZWdvW2MoJ05hYW0nLCAnZ2VuZGVyJywgJ2F1X2lkJyldKQ0KDQoNCmBgYA0KDQojIyMgZ2VuZGVyIC0gcG9sc2NpDQoNCmBgYHtyfQ0KZGZfcG9sX2VnbyROYWFtICMgbGlzdCBvZiBhbGwgbmFtZXMgDQoNCmRmX3BvbF9lZ28kZ2VuZGVyIDwtIGMoMSwwLDEsMCwwLDAsMSwwLDEsMCwNCiAgICAgICAgICAgICAgICAgICAgICAgMSwxLDAsMCwxLDEsMSwwLDAsMSwNCiAgICAgICAgICAgICAgICAgICAgICAgMCwxLDEsMCwwLDEsMSwxLDAsMCwNCiAgICAgICAgICAgICAgICAgICAgICAgMCwwLDAsMSwxLDAsMCwxLDEsMCwNCiAgICAgICAgICAgICAgICAgICAgICAgMCwwLDAsMSwwLDEsMSwxLDAsMCwwKSANCiAgICAjIG1hbnVhbGx5IGZpbGxlZCBpbiBnZW5kZXIgMCA9IHdvbWFuLCAxID0gbWFuLCBiYXNlZCBvbiBtYWpvcml0eSBnaXZlbiBpbiBOTCB2b29ybmFtZW4gYmFuaywgR3Vhbmd5dSB3YXMgbm90IGluIG5hbWUgYmFuayBidXQgYmFzZWQgb24gdGhlIGVtcGxveWVlLXBpY3R1cmUgb2YgUlUsIHRoaXMgcGVyc29uIHByZXNlbnRzIGZlbWluaW5lLCB0aHVzIEkgYXNzdW1lZCAwLiANCg0KIyBjaGVjayBpZiBpdCB3ZW50IHNtb290aGx5IA0KdmlldyhkZl9wb2xfZWdvW2MoJ05hYW0nLCAnZ2VuZGVyJywgJ2F1X2lkJyldKQ0KDQojY292YXJpYXRlIA0KIyBnZW5kZXIgPC0gY29Db3ZhcihkZl9lZ28kZ2VuZGVyKQ0KYGBgDQoNCiMjIyBqb2luaW5nIHBvbHNjaSBhbmQgc29jIGRhdGEgDQoNCmBgYHtyfQ0KZGZfYm90aF9lZ28gPC0gZnVsbF9qb2luKGRmX3NvY19lZ28sIGRmX3BvbF9lZ28sIGJ5ID0gam9pbl9ieQ0KICAgICAgICAgICAgICAgICAgICAoYXVfaWQgPT0gYXVfaWQsIA0KICAgICAgICAgICAgICAgICAgICAgTmFhbT09TmFhbSwgDQogICAgICAgICAgICAgICAgICAgICBnZW5kZXIgPT0gZ2VuZGVyLCANCiAgICAgICAgICAgICAgICAgICAgIGRpc2NpcGxpbmUuMjIgPT0gZGlzY2lwbGluZS4yMiwNCiAgICAgICAgICAgICAgICAgICAgIGRpc2NpcGxpbmUuMjQgPT0gZGlzY2lwbGluZS4yNCwNCiAgICAgICAgICAgICAgICAgICAgIGNvdW50c19ieV95ZWFyPT0gY291bnRzX2J5X3llYXIsIA0KICAgICAgICAgICAgICAgICAgICAgd29ya3NfY291bnQgPT0gd29ya3NfY291bnQsIA0KICAgICAgICAgICAgICAgICAgICAgY2l0ZWRfYnlfY291bnQgPT0gY2l0ZWRfYnlfY291bnQsIA0KICAgICAgICAgICAgICAgICAgICAgVW5pdmVyc2l0ZWl0MS4yMiA9PSBVbml2ZXJzaXRlaXQxLjIyLA0KICAgICAgICAgICAgICAgICAgICAgVW5pdmVyc2l0ZWl0Mi4yMiA9PSBVbml2ZXJzaXRlaXQyLjIyLA0KICAgICAgICAgICAgICAgICAgICAgVW5pdmVyc2l0ZWl0MS4yNCA9PSBVbml2ZXJzaXRlaXQxLjI0LA0KICAgICAgICAgICAgICAgICAgICAgVW5pdmVyc2l0ZWl0Mi4yNCA9PSBVbml2ZXJzaXRlaXQyLjI0LA0KICAgICAgICAgICAgICAgICAgICAgVW5pdmVyc2l0ZWl0LjIyID09IFVuaXZlcnNpdGVpdC4yMiwgDQogICAgICAgICAgICAgICAgICAgICBVbml2ZXJzaXRlaXQuMjQgPT0gVW5pdmVyc2l0ZWl0LjI0LA0KICAgICAgICAgICAgICAgICAgICAgbm9fb2FfaWQgPT0gbm9fb2FfaWQsDQogICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X25hbWUgPT0gZGlzcGxheV9uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9uYW1lX2FsdGVybmF0aXZlcyA9PSBkaXNwbGF5X25hbWVfYWx0ZXJuYXRpdmVzLA0KICAgICAgICAgICAgICAgICAgICAgaWRzPT0gaWRzLA0KICAgICAgICAgICAgICAgICAgICAgb3JjaWQgPT0gb3JjaWQsDQogICAgICAgICAgICAgICAgICAgICB5ZWFyLjIyID09IHllYXIuMjIsDQogICAgICAgICAgICAgICAgICAgICB5ZWFyLjI0ID09IHllYXIuMjQsDQogICAgICAgICAgICAgICAgICAgICBGdW5jdGllLjI0PT0gRnVuY3RpZS4yNCwNCiAgICAgICAgICAgICAgICAgICAgIHJlbGV2YW5jZV9zY29yZSA9PSByZWxldmFuY2Vfc2NvcmUsDQogICAgICAgICAgICAgICAgICAgICBhZmZpbGlhdGlvbl9kaXNwbGF5X25hbWUgPT0gYWZmaWxpYXRpb25fZGlzcGxheV9uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgYWZmaWxpYXRpb25fcm9yID09IGFmZmlsaWF0aW9uX3JvciwNCiAgICAgICAgICAgICAgICAgICAgIGFmZmlsaWF0aW9uX2lkID09IGFmZmlsaWF0aW9uX2lkLA0KICAgICAgICAgICAgICAgICAgICAgYWZmaWxpYXRpb25fY291bnRyeV9jb2RlID09IGFmZmlsaWF0aW9uX2NvdW50cnlfY29kZSwNCiAgICAgICAgICAgICAgICAgICAgIGFmZmlsaWF0aW9uX3R5cGUgPT0gYWZmaWxpYXRpb25fdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgIGFmZmlsaWF0aW9uc19vdGhlciA9PSBhZmZpbGlhdGlvbnNfb3RoZXIsDQogICAgICAgICAgICAgICAgICAgICBhZmZpbGlhdGlvbl9saW5lYWdlID09IGFmZmlsaWF0aW9uX2xpbmVhZ2UsDQogICAgICAgICAgICAgICAgICAgICBTcGVjaWFsaXNhdGllLjIyID09IFNwZWNpYWxpc2F0aWUuMjIsDQogICAgICAgICAgICAgICAgICAgICBTcGVjaWFsaXNhdGllLjI0ID09IFNwZWNpYWxpc2F0aWUuMjQsDQogICAgICAgICAgICAgICAgICAgICB4X2NvbmNlcHRzID09IHhfY29uY2VwdHMsDQogICAgICAgICAgICAgICAgICAgICB3b3Jrc19hcGlfdXJsID09IHdvcmtzX2FwaV91cmwpKQ0KIyAxMDEgc2Nob2xhcnMgKDUwIHNvY2lvbG9neSArIDUxIHBvbHNjaSkgYW5kIDQzIHZhcmlhYmxlcyAoYXMgb3Bwb3NlZCB0byAyMSBiYyBpIGNvdWxkIG5vdCBqb2luIHRoZW0gYWxsLikNCg0KDQoNCiMgR09EREFNTUlUIFdIWSBETyBJIE9OTFkgRklORCBUSElTIE5PVz8hPyE/IT8hDQojIG15ZGF0YSA8LSBzaWVuYURhdGFDcmVhdGUobmV0LCBnZW5kZXIpDQpgYGANCg0KIyMgUVVFU1RJT046DQoNCldpdGggMTAxIHNjaG9sYXJzLCBpbnN0ZWFkIG9mIHRoZSBuci4gb2Ygc2Nob2xhcnMgb2YgbG9va2luZyBhdCBqdXN0IG9uZSBkZXBhcnRtZW50LCBJIHdvbmRlciBpZiB0aGlzIGlzIHdoZXJlIHdlIGNvdWxkIHNpbXBsaWZ5LiBMb29raW5nIGF0IGEgY2hhbmdlIG92ZXIgdGltZSwgYnV0IG5vdCBsb29raW5nIHRocm91Z2ggYSBsZW5zIHRoYXQgd2FudHMgdG8gY29tcGFyZSB0aGUgdHdvIGRlcGFydG1lbnRzLiBJbnN0ZWFkLCBJIGNvdWxkIGp1c3QgbG9vayBhdCBvbmUgZGVwYXJ0bWVudC4NCg0KV2hhdCBkbyB5b3UgdGhpbms/DQoNCiMjIEgtaW5kZXggd2Vic2NyYXBpbmcNCg0KQ3JlZGl0cyB0byBMdWNhbiBmb3IgdGhlIGNvZGUuDQoNCmBgYHtyfQ0KIyBBZGQgaC1pbmRleCBhbmQgaTEwLWluZGV4IGNvbHVtbnMgdG8gZGZfZWdvDQpkZl9lZ28gPC0gZGZfYm90aF9lZ28gJT4lDQogIG11dGF0ZShoX2luZGV4ID0gTkFfcmVhbF8sIGkxMF9pbmRleCA9IE5BX3JlYWxfKQ0KDQojIEdldCBILWluZGV4IGFuZCBpMTAtaW5kZXggDQpnZXRfb3BlbmFsZXhfbWV0cmljcyA8LSBmdW5jdGlvbihvcGVuYWxleF9pZCkgew0KICB1cmwgPC0gcGFzdGUwKCJodHRwczovL2FwaS5vcGVuYWxleC5vcmcvYXV0aG9ycy8iLCBvcGVuYWxleF9pZCkNCiAgYXV0aG9yX2RhdGEgPC0gdHJ5Q2F0Y2goew0KICAgIGpzb25saXRlOjpmcm9tSlNPTih1cmwpDQogIH0sIGVycm9yID0gZnVuY3Rpb24oZSkgew0KICAgIG1lc3NhZ2UocGFzdGUoIkVycm9yIGZldGNoaW5nIGRhdGEgZm9yIE9wZW5BbGV4IElEOiIsIG9wZW5hbGV4X2lkKSkNCiAgICByZXR1cm4oTlVMTCkNCiAgfSkNCiAgDQogIGlmICghaXMubnVsbChhdXRob3JfZGF0YSkpIHsNCiAgICBoX2luZGV4IDwtIGF1dGhvcl9kYXRhJHN1bW1hcnlfc3RhdHMkaF9pbmRleA0KICAgIGkxMF9pbmRleCA8LSBhdXRob3JfZGF0YSRzdW1tYXJ5X3N0YXRzJGkxMF9pbmRleA0KICAgIHdvcmtzX2NvdW50IDwtIGF1dGhvcl9kYXRhJHdvcmtzX2NvdW50DQogICAgY2l0ZWRfYnlfY291bnQgPC0gYXV0aG9yX2RhdGEkY2l0ZWRfYnlfY291bnQNCiAgICByZXR1cm4obGlzdChoX2luZGV4ID0gaF9pbmRleCwgaTEwX2luZGV4ID0gaTEwX2luZGV4LCB3b3Jrc19jb3VudCA9IHdvcmtzX2NvdW50LCBjaXRlZF9ieV9jb3VudCA9IGNpdGVkX2J5X2NvdW50KSkNCiAgfSBlbHNlIHsNCiAgICByZXR1cm4obGlzdChoX2luZGV4ID0gTkEsIGkxMF9pbmRleCA9IE5BLCB3b3Jrc19jb3VudCA9IE5BLCBjaXRlZF9ieV9jb3VudCA9IE5BKSkNCiAgfQ0KfQ0KDQojIExvb3AgZm9yIGVhY2ggc2Nob2xhciANCmZvciAoaSBpbiAxOm5yb3coZGZfZWdvKSkgew0KICBvcGVuYWxleF9pZCA8LSBkZl9lZ28kYXVfaWRbaV0gICMgYXNzdW1pbmcgYXVfaWQgaXMgdGhlIE9wZW5BbGV4IElEIGluIGRmX2Vnbw0KICBtZXRyaWNzIDwtIGdldF9vcGVuYWxleF9tZXRyaWNzKG9wZW5hbGV4X2lkKQ0KICBkZl9lZ28kaF9pbmRleFtpXSA8LSBtZXRyaWNzJGhfaW5kZXgNCiAgZGZfZWdvJGkxMF9pbmRleFtpXSA8LSBtZXRyaWNzJGkxMF9pbmRleA0KICBkZl9lZ28kd29ya3NfY291bnRbaV0gPC0gbWV0cmljcyR3b3Jrc19jb3VudA0KICBkZl9lZ28kY2l0ZWRfYnlfY291bnRbaV0gPC0gbWV0cmljcyRjaXRlZF9ieV9jb3VudA0KfQ0KDQojIFZpZXcgdXBkYXRlZCBkZl9lZ28gd2l0aCBoLWluZGV4IGFuZCBpMTAtaW5kZXgNCnZpZXcoZGZfZWdvW2MoJ2F1X2lkJywnTmFhbScsJ2dlbmRlcicsJ2hfaW5kZXgnLCdpMTBfaW5kZXgnKV0pDQoNCg0KI2NvdmFyaWF0ZSANCiMgaF9pbmRleCA8LSBjb0NvdmFyKGRmX2VnbyRoX2luZGV4KQ0KYGBgDQoNCiMjIEFjdHVhbGx5IGRlZmluZSBkYXRhOg0KDQpgYGB7cn0NCiMgZGVwZW5kZW50Og0KIyBuZXQgPC0gc2llbmFEZXBlbmRlbnQobmV0X3NvY19hcnJheSkNCg0KI2NvdmFyaWF0ZSAxDQojIGdlbmRlciA8LSBjb0NvdmFyKGRmX2VnbyRnZW5kZXIpDQojIGNvdmFyaWF0ZSAyDQojIGhfaW5kZXggPC0gY29Db3ZhcihkZl9lZ28kaF9pbmRleCkNCg0KDQojY29tYmluaW5nIGRhdGE6IHdpc2ggSSBrbmV3IG9mIHRoaXMgc2hpdCBlYXJsaWVyLi4uDQojIG15ZGF0YSA8LSBzaWVuYURhdGFDcmVhdGUobmV0LCBnZW5kZXIpDQpgYGANCg0KIyBDcmVhdGUgZWZmZWN0cyBzdHJ1Y3R1cmUNCg0KYGBge3J9DQojbXllZmYgPC0gZ2V0RWZmZWN0cyhteWRhdGEpDQpgYGANCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("1definedata.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
