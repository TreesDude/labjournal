<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Verooo" />

<meta name="date" content="2024-11-23" />

<title>Draft Result Descriptives</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    My journal
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="testjt.html">Week 1</a>
    </li>
    <li>
      <a href="week2.html">Week 2</a>
    </li>
    <li>
      <a href="Webscraping-Chapter8-tutorial.html">Chapter 8 - Webscraping tutorial</a>
    </li>
    <li>
      <a href="week3RSelenium.html">Week 3 - RSelenium (see Ch.8 tab tho)</a>
    </li>
    <li>
      <a href="networkvis.html">Chapter 9 - Netw. Visualisation tutorial</a>
    </li>
    <li>
      <a href="week5.html">Week 5/Chapter 7 - Analysis pt.1</a>
    </li>
    <li>
      <a href="week5-2.html">!Week 5/Chapter 7 - Analysis pt.2</a>
    </li>
    <li>
      <a href="datapractice1.html">Week 5 - Practice data 1</a>
    </li>
    <li>
      <a href="week6.html">Week 6</a>
    </li>
    <li>
      <a href="weekbacktrack.html">Week Nr. getbackontrack</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    RQs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="RQdraft1.html">1st draft</a>
    </li>
    <li>
      <a href="RQdraft2.html">2nd draft - w Intro &amp; data types</a>
    </li>
    <li>
      <a href="RQdraft3.html">3rd draft</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Project design
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="clarifyRQsandDesign.html">Clarify RQs</a>
    </li>
    <li>
      <a href="plotting1.html">Plotting</a>
    </li>
    <li>
      <a href="revisitwithJochem.html">Check-in with Jochem</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Step-by-step analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="datapreptrynew.html">Data prep</a>
    </li>
    <li>
      <a href="descriptivestry.html">Step 3: initial description</a>
    </li>
    <li>
      <a href="RSienatry.html">Step 4&amp;5: Specify &amp; Estimate model</a>
    </li>
    <li>
      <a href="estimate_M0.html">Test estimate display</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Draft report
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="draftintro.html">Introduction</a>
    </li>
    <li>
      <a href="drafttheory.html">Theory</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Data</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="draftdata.html">Data &amp; Analysis</a>
        </li>
        <li>
          <a href="datapreptrynew.html">Data preparation</a>
        </li>
        <li>
          <a href="descriptivestry.html">Descriptives</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Results</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="draftdesresults.html">Descriptive results</a>
        </li>
        <li>
          <a href="modelestimate.html">Model Estimation</a>
        </li>
        <li>
          <a href="draftGOF.html">Goodness Of Fit</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="draftdiscussion.html">Discussion &amp; Conclusion</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Final report
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="finalintro.html">Introduction</a>
    </li>
    <li>
      <a href="finaltheory.html">Theory</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Data</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="finaldata.html">Data &amp; Analysis</a>
        </li>
        <li>
          <a href="finaldataprep.html">Data Preparation</a>
        </li>
        <li>
          <a href="finaldescriptives.html">Data Descriptives</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Results</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="finaldesresults.html">Descriptive Analysis</a>
        </li>
        <li>
          <a href="finalestimate.html">Model Estimation</a>
        </li>
        <li>
          <a href="finalGOF.html">Goodness Of Fit</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="finaldiscussion.html">Discussion &amp; Conclusion</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JochemTolsma/labjournal">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Draft Result Descriptives</h1>
<h4 class="author">Verooo</h4>
<h4 class="date">2024-11-23</h4>

</div>


<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
My Descriptives
</title>
<p><link rel="stylesheet" href="styles.css">
<!-- Link to the CSS file I created for dark mode code chunks --></p>
</head>
</html>
<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<div id="getting-started" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Getting started</h1>
<pre class="r test"><code>rm(list = ls())</code></pre>
<div id="packages" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Packages</h2>
<pre class="r test"><code>require(tidyverse)
require(RSiena)
require(RsienaTwoStep)

# install.packages(&#39;data.table&#39;)
require(data.table)  # mainly for faster data handling
# install.packages(&#39;xml2&#39;)
require(xml2)
# install.packages(&#39;rvest&#39;)
require(rvest)
require(igraph)
require(ggraph)
require(ggplot2)


# install.packages(&#39;visNetwork&#39;)
require(visNetwork)
# install.packages(&#39;threejs&#39;)
require(threejs)
# install.packages(&#39;networkD3&#39;)
require(networkD3)

require(RColorBrewer)</code></pre>
</div>
<div id="functions" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Functions</h2>
<p>Functions chunk</p>
<pre class="r test"><code>fpackage.check &lt;- function(packages) {
    lapply(packages, FUN = function(x) {
        if (!require(x, character.only = TRUE)) {
            install.packages(x, dependencies = TRUE)
            library(x, character.only = TRUE)
        }
    })
}

fsave &lt;- function(x, file = NULL, location = &quot;./data/processed/&quot;) {
    ifelse(!dir.exists(&quot;data&quot;), dir.create(&quot;data&quot;), FALSE)
    ifelse(!dir.exists(&quot;data/processed&quot;), dir.create(&quot;data/processed&quot;), FALSE)
    if (is.null(file))
        file = deparse(substitute(x))
    datename &lt;- substr(gsub(&quot;[:-]&quot;, &quot;&quot;, Sys.time()), 1, 8)
    totalname &lt;- paste(location, file, &quot;_&quot;, datename, &quot;.rda&quot;, sep = &quot;&quot;)
    save(x, file = totalname)  #need to fix if file is reloaded as input name, not as x. 
}

fload &lt;- function(filename) {
    load(filename)
    get(ls()[ls() != &quot;filename&quot;])
}

fshowdf &lt;- function(x, ...) {
    knitr::kable(x, digits = 2, &quot;html&quot;, ...) %&gt;%
        kableExtra::kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;)) %&gt;%
        kableExtra::scroll_box(width = &quot;100%&quot;, height = &quot;300px&quot;)
}


# this is the most important one. We created it in the previous script

f_pubnets &lt;- function(df_scholars = df, list_publications = publications, discip = &quot;sociology&quot; + &quot;political science&quot;,
    affiliation = &quot;RU&quot;, waves = list(wave1 = c(2018, 2019, 2020), wave2 = c(2021, 2022, 2023))) {

    publications &lt;- list_publications %&gt;%
        bind_rows() %&gt;%
        distinct(title, .keep_all = TRUE)

    df_scholars %&gt;%
        filter(affil1 == affiliation | affil2 == affiliation) %&gt;%
        filter(discipline == discip) -&gt; df_sel

    networklist &lt;- list()
    for (wave in 1:length(waves)) {
        networklist[[wave]] &lt;- matrix(0, nrow = nrow(df_sel), ncol = nrow(df_sel))
    }

    publicationlist &lt;- list()
    for (wave in 1:length(waves)) {
        publicationlist[[wave]] &lt;- publications %&gt;%
            filter(gs_id %in% df_sel$gs_id) %&gt;%
            filter(year %in% waves[[wave]]) %&gt;%
            select(author) %&gt;%
            lapply(str_split, pattern = &quot;,&quot;)
    }

    publicationlist2 &lt;- list()
    for (wave in 1:length(waves)) {
        publicationlist2[[wave]] &lt;- publicationlist[[wave]]$author %&gt;%
            # lowercase
        lapply(tolower) %&gt;%
            # Removing diacritics
        lapply(stri_trans_general, id = &quot;latin-ascii&quot;) %&gt;%
            # only last name
        lapply(word, start = -1, sep = &quot; &quot;) %&gt;%
            # only last last name
        lapply(word, start = -1, sep = &quot;-&quot;)
    }

    for (wave in 1:length(waves)) {
        # let us remove all publications with only one author
        remove &lt;- which(sapply(publicationlist2[[wave]], FUN = function(x) length(x) == 1) == TRUE)
        publicationlist2[[wave]] &lt;- publicationlist2[[wave]][-remove]
    }

    for (wave in 1:length(waves)) {
        pubs &lt;- publicationlist2[[wave]]
        for (ego in 1:nrow(df_sel)) {
            # which ego?
            lastname_ego &lt;- df_sel$lastname[ego]
            # for all publications
            for (pub in 1:length(pubs)) {
                # only continue if ego is author of pub
                if (lastname_ego %in% pubs[[pub]]) {
                  aut_pot &lt;- which.max(pubs[[pub]] %in% lastname_ego)
                  # only continue if ego is first author of pub
                  if (aut_pot == 1) {
                    # check all alters/co-authors
                    for (alter in 1:nrow(df_sel)) {
                      # which alter
                      lastname_alter &lt;- df_sel$lastname[alter]
                      if (lastname_alter %in% pubs[[pub]]) {
                        networklist[[wave]][ego, alter] &lt;- networklist[[wave]][ego, alter] + 1
                      }
                    }
                  }
                }
            }
        }
    }
    return(list(df = df_sel, network = networklist))
}</code></pre>
<p>More functions</p>
<pre class="r test"><code>fcolnet &lt;- function(data = scholars, university = &quot;RU&quot;, discipline = &quot;sociology&quot; + &quot;political science&quot;,
    waves = list(c(2015, 2018), c(2019, 2023)), type = c(&quot;first&quot;)) {

    # step 1
    demographics &lt;- do.call(rbind.data.frame, data$demographics)
    demographics &lt;- demographics %&gt;%
        mutate(Universiteit1.22 = replace(Universiteit1.22, is.na(Universiteit1.22), &quot;&quot;), Universiteit2.22 = replace(Universiteit2.22,
            is.na(Universiteit2.22), &quot;&quot;), Universiteit1.24 = replace(Universiteit1.24, is.na(Universiteit1.24),
            &quot;&quot;), Universiteit2.24 = replace(Universiteit2.24, is.na(Universiteit2.24), &quot;&quot;), discipline.22 = replace(discipline.22,
            is.na(discipline.22), &quot;&quot;), discipline.24 = replace(discipline.24, is.na(discipline.24), &quot;&quot;))

    sample &lt;- which((demographics$Universiteit1.22 %in% university | demographics$Universiteit2.22 %in%
        university | demographics$Universiteit1.24 %in% university | demographics$Universiteit2.24 %in%
        university) &amp; (demographics$discipline.22 %in% discipline | demographics$discipline.24 %in% discipline))

    demographics_soc &lt;- demographics[sample, ]
    scholars_sel &lt;- lapply(scholars, &quot;[&quot;, sample)

    # step 2
    ids &lt;- demographics_soc$au_id
    nwaves &lt;- length(waves)
    nets &lt;- array(0, dim = c(nwaves, length(ids), length(ids)), dimnames = list(wave = 1:nwaves, ids,
        ids))
    dimnames(nets)

    # step 3
    df_works &lt;- tibble(works_id = unlist(lapply(scholars_sel$work, function(l) l$id)), works_author = unlist(lapply(scholars_sel$work,
        function(l) l$author), recursive = FALSE), works_year = unlist(lapply(scholars_sel$work, function(l) l$publication_year),
        recursive = FALSE))

    df_works &lt;- df_works[!duplicated(df_works), ]

    # step 4
    if (type == &quot;first&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- df_works_w$works_author[i][[1]]$au_id[1]
                alters &lt;- df_works_w$works_author[i][[1]]$au_id[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;last&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                ego &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[1]
                alters &lt;- rev(df_works_w$works_author[i][[1]]$au_id)[-1]
                if (sum(ids %in% ego) &gt; 0 &amp; sum(ids %in% alters) &gt; 0) {
                  nets[j, which(ids %in% ego), which(ids %in% alters)] &lt;- 1
                }
            }
        }
    }

    if (type == &quot;all&quot;) {
        for (j in 1:nwaves) {
            df_works_w &lt;- df_works[df_works$works_year &gt;= waves[[j]][1] &amp; df_works$works_year &lt;= waves[[j]][2],
                ]
            for (i in 1:nrow(df_works_w)) {
                egos &lt;- df_works_w$works_author[i][[1]]$au_id
                if (sum(ids %in% egos) &gt; 0) {
                  nets[j, which(ids %in% egos), which(ids %in% egos)] &lt;- 1
                }
            }
        }
    }
    output &lt;- list()
    output$data &lt;- scholars_sel
    output$nets &lt;- nets
    return(output)
}</code></pre>
</div>
<div id="load-data" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Load data</h2>
<p>Scholar data</p>
<pre class="r test"><code>scholars &lt;- fload(&quot;./data/processed/scholars_20240924.rda&quot;)
# make sure to lead fload first of course</code></pre>
<pre class="r test"><code># save the output of your function

test &lt;- fcolnet(data = scholars, university = &quot;RU&quot;, discipline = c(&quot;sociology&quot;, &quot;political science&quot;),
    waves = list(c(2015, 2018), c(2019, 2023)), type = c(&quot;first&quot;))</code></pre>
<p>Ego data</p>
<pre class="r test"><code>df_ego &lt;- fload(&quot;./data/processed/df_ego_20241108.rda&quot;)</code></pre>
<pre class="r test"><code>test_w1 &lt;- igraph::graph_from_adjacency_matrix(
  test$nets[1,,], # first wave of data. 
  # (thus I select the array of networks and take the first matrix)
  mode = c(&quot;directed&quot;),
  weighted = NULL,
  diag = FALSE,
  add.colnames = NULL,
  add.rownames = NULL)</code></pre>
</div>
<div id="network-description" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Network
Description</h2>
<p>The network data we are looking at pertains to 101 scholars and their
publications. In the time frame of the wave at hand, namely form 2015 to
2018, we find 47 edges, with 6 reciprocated collaborations 36 ties that
are asymmetric. Additionally, there were 5009 occasions in which a ties
could have been made but was not. The edge density of 0.004 suggests
that from all possible edges, this sample contains relatively few.</p>
<p>In terms of triad-configurations, pertaining to the different
possibilities three scholars could collaborate, we find that the most
common one is no collaboration at all (configuration ‘003’). Beyond
that, the configuration ‘012’ is also common, meaning that only one
directed edge is present in the triad. In our sample it is also common
for such edge to be reciprocated, as seen in the third-highes-t count of
the triad-configuration ‘102’, a graph with a mutual connection between
two vertices. Overall, the seems to be high number of isolates in the
sample network.</p>
<div id="nr.-of-nodesvertices" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Nr. of
nodes/vertices</h3>
<pre class="r test"><code>vcount(test_w1)</code></pre>
<pre class="test2"><code>#&gt; [1] 101</code></pre>
</div>
<div id="nr.-of-edges" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Nr. of edges</h3>
<pre class="r test"><code>ecount(test_w1)</code></pre>
<pre class="test2"><code>#&gt; [1] 47</code></pre>
</div>
<div id="dyad-census" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Dyad census</h3>
<pre class="r test"><code>igraph::dyad_census(test_w1)</code></pre>
<pre class="test2"><code>#&gt; $mut
#&gt; [1] 6
#&gt; 
#&gt; $asym
#&gt; [1] 35
#&gt; 
#&gt; $null
#&gt; [1] 5009</code></pre>
</div>
<div id="triad-census" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Triad-census</h3>
<pre class="r test"><code>igraph::triad_census(test_w1)</code></pre>
<pre class="test2"><code>#&gt;  [1] 162709   3266    561     19     38     25     17     10      1      0      1      0      1
#&gt; [14]      1      1      0</code></pre>
<!-- 
TRIAD CONFIGURATIONS (16 possible)

o   Three digits [x, x, x]
  First: nr. of reciprocal ties 
  Middle counts: nr of directed ties
  On right: if no ties
o   D, U, C 
  Down 
  Up 
  Cyclical 


1. # 003 A,B,C, the empty graph.

2. # 012 A->B, C, the graph with a single directed edge.

3. # 102 A<->B, C, the graph with a mutual connection between two vertices.

4. # 021D A<-B->C, the out-star.

5. # 021U A->B<-C, the in-star.

6. # 021C A->B->C, directed line.

7. # 111D A<->B<-C.

8. # 111U A<->B->C.

9. #- 030T A->B<-C, A->C.

10.#X 030C A<-B<-C, A->C.

11.#- 201 A<->B<->C.

12.#X 120D A<-B->C, A<->C.

13.#- 120U A->B<-C, A<->C.

14.#- 120C A->B->C, A<->C.

15.#- 210 A->B<->C, A<->C.

16.#X 300 A<->B<->C, A<->C, the complete graph.

-->
</div>
<div id="edge-density" class="section level3" number="1.4.5">
<h3><span class="header-section-number">1.4.5</span> Edge-density</h3>
<pre class="r test"><code># edge density
igraph::edge_density(test_w1)</code></pre>
<pre class="test2"><code>#&gt; [1] 0.004653465</code></pre>
</div>
<div id="more-in-depth" class="section level3" number="1.4.6">
<h3><span class="header-section-number">1.4.6</span> more in depth:</h3>
<!--

#### reciprocity


```{.r .test}
reciprocity(test_w1, ignore.loops = TRUE, mode = c("default", "ratio"))
```

``` test2
#> [1] 0.2553191
```

-->
<div id="degree-centrality" class="section level4" number="1.4.6.1">
<h4><span class="header-section-number">1.4.6.1</span> Degree
centrality</h4>
<p>Degree centrality, often simply called ‘degree’, measures the number
of connections a scholar, or ego, has with other scholars, known as
alters. In the context of our dataset, we distinguish between two types
of degrees: incoming connections (indegrees) and outgoing connections
(outdegrees). Indegrees represent ties directed toward the ego, which in
this case signify instances where the ego is <strong>not</strong> the
primary author of a paper. Conversely, outdegrees represent ties
originating from the ego, indicating collaborations where the ego
assumes the role of the first author.</p>
<pre class="r test"><code># Calculate degree centrality
degree_testw1 &lt;- degree(test_w1)
degree_testw1 &lt;- as.data.frame(degree_testw1)

ggplot(degree_testw1, aes(x = as.numeric(degree_testw1))) +
  geom_histogram(binwidth = 0.9, fill = &quot;#FFFFB3&quot;, color = &quot;black&quot;) +  
  labs(
    title = &quot;Distribution Degrees Wave 1&quot;,
    x = &quot;Distribution of Degrees&quot;,
    y = &quot;Count&quot;
  ) +
  ylim(0, 15) +  # Set y-axis limits 
  theme_minimal(base_family = &quot;Arial&quot;) +  # Minimal, clean base theme
  theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark panel background
    panel.grid.major = element_line(color = &quot;#444444&quot;),  # Subtle grid lines
    panel.grid.minor = element_line(color = &quot;#444444&quot;),
    axis.text = element_text(color = &quot;#f0f0f0&quot;),  # White axis text
    axis.title = element_text(color = &quot;#f0f0f0&quot;, face = &quot;bold&quot;),  # Bold white axis titles
    plot.title = element_text(color = &quot;#f0f0f0&quot;, face = &quot;bold&quot;, hjust = 0.5),  # White centered title
    legend.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark legend background
    legend.text = element_text(color = &quot;#f0f0f0&quot;)  # White legend text
  ) +
  guides(fill = &quot;none&quot;)  # Remove the legend</code></pre>
<p><img src="draft1desresults_files/figure-html/degree-1.png" width="672" /></p>
<!-- ylim was 65 at some point priot due to one higher bar, I wonder what changed since... -->
<p>The indegree distribution is right-skewed. This suggests that only
very few vertices have many infegrees, and that most vertices have a low
number of indegrees.</p>
</div>
<div id="betweenness-centrality" class="section level4"
number="1.4.6.2">
<h4><span class="header-section-number">1.4.6.2</span> Betweenness
Centrality</h4>
<p>(with isolates)</p>
<pre class="r test"><code># Calculate betweenness centrality
betweenness_w1 &lt;- igraph::betweenness(test_w1, directed = TRUE)
betweenness_w1 &lt;- as.data.frame(betweenness_w1)


ggplot(betweenness_w1, aes(as.numeric(betweenness_w1), colour = as.numeric(betweenness_w1))) +
  geom_histogram(binwidth = 1.2, fill = &quot;#FFFFB3&quot;) +
  labs(
    title = &quot;Distribution Betweenness Wave 1&quot;,
    x = &quot;Distribution of Betweenness&quot;,
    y = &quot;Count&quot;) +
   theme_minimal(base_family = &quot;Arial&quot;) +  # Minimal, clean base theme
  theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark panel background
    panel.grid.major = element_line(color = &quot;#444444&quot;),  # Subtle grid lines
    panel.grid.minor = element_line(color = &quot;#444444&quot;),
    axis.text = element_text(color = &quot;#f0f0f0&quot;),  # White axis text
    axis.title = element_text(color = &quot;#f0f0f0&quot;, face = &quot;bold&quot;),  # Bold white axis titles
    plot.title = element_text(color = &quot;#f0f0f0&quot;, face = &quot;bold&quot;, hjust = 0.5),  # White centered title
    legend.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark legend background
    legend.text = element_text(color = &quot;#f0f0f0&quot;)  # White legend text
  ) +
  guides(fill = guide_legend(title = &quot;Betweenness (rounded)&quot;))  # Customize legend</code></pre>
<p><img src="draft1desresults_files/figure-html/betweenness-1.png" width="672" /></p>
</div>
<div id="clustering" class="section level4" number="1.4.6.3">
<h4><span class="header-section-number">1.4.6.3</span> Clustering</h4>
<pre class="r test"><code># Clustering the wave 
clustering_w1 &lt;- igraph::transitivity(test_w1, type = &quot;local&quot;)
clustering_w1 &lt;- as.data.frame(clustering_w1)

# Generate the dark mode plot with a single color fill
ggplot(clustering_w1, aes(x = as.numeric(clustering_w1))) +
   geom_histogram(binwidth = 0.05, fill = &quot;#FFFFB3&quot;, color = &quot;black&quot;, position = &quot;dodge&quot;) +  
  labs(
    title = &quot;Distribution Clustering Wave 1&quot;,
    x = &quot;Distribution of Clustering&quot;,
    y = &quot;Count&quot;
  ) +
  theme_minimal(base_family = &quot;Arial&quot;) +  # Clean, minimal base theme
  theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark panel background
    panel.grid.major = element_line(color = &quot;#444444&quot;),  # Subtle grid lines
    panel.grid.minor = element_line(color = &quot;#444444&quot;),
    axis.text = element_text(color = &quot;#f0f0f0&quot;),  # White axis text
    axis.title = element_text(color = &quot;#f0f0f0&quot;, face = &quot;bold&quot;),  # Bold white axis titles
    plot.title = element_text(color = &quot;#f0f0f0&quot;, face = &quot;bold&quot;, hjust = 0.5),  # White centered title
    legend.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark legend background
    legend.text = element_text(color = &quot;#f0f0f0&quot;)  # White legend text
  ) + guides(fill = &quot;none&quot;)  # Remove the legend (since all bars are the same color)</code></pre>
<p><img src="draft1desresults_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
</div>
</div>
</div>
<div id="network-level-descriptives" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Network-level
descriptives</h1>
<div id="x.-average-path-length" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> x. Average path
length</h2>
<pre class="r test"><code>mean((ego_size(test_w1, order = 2, mode = &quot;out&quot;) - 1)/vcount(test_w1))</code></pre>
<pre class="test2"><code>#&gt; [1] 0.01019508</code></pre>
</div>
<div id="still-do-segregation---mortons-i---also-graphs-below"
class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> STILL DO! Segregation
- Mortons I - also graphs below</h2>
<p><strong>STILL DO!</strong></p>
</div>
</div>
<div id="plotting" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Plotting:</h1>
<div id="plots-with-isolates" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Plots WITH
isolates</h2>
<p>###Gender #### whole network</p>
<pre class="r test"><code>plot(test_w1,
     vertex.color = ifelse(df_ego$gender == 1, &quot;#FFED6F&quot;, &quot;#80B1D3&quot;), # now, I can use actor attributes for plotting.
# here: if gender = 1 (aka man) then red dot, if not then blue 
  vertex.label = NA,
  vertex.size = 7.5,
  edge.width = 0.5,
  edge.arrow.size = 0.1,
  main = &quot;Network with isolates [yellow = female, blue = male]&quot;,)</code></pre>
<p><img src="draft1desresults_files/figure-html/plot%20gender-1.png" width="672" /></p>
<div id="per-department" class="section level4" number="3.1.0.1">
<h4><span class="header-section-number">3.1.0.1</span> per
department</h4>
<pre class="r test"><code>indegr_w1 &lt;- degree(test_w1, mode = &quot;in&quot;)

# assign gender to scholar
V(test_w1)$gender &lt;- df_ego$gender

# assign discipline to scholar
V(test_w1)$discipline &lt;- df_ego$discipline.24


V(test_w1)$indegree &lt;- indegr_w1


p_gender &lt;- ggraph(test_w1, layout = &quot;fr&quot;) + geom_edge_link(end_cap = circle(4, &#39;mm&#39;),color = &quot;#D9D9D9&quot;, width = 0.7, arrow = arrow(length = unit(2, &quot;mm&quot;), type = &quot;closed&quot;)) + geom_node_point(aes(size = indegree,
    color = as.factor(discipline), shape = as.factor(gender))) + scale_size(range = c(3, 10)) + theme_void() +  theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),
    text = element_text(color = &quot;#f0f0f0&quot;)  # White text
  )


p_gender + labs(title = &quot;Departments with isolates&quot;, subtitle = &quot;Plot of indegree and gender&quot;, caption = &quot;Gender: 0 = female, 1 = male.\n Data refer to scholars from Radboud University.&quot;) +
    theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;, color = &quot;#f0f0f0&quot;), plot.subtitle = element_text(hjust = 0.5, color = &quot;#f0f0f0&quot;), plot.caption = element_text(hjust = 1, color = &quot;#f0f0f0&quot;))</code></pre>
<p><img src="draft1desresults_files/figure-html/with%20iso%20gender%20per%20dep%20old%20code-1.png" width="672" /></p>
</div>
<div id="h-index" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> H-Index</h3>
<div id="whole-network" class="section level4" number="3.1.1.1">
<h4><span class="header-section-number">3.1.1.1</span> whole
network</h4>
<pre class="r test"><code>indegr_w1 &lt;- degree(test_w1, mode = &quot;in&quot;)

# assign h-index to scholar
V(test_w1)$h_index &lt;- df_ego$h_index
V(test_w1)$indegree &lt;- indegr_w1

# set size of plot
options(repr.plot.width = 15, repr.plot.height = 18)

# plot wave 1 with isolates
p_iso &lt;- ggraph(test_w1, layout = &quot;fr&quot;) + geom_edge_link(end_cap = circle(4, &#39;mm&#39;),color = &quot;#D9D9D9&quot;, width = 0.3, arrow = arrow(length = unit(1, &quot;mm&quot;), type = &quot;closed&quot;)) + geom_node_point(aes(size = indegree,
    color = h_index)) + scale_size(range = c(3, 10)) +
  scale_color_gradient(low = &quot;#F6222E&quot;, high = &quot;#3283FE&quot;) +  # Retain original gradient
  theme_void() +
  theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),
    text = element_text(color = &quot;#f0f0f0&quot;)  # White text
    )

p_iso + labs(title = &quot;Network with isolates&quot;, subtitle = &quot;Plot of indegree and H-index&quot;, caption = &quot;Data refer to: Scholars RU sociology and political science departments&quot;) +
    theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;), plot.subtitle = element_text(hjust = 0.5),
        plot.caption = element_text(hjust = 1))</code></pre>
<p><img src="draft1desresults_files/figure-html/h%20ind%20with%20iso%20old%20code-1.png" width="672" /></p>
</div>
</div>
<div id="h-index-and-gender" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> H-Index and
Gender</h3>
<div id="whole-network-1" class="section level4" number="3.1.2.1">
<h4><span class="header-section-number">3.1.2.1</span> whole
network</h4>
<pre class="r test"><code>indegr_w1 &lt;- degree(test_w1, mode = &quot;in&quot;)

#assign gender to scholar 
V(test_w1)$gender &lt;- df_ego$gender
# V(test_w1)$gender &lt;- ifelse(df_ego$gender &gt;= 0.5,1,0)

# assign h-index to scholar
V(test_w1)$h_index &lt;- df_ego$h_index
V(test_w1)$indegree &lt;- indegr_w1


p_gender &lt;- ggraph(test_w1,
  layout = &quot;fr&quot;) +
  geom_edge_link(end_cap = circle(4, &#39;mm&#39;),color = &quot;#D9D9D9&quot;, width = 0.3, arrow = arrow(length = unit(1, &quot;mm&quot;), type = &quot;closed&quot;)) +  # Darker edge color
  geom_node_point(aes(size = indegree, color = h_index, shape = as.factor(gender))) +   
  scale_size(range = c(3, 10)) + 
  scale_color_gradient(low = &quot;#F6222E&quot;, high = &quot;#3283FE&quot;) +  # Retain original gradient
  theme_void() +
  theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),
    text = element_text(color = &quot;#f0f0f0&quot;)  # White text
  )

p_gender + 
  labs(title = &quot;Network with isolates&quot;,
    subtitle = &quot;Plot of indegree, H-index and gender&quot;,
    caption = &quot;Gender: 0 = female, 1 = male.\nData refer to: Scholars RU sociology and political science departments.&quot;) +
  theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;, color = &quot;#f0f0f0&quot;), plot.subtitle = element_text(hjust = 0.5, color = &quot;#f0f0f0&quot;), plot.caption = element_text(hjust = 1, color = &quot;#f0f0f0&quot;))</code></pre>
<p><img src="draft1desresults_files/figure-html/dark%20g&h%20with%20iso-1.png" width="672" /></p>
<hr />
</div>
</div>
</div>
<div id="plots-without-isolates" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Plots WITHOUT
isolates</h2>
<p>The isolates of the network have been removed to allow for a better
readability of the graphs. Only vertices with edges remain part of the
visualizations. In other words, only scholars with collaborations are
seen in the following graphs.</p>
<pre class="r test"><code>indegr_w1 &lt;- igraph::degree(test_w1, mode = &quot;in&quot;)

isolates_w1 &lt;- V(test_w1)[degree(test_w1, mode = &quot;all&quot;) == 0]

noisolates_w1 &lt;- delete_vertices(test_w1, isolates_w1)

gsize(noisolates_w1)  # edges</code></pre>
<pre class="test2"><code>#&gt; [1] 47</code></pre>
<pre class="r test"><code>gorder(noisolates_w1)  # vertices </code></pre>
<pre class="test2"><code>#&gt; [1] 33</code></pre>
<div id="gender" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Gender</h3>
<div id="descip-whole-network" class="section level4" number="3.2.1.1">
<h4><span class="header-section-number">3.2.1.1</span> DESCIP&lt;&gt;
whole network</h4>
<pre class="r test"><code>plot(noisolates_w1,
  vertex.color = ifelse(df_ego$gender == 1, &quot;#80B1D3&quot;, &quot;#FFED6F&quot;), # now, I can use actor attributes for plotting.
  # here: if gender = 1 (aka man) then red dot, if not then blue 
  vertex.label = NA,
  vertex.size = 9,
  vertex.frame.color = &quot;black&quot;,
  edge.curved = 0.1,
  edge.arrow.size = 0.5,
  edge.color = &quot;#999999&quot;,
  edge.width = 0.5,
  main = &quot;Network without isolates [yellow = female, blue = male]&quot;,
  asp=0)</code></pre>
<p><img src="draft1desresults_files/figure-html/plot%20wo%20isolates-1.png" width="672" />
#### RESULTS &lt;&gt; indegree &amp; department</p>
<pre class="r test"><code># assign gender to scholar
V(test_w1)$gender &lt;- df_ego$gender

# assign disciplines to scholars
V(test_w1)$discipline &lt;- df_ego$discipline.24
V(test_w1)$indegree &lt;- indegr_w1


# remove isolates
noisolates_w1 &lt;- delete_vertices(test_w1, V(test_w1)[degree(test_w1) == 0])

p_noisgender &lt;- ggraph(noisolates_w1, layout = &quot;fr&quot;) + geom_edge_link(end_cap = circle(4, &#39;mm&#39;),color = &quot;#D9D9D9&quot;, width = 0.7, arrow = arrow(length = unit(2, &quot;mm&quot;)), type = &quot;closed&quot;) +
    geom_node_point(aes(size = indegree, color = as.factor(discipline), shape = as.factor(gender))) +
    scale_size(range = c(3, 10)) + theme_void() +   theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),
    text = element_text(color = &quot;#f0f0f0&quot;)  # White text
  )

p_noisgender + labs(title = &quot;Departments without isolates&quot;, subtitle = &quot;Plot of indegree and gender&quot;,
    caption = &quot;Gender: 0 = female, 1 = male.\n Data refer to scholars from Radboud University.&quot;) + theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;, color = &quot;#f0f0f0&quot;), plot.subtitle = element_text(hjust = 0.5, color = &quot;#f0f0f0&quot;), plot.caption = element_text(hjust = 1, color = &quot;#f0f0f0&quot;))</code></pre>
<p><img src="draft1desresults_files/figure-html/without%20iso%20gender%20per%20dep%20old%20code-1.png" width="672" /></p>
</div>
</div>
<div id="h-index-1" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> H-index</h3>
<div id="results-whole-network-indegree" class="section level4"
number="3.2.2.1">
<h4><span class="header-section-number">3.2.2.1</span> RESULTS&lt;&gt;
Whole network (indegree)</h4>
<pre class="r test"><code>indegr_w1 &lt;- degree(test_w1, mode = &quot;in&quot;)

# assign h-index to scholar
V(test_w1)$h_index &lt;- df_ego$h_index
V(test_w1)$indegree &lt;- indegr_w1

# remove isolates
noisolates_w1 &lt;- delete_vertices(test_w1, V(test_w1)[degree(test_w1) == 0])

# set size of plot
options(repr.plot.width = 15, repr.plot.height = 15)

# plot wave 1 without isolates
p_noiso &lt;- ggraph(noisolates_w1, layout = &quot;fr&quot;) + geom_edge_link(end_cap = circle(3, &#39;mm&#39;),color = &quot;#D9D9D9&quot;, width = 0.7, arrow = arrow(length = unit(2, &quot;mm&quot;), type = &quot;closed&quot;)) + geom_node_point(aes(size = indegree,
    color = h_index)) + scale_size(range = c(3, 10)) + scale_color_gradient(low = &quot;red&quot;, high = &quot;blue&quot;) +
    theme_void() +   theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),
    text = element_text(color = &quot;#f0f0f0&quot;)  # White text
  )


p_noiso + labs(title = &quot;Network without isolates&quot;, subtitle = &quot;Plot of indegree and H-index&quot;, caption = &quot;Data refer to: Scholars RU sociology and political science departments&quot;) +
    theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;, color = &quot;#f0f0f0&quot;), plot.subtitle = element_text(hjust = 0.5, color = &quot;#f0f0f0&quot;), plot.caption = element_text(hjust = 1, color = &quot;#f0f0f0&quot;))</code></pre>
<p><img src="draft1desresults_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="per-department-1" class="section level4" number="3.2.2.2">
<h4><span class="header-section-number">3.2.2.2</span> per
department</h4>
<pre class="r test"><code>indegr_w1 &lt;- degree(test_w1, mode = &quot;in&quot;)

# assign h-index to scholar
V(test_w1)$h_index &lt;- df_ego$h_index
# assign discipline to scholar
V(test_w1)$discipline &lt;- df_ego$discipline.24

V(test_w1)$indegree &lt;- indegr_w1

# remove isolates
noisolates_w1 &lt;- delete_vertices(test_w1, V(test_w1)[degree(test_w1) == 0])

# set size of plot
options(repr.plot.width = 15, repr.plot.height = 15)

# plot wave 1 without isolates
p_noiso &lt;- ggraph(noisolates_w1, layout = &quot;fr&quot;) + geom_edge_link(end_cap = circle(4, &#39;mm&#39;),color = &quot;#D9D9D9&quot;, width = 0.7, arrow = arrow(length = unit(2, &quot;mm&quot;), type = &quot;closed&quot;)) + geom_node_point(aes(size = indegree,
    color = h_index, shape = as.factor(discipline))) + scale_size(range = c(3, 10)) + scale_color_gradient(low = &quot;red&quot;,
    high = &quot;blue&quot;) + theme_void() +   theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),
    text = element_text(color = &quot;#f0f0f0&quot;)  # White text
  )


p_noiso + labs(title = &quot;Departments without isolates&quot;, subtitle = &quot;Plot of indegree and H-index&quot;, caption = &quot;Data refer to scholars from Radboud University.&quot;) +
    theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;, color = &quot;#f0f0f0&quot;), plot.subtitle = element_text(hjust = 0.5, color = &quot;#f0f0f0&quot;), plot.caption = element_text(hjust = 1, color = &quot;#f0f0f0&quot;))</code></pre>
<p><img src="draft1desresults_files/figure-html/hind%20without%20iso%20old%20code-1.png" width="672" /></p>
</div>
</div>
<div id="results-h-index-and-gender-indegree" class="section level3"
number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> RESULTS &lt;&gt;
H-index AND Gender (indegree)</h3>
<pre class="r test"><code>#assign gender to scholar 
V(test_w1)$gender &lt;- df_ego$gender

# assign h-index to scholar
V(test_w1)$h_index &lt;- df_ego$h_index
V(test_w1)$indegree &lt;- indegr_w1


#remove isolates
noisolates_w1 &lt;- delete_vertices(test_w1, V(test_w1)[degree(test_w1) == 0])

p_noisogender &lt;- ggraph(noisolates_w1,
  layout = &quot;fr&quot;) +
  geom_edge_link(end_cap = circle(3, &#39;mm&#39;),color = &quot;#D9D9D9&quot;, width = 0.7, arrow = arrow(length = unit(1.75, &quot;mm&quot;), type = &quot;closed&quot;)) +  # Darker edge color
  geom_node_point(aes(size = indegree, color = h_index, shape = as.factor(gender))) +   
  scale_size(range = c(3, 10)) + 
  scale_color_gradient(low = &quot;#F6222E&quot;, high = &quot;#3283FE&quot;) +  # Retain original gradient
  theme_void() +
  theme(
    plot.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),  # Dark background
    panel.background = element_rect(fill = &quot;#2d2d2d&quot;, color = NA),
    text = element_text(color = &quot;#f0f0f0&quot;)  # White text
  )

p_noisogender + labs(title = &quot;Network without isolates&quot;,
        subtitle = &quot;Plot of indegree, H-index and gender&quot;,
        caption = &quot;Gender: 0 = female, 1 = male.\n Data refer to: Scholars RU sociology and political science departments.&quot;) +   
  theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;, color = &quot;#f0f0f0&quot;), plot.subtitle = element_text(hjust = 0.5, color = &quot;#f0f0f0&quot;), plot.caption = element_text(hjust = 1, color = &quot;#f0f0f0&quot;))</code></pre>
<p><img src="draft1desresults_files/figure-html/dark%20g&h%20without%20iso-1.png" width="672" /></p>
</div>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkRyYWZ0IFJlc3VsdCBEZXNjcmlwdGl2ZXMiDQphdXRob3I6ICJWZXJvb28iDQpkYXRlOiAiMjAyNC0xMS0yMyINCm91dHB1dDogaHRtbF9kb2N1bWVudA0KYmlibGlvZ3JhcGh5OiByZWZlcmVuY2VzLmJpYg0KY3NsOiBhcGEuY3NsDQotLS0NCg0KPGh0bWwgbGFuZz0iZW4iPg0KDQo8aGVhZD4NCg0KPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KDQo8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQoNCjx0aXRsZT5NeSBEZXNjcmlwdGl2ZXM8L3RpdGxlPg0KDQo8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9InN0eWxlcy5jc3MiPiA8IS0tIExpbmsgdG8gdGhlIENTUyBmaWxlIEkgY3JlYXRlZCBmb3IgZGFyayBtb2RlIGNvZGUgY2h1bmtzIC0tPg0KDQo8L2hlYWQ+DQoNCjwvaHRtbD4NCg0KYGBge3IgZ2xvYmFsc2V0dGluZ3MsIGVjaG89RkFMU0UsIHdhcm5pbmc9RkFMU0UsIHJlc3VsdHM9J2hpZGUnfQ0KbGlicmFyeShrbml0cikNCg0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVjaG8gPSBUUlVFKQ0Kb3B0c19jaHVuayRzZXQodGlkeS5vcHRzPWxpc3Qod2lkdGguY3V0b2ZmPTEwMCksdGlkeT1UUlVFLCB3YXJuaW5nID0gRkFMU0UsIG1lc3NhZ2UgPSBGQUxTRSxjb21tZW50ID0gIiM+IiwgY2FjaGU9VFJVRSwgY2xhc3Muc291cmNlPWMoInRlc3QiKSwgY2xhc3Mub3V0cHV0PWMoInRlc3QyIikpDQpvcHRpb25zKHdpZHRoID0gMTAwKQ0KcmdsOjpzZXR1cEtuaXRyKCkNCg0KY29sb3JpemUgPC0gZnVuY3Rpb24oeCwgY29sb3IpIHtzcHJpbnRmKCI8c3BhbiBzdHlsZT0nY29sb3I6ICVzOyc+JXM8L3NwYW4+IiwgY29sb3IsIHgpIH0NCg0KYGBgDQoNCmBgYHtyIGtsaXBweSwgZWNobz1GQUxTRSwgaW5jbHVkZT1UUlVFfQ0Ka2xpcHB5OjprbGlwcHkocG9zaXRpb24gPSBjKCd0b3AnLCAncmlnaHQnKSkNCiNrbGlwcHk6OmtsaXBweShjb2xvciA9ICdkYXJrcmVkJykNCiNrbGlwcHk6OmtsaXBweSh0b29sdGlwX21lc3NhZ2UgPSAnQ2xpY2sgdG8gY29weScsIHRvb2x0aXBfc3VjY2VzcyA9ICdEb25lJykNCmBgYA0KDQpgYGB7ciBzZXR1cCwgaW5jbHVkZT1GQUxTRX0NCmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSkNCg0KYGBgDQoNCg0KIyBHZXR0aW5nIHN0YXJ0ZWQNCg0KYGBge3IgY2xlYW59DQpybShsaXN0ID0gbHMoKSkNCmBgYA0KDQojIyBQYWNrYWdlcw0KDQpgYGB7ciBwYWNrYWdlLCBoaWRlPVRSVUV9DQpyZXF1aXJlKHRpZHl2ZXJzZSkNCnJlcXVpcmUoUlNpZW5hKQ0KcmVxdWlyZShSc2llbmFUd29TdGVwKQ0KDQojaW5zdGFsbC5wYWNrYWdlcygiZGF0YS50YWJsZSIpDQpyZXF1aXJlKGRhdGEudGFibGUpICAjIG1haW5seSBmb3IgZmFzdGVyIGRhdGEgaGFuZGxpbmcNCiMgaW5zdGFsbC5wYWNrYWdlcygneG1sMicpDQpyZXF1aXJlKHhtbDIpDQojIGluc3RhbGwucGFja2FnZXMoJ3J2ZXN0JykNCnJlcXVpcmUocnZlc3QpDQpyZXF1aXJlKGlncmFwaCkNCnJlcXVpcmUoZ2dyYXBoKQ0KcmVxdWlyZShnZ3Bsb3QyKQ0KDQoNCiNpbnN0YWxsLnBhY2thZ2VzKCd2aXNOZXR3b3JrJykNCnJlcXVpcmUodmlzTmV0d29yaykNCiNpbnN0YWxsLnBhY2thZ2VzKCd0aHJlZWpzJykNCnJlcXVpcmUodGhyZWVqcykNCiNpbnN0YWxsLnBhY2thZ2VzKCduZXR3b3JrRDMnKQ0KcmVxdWlyZShuZXR3b3JrRDMpDQoNCnJlcXVpcmUoUkNvbG9yQnJld2VyKQ0KDQoNCmBgYA0KDQojIyBGdW5jdGlvbnMNCg0KRnVuY3Rpb25zIGNodW5rDQoNCmBgYHtyIGZ1bmN0aW9ucyAxLCBoaWRlID1UUlVFfQ0KZnBhY2thZ2UuY2hlY2sgPC0gZnVuY3Rpb24ocGFja2FnZXMpIHsNCiAgICBsYXBwbHkocGFja2FnZXMsIEZVTiA9IGZ1bmN0aW9uKHgpIHsNCiAgICAgICAgaWYgKCFyZXF1aXJlKHgsIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSkpIHsNCiAgICAgICAgICAgIGluc3RhbGwucGFja2FnZXMoeCwgZGVwZW5kZW5jaWVzID0gVFJVRSkNCiAgICAgICAgICAgIGxpYnJhcnkoeCwgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKQ0KICAgICAgICB9DQogICAgfSkNCn0NCg0KZnNhdmUgPC0gZnVuY3Rpb24oeCwgZmlsZSA9IE5VTEwsIGxvY2F0aW9uID0gIi4vZGF0YS9wcm9jZXNzZWQvIikgew0KICAgIGlmZWxzZSghZGlyLmV4aXN0cygiZGF0YSIpLCBkaXIuY3JlYXRlKCJkYXRhIiksIEZBTFNFKQ0KICAgIGlmZWxzZSghZGlyLmV4aXN0cygiZGF0YS9wcm9jZXNzZWQiKSwgZGlyLmNyZWF0ZSgiZGF0YS9wcm9jZXNzZWQiKSwgRkFMU0UpDQogICAgaWYgKGlzLm51bGwoZmlsZSkpDQogICAgICAgIGZpbGUgPSBkZXBhcnNlKHN1YnN0aXR1dGUoeCkpDQogICAgZGF0ZW5hbWUgPC0gc3Vic3RyKGdzdWIoIls6LV0iLCAiIiwgU3lzLnRpbWUoKSksIDEsIDgpDQogICAgdG90YWxuYW1lIDwtIHBhc3RlKGxvY2F0aW9uLCBmaWxlLCAiXyIsIGRhdGVuYW1lLCAiLnJkYSIsIHNlcCA9ICIiKQ0KICAgIHNhdmUoeCwgZmlsZSA9IHRvdGFsbmFtZSkgICNuZWVkIHRvIGZpeCBpZiBmaWxlIGlzIHJlbG9hZGVkIGFzIGlucHV0IG5hbWUsIG5vdCBhcyB4LiANCn0NCg0KZmxvYWQgPC0gZnVuY3Rpb24oZmlsZW5hbWUpIHsNCiAgICBsb2FkKGZpbGVuYW1lKQ0KICAgIGdldChscygpW2xzKCkgIT0gImZpbGVuYW1lIl0pDQp9DQoNCmZzaG93ZGYgPC0gZnVuY3Rpb24oeCwgLi4uKSB7DQogICAga25pdHI6OmthYmxlKHgsIGRpZ2l0cyA9IDIsICJodG1sIiwgLi4uKSAlPiUNCiAgICAgICAga2FibGVFeHRyYTo6a2FibGVfc3R5bGluZyhib290c3RyYXBfb3B0aW9ucyA9IGMoInN0cmlwZWQiLCAiaG92ZXIiKSkgJT4lDQogICAgICAgIGthYmxlRXh0cmE6OnNjcm9sbF9ib3god2lkdGggPSAiMTAwJSIsIGhlaWdodCA9ICIzMDBweCIpDQp9DQoNCg0KIyB0aGlzIGlzIHRoZSBtb3N0IGltcG9ydGFudCBvbmUuIFdlIGNyZWF0ZWQgaXQgaW4gdGhlIHByZXZpb3VzIHNjcmlwdA0KDQpmX3B1Ym5ldHMgPC0gZnVuY3Rpb24oZGZfc2Nob2xhcnMgPSBkZiwgbGlzdF9wdWJsaWNhdGlvbnMgPSBwdWJsaWNhdGlvbnMsIGRpc2NpcCA9ICJzb2Npb2xvZ3kiKyJwb2xpdGljYWwgc2NpZW5jZSIsIGFmZmlsaWF0aW9uID0gIlJVIiwNCiAgICB3YXZlcyA9IGxpc3Qod2F2ZTEgPSBjKDIwMTgsIDIwMTksIDIwMjApLCB3YXZlMiA9IGMoMjAyMSwgMjAyMiwgMjAyMykpKSB7DQoNCiAgICBwdWJsaWNhdGlvbnMgPC0gbGlzdF9wdWJsaWNhdGlvbnMgJT4lDQogICAgICAgIGJpbmRfcm93cygpICU+JQ0KICAgICAgICBkaXN0aW5jdCh0aXRsZSwgLmtlZXBfYWxsID0gVFJVRSkNCg0KICAgIGRmX3NjaG9sYXJzICU+JQ0KICAgICAgICBmaWx0ZXIoYWZmaWwxID09IGFmZmlsaWF0aW9uIHwgYWZmaWwyID09IGFmZmlsaWF0aW9uKSAlPiUNCiAgICAgICAgZmlsdGVyKGRpc2NpcGxpbmUgPT0gZGlzY2lwKSAtPiBkZl9zZWwNCg0KICAgIG5ldHdvcmtsaXN0IDwtIGxpc3QoKQ0KICAgIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsNCiAgICAgICAgbmV0d29ya2xpc3RbW3dhdmVdXSA8LSBtYXRyaXgoMCwgbnJvdyA9IG5yb3coZGZfc2VsKSwgbmNvbCA9IG5yb3coZGZfc2VsKSkNCiAgICB9DQoNCiAgICBwdWJsaWNhdGlvbmxpc3QgPC0gbGlzdCgpDQogICAgZm9yICh3YXZlIGluIDE6bGVuZ3RoKHdhdmVzKSkgew0KICAgICAgICBwdWJsaWNhdGlvbmxpc3RbW3dhdmVdXSA8LSBwdWJsaWNhdGlvbnMgJT4lDQogICAgICAgICAgICBmaWx0ZXIoZ3NfaWQgJWluJSBkZl9zZWwkZ3NfaWQpICU+JQ0KICAgICAgICAgICAgZmlsdGVyKHllYXIgJWluJSB3YXZlc1tbd2F2ZV1dKSAlPiUNCiAgICAgICAgICAgIHNlbGVjdChhdXRob3IpICU+JQ0KICAgICAgICAgICAgbGFwcGx5KHN0cl9zcGxpdCwgcGF0dGVybiA9ICIsIikNCiAgICB9DQoNCiAgICBwdWJsaWNhdGlvbmxpc3QyIDwtIGxpc3QoKQ0KICAgIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsNCiAgICAgICAgcHVibGljYXRpb25saXN0Mltbd2F2ZV1dIDwtIHB1YmxpY2F0aW9ubGlzdFtbd2F2ZV1dJGF1dGhvciAlPiUNCiAgICAgICAgICAgICMgbG93ZXJjYXNlDQogICAgICAgIGxhcHBseSh0b2xvd2VyKSAlPiUNCiAgICAgICAgICAgICMgUmVtb3ZpbmcgZGlhY3JpdGljcw0KICAgICAgICBsYXBwbHkoc3RyaV90cmFuc19nZW5lcmFsLCBpZCA9ICJsYXRpbi1hc2NpaSIpICU+JQ0KICAgICAgICAgICAgIyBvbmx5IGxhc3QgbmFtZQ0KICAgICAgICBsYXBwbHkod29yZCwgc3RhcnQgPSAtMSwgc2VwID0gIiAiKSAlPiUNCiAgICAgICAgICAgICMgb25seSBsYXN0IGxhc3QgbmFtZQ0KICAgICAgICBsYXBwbHkod29yZCwgc3RhcnQgPSAtMSwgc2VwID0gIi0iKQ0KICAgIH0NCg0KICAgIGZvciAod2F2ZSBpbiAxOmxlbmd0aCh3YXZlcykpIHsNCiAgICAgICAgIyBsZXQgdXMgcmVtb3ZlIGFsbCBwdWJsaWNhdGlvbnMgd2l0aCBvbmx5IG9uZSBhdXRob3INCiAgICAgICAgcmVtb3ZlIDwtIHdoaWNoKHNhcHBseShwdWJsaWNhdGlvbmxpc3QyW1t3YXZlXV0sIEZVTiA9IGZ1bmN0aW9uKHgpIGxlbmd0aCh4KSA9PSAxKSA9PSBUUlVFKQ0KICAgICAgICBwdWJsaWNhdGlvbmxpc3QyW1t3YXZlXV0gPC0gcHVibGljYXRpb25saXN0Mltbd2F2ZV1dWy1yZW1vdmVdDQogICAgfQ0KDQogICAgZm9yICh3YXZlIGluIDE6bGVuZ3RoKHdhdmVzKSkgew0KICAgICAgICBwdWJzIDwtIHB1YmxpY2F0aW9ubGlzdDJbW3dhdmVdXQ0KICAgICAgICBmb3IgKGVnbyBpbiAxOm5yb3coZGZfc2VsKSkgew0KICAgICAgICAgICAgIyB3aGljaCBlZ28/DQogICAgICAgICAgICBsYXN0bmFtZV9lZ28gPC0gZGZfc2VsJGxhc3RuYW1lW2Vnb10NCiAgICAgICAgICAgICMgZm9yIGFsbCBwdWJsaWNhdGlvbnMNCiAgICAgICAgICAgIGZvciAocHViIGluIDE6bGVuZ3RoKHB1YnMpKSB7DQogICAgICAgICAgICAgICAgIyBvbmx5IGNvbnRpbnVlIGlmIGVnbyBpcyBhdXRob3Igb2YgcHViDQogICAgICAgICAgICAgICAgaWYgKGxhc3RuYW1lX2VnbyAlaW4lIHB1YnNbW3B1Yl1dKSB7DQogICAgICAgICAgICAgICAgICBhdXRfcG90IDwtIHdoaWNoLm1heChwdWJzW1twdWJdXSAlaW4lIGxhc3RuYW1lX2VnbykNCiAgICAgICAgICAgICAgICAgICMgb25seSBjb250aW51ZSBpZiBlZ28gaXMgZmlyc3QgYXV0aG9yIG9mIHB1Yg0KICAgICAgICAgICAgICAgICAgaWYgKGF1dF9wb3QgPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAjIGNoZWNrIGFsbCBhbHRlcnMvY28tYXV0aG9ycw0KICAgICAgICAgICAgICAgICAgICBmb3IgKGFsdGVyIGluIDE6bnJvdyhkZl9zZWwpKSB7DQogICAgICAgICAgICAgICAgICAgICAgIyB3aGljaCBhbHRlcg0KICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lX2FsdGVyIDwtIGRmX3NlbCRsYXN0bmFtZVthbHRlcl0NCiAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdG5hbWVfYWx0ZXIgJWluJSBwdWJzW1twdWJdXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya2xpc3RbW3dhdmVdXVtlZ28sIGFsdGVyXSA8LSBuZXR3b3JrbGlzdFtbd2F2ZV1dW2VnbywgYWx0ZXJdICsgMQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4obGlzdChkZiA9IGRmX3NlbCwgbmV0d29yayA9IG5ldHdvcmtsaXN0KSkNCn0NCg0KYGBgDQoNCk1vcmUgZnVuY3Rpb25zDQoNCmBgYHtyIGZ1bmN0aW9ucyAyLCBoaWRlPVRSVUV9DQpmY29sbmV0IDwtIGZ1bmN0aW9uKGRhdGEgPSBzY2hvbGFycywgdW5pdmVyc2l0eSA9ICJSVSIsIGRpc2NpcGxpbmUgPSAic29jaW9sb2d5IisicG9saXRpY2FsIHNjaWVuY2UiLCB3YXZlcyA9IGxpc3QoYygyMDE1LA0KICAgIDIwMTgpLCBjKDIwMTksIDIwMjMpKSwgdHlwZSA9IGMoImZpcnN0IikpIHsNCg0KICAgICMgc3RlcCAxDQogICAgZGVtb2dyYXBoaWNzIDwtIGRvLmNhbGwocmJpbmQuZGF0YS5mcmFtZSwgZGF0YSRkZW1vZ3JhcGhpY3MpDQogICAgZGVtb2dyYXBoaWNzIDwtIGRlbW9ncmFwaGljcyAlPiUNCiAgICAgICAgbXV0YXRlKFVuaXZlcnNpdGVpdDEuMjIgPSByZXBsYWNlKFVuaXZlcnNpdGVpdDEuMjIsIGlzLm5hKFVuaXZlcnNpdGVpdDEuMjIpLCAiIiksIFVuaXZlcnNpdGVpdDIuMjIgPSByZXBsYWNlKFVuaXZlcnNpdGVpdDIuMjIsDQogICAgICAgICAgICBpcy5uYShVbml2ZXJzaXRlaXQyLjIyKSwgIiIpLCBVbml2ZXJzaXRlaXQxLjI0ID0gcmVwbGFjZShVbml2ZXJzaXRlaXQxLjI0LCBpcy5uYShVbml2ZXJzaXRlaXQxLjI0KSwNCiAgICAgICAgICAgICIiKSwgVW5pdmVyc2l0ZWl0Mi4yNCA9IHJlcGxhY2UoVW5pdmVyc2l0ZWl0Mi4yNCwgaXMubmEoVW5pdmVyc2l0ZWl0Mi4yNCksICIiKSwgZGlzY2lwbGluZS4yMiA9IHJlcGxhY2UoZGlzY2lwbGluZS4yMiwNCiAgICAgICAgICAgIGlzLm5hKGRpc2NpcGxpbmUuMjIpLCAiIiksIGRpc2NpcGxpbmUuMjQgPSByZXBsYWNlKGRpc2NpcGxpbmUuMjQsIGlzLm5hKGRpc2NpcGxpbmUuMjQpLCAiIikpDQoNCiAgICBzYW1wbGUgPC0gd2hpY2goKGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQxLjIyICVpbiUgdW5pdmVyc2l0eSB8IGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQyLjIyICVpbiUNCiAgICAgICAgdW5pdmVyc2l0eSB8IGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQxLjI0ICVpbiUgdW5pdmVyc2l0eSB8IGRlbW9ncmFwaGljcyRVbml2ZXJzaXRlaXQyLjI0ICVpbiUNCiAgICAgICAgdW5pdmVyc2l0eSkgJiAoZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjIgJWluJSBkaXNjaXBsaW5lIHwgZGVtb2dyYXBoaWNzJGRpc2NpcGxpbmUuMjQgJWluJSBkaXNjaXBsaW5lKSkNCg0KICAgIGRlbW9ncmFwaGljc19zb2MgPC0gZGVtb2dyYXBoaWNzW3NhbXBsZSwgXQ0KICAgIHNjaG9sYXJzX3NlbCA8LSBsYXBwbHkoc2Nob2xhcnMsICJbIiwgc2FtcGxlKQ0KDQogICAgIyBzdGVwIDINCiAgICBpZHMgPC0gZGVtb2dyYXBoaWNzX3NvYyRhdV9pZA0KICAgIG53YXZlcyA8LSBsZW5ndGgod2F2ZXMpDQogICAgbmV0cyA8LSBhcnJheSgwLCBkaW0gPSBjKG53YXZlcywgbGVuZ3RoKGlkcyksIGxlbmd0aChpZHMpKSwgZGltbmFtZXMgPSBsaXN0KHdhdmUgPSAxOm53YXZlcywgaWRzLA0KICAgICAgICBpZHMpKQ0KICAgIGRpbW5hbWVzKG5ldHMpDQoNCiAgICAjIHN0ZXAgMw0KICAgIGRmX3dvcmtzIDwtIHRpYmJsZSh3b3Jrc19pZCA9IHVubGlzdChsYXBwbHkoc2Nob2xhcnNfc2VsJHdvcmssIGZ1bmN0aW9uKGwpIGwkaWQpKSwgd29ya3NfYXV0aG9yID0gdW5saXN0KGxhcHBseShzY2hvbGFyc19zZWwkd29yaywNCiAgICAgICAgZnVuY3Rpb24obCkgbCRhdXRob3IpLCByZWN1cnNpdmUgPSBGQUxTRSksIHdvcmtzX3llYXIgPSB1bmxpc3QobGFwcGx5KHNjaG9sYXJzX3NlbCR3b3JrLCBmdW5jdGlvbihsKSBsJHB1YmxpY2F0aW9uX3llYXIpLA0KICAgICAgICByZWN1cnNpdmUgPSBGQUxTRSkpDQoNCiAgICBkZl93b3JrcyA8LSBkZl93b3Jrc1shZHVwbGljYXRlZChkZl93b3JrcyksIF0NCg0KICAgICMgc3RlcCA0DQogICAgaWYgKHR5cGUgPT0gImZpcnN0Iikgew0KICAgICAgICBmb3IgKGogaW4gMTpud2F2ZXMpIHsNCiAgICAgICAgICAgIGRmX3dvcmtzX3cgPC0gZGZfd29ya3NbZGZfd29ya3Mkd29ya3NfeWVhciA+PSB3YXZlc1tbal1dWzFdICYgZGZfd29ya3Mkd29ya3NfeWVhciA8PSB3YXZlc1tbal1dWzJdLA0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgIGZvciAoaSBpbiAxOm5yb3coZGZfd29ya3NfdykpIHsNCiAgICAgICAgICAgICAgICBlZ28gPC0gZGZfd29ya3NfdyR3b3Jrc19hdXRob3JbaV1bWzFdXSRhdV9pZFsxXQ0KICAgICAgICAgICAgICAgIGFsdGVycyA8LSBkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkWy0xXQ0KICAgICAgICAgICAgICAgIGlmIChzdW0oaWRzICVpbiUgZWdvKSA+IDAgJiBzdW0oaWRzICVpbiUgYWx0ZXJzKSA+IDApIHsNCiAgICAgICAgICAgICAgICAgIG5ldHNbaiwgd2hpY2goaWRzICVpbiUgZWdvKSwgd2hpY2goaWRzICVpbiUgYWx0ZXJzKV0gPC0gMQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICh0eXBlID09ICJsYXN0Iikgew0KICAgICAgICBmb3IgKGogaW4gMTpud2F2ZXMpIHsNCiAgICAgICAgICAgIGRmX3dvcmtzX3cgPC0gZGZfd29ya3NbZGZfd29ya3Mkd29ya3NfeWVhciA+PSB3YXZlc1tbal1dWzFdICYgZGZfd29ya3Mkd29ya3NfeWVhciA8PSB3YXZlc1tbal1dWzJdLA0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgIGZvciAoaSBpbiAxOm5yb3coZGZfd29ya3NfdykpIHsNCiAgICAgICAgICAgICAgICBlZ28gPC0gcmV2KGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQpWzFdDQogICAgICAgICAgICAgICAgYWx0ZXJzIDwtIHJldihkZl93b3Jrc193JHdvcmtzX2F1dGhvcltpXVtbMV1dJGF1X2lkKVstMV0NCiAgICAgICAgICAgICAgICBpZiAoc3VtKGlkcyAlaW4lIGVnbykgPiAwICYgc3VtKGlkcyAlaW4lIGFsdGVycykgPiAwKSB7DQogICAgICAgICAgICAgICAgICBuZXRzW2osIHdoaWNoKGlkcyAlaW4lIGVnbyksIHdoaWNoKGlkcyAlaW4lIGFsdGVycyldIDwtIDENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAodHlwZSA9PSAiYWxsIikgew0KICAgICAgICBmb3IgKGogaW4gMTpud2F2ZXMpIHsNCiAgICAgICAgICAgIGRmX3dvcmtzX3cgPC0gZGZfd29ya3NbZGZfd29ya3Mkd29ya3NfeWVhciA+PSB3YXZlc1tbal1dWzFdICYgZGZfd29ya3Mkd29ya3NfeWVhciA8PSB3YXZlc1tbal1dWzJdLA0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgIGZvciAoaSBpbiAxOm5yb3coZGZfd29ya3NfdykpIHsNCiAgICAgICAgICAgICAgICBlZ29zIDwtIGRmX3dvcmtzX3ckd29ya3NfYXV0aG9yW2ldW1sxXV0kYXVfaWQNCiAgICAgICAgICAgICAgICBpZiAoc3VtKGlkcyAlaW4lIGVnb3MpID4gMCkgew0KICAgICAgICAgICAgICAgICAgbmV0c1tqLCB3aGljaChpZHMgJWluJSBlZ29zKSwgd2hpY2goaWRzICVpbiUgZWdvcyldIDwtIDENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgb3V0cHV0IDwtIGxpc3QoKQ0KICAgIG91dHB1dCRkYXRhIDwtIHNjaG9sYXJzX3NlbA0KICAgIG91dHB1dCRuZXRzIDwtIG5ldHMNCiAgICByZXR1cm4ob3V0cHV0KQ0KfQ0KYGBgDQoNCiMjIExvYWQgZGF0YQ0KDQpTY2hvbGFyIGRhdGENCg0KYGBge3Igc2Nob2xhciBkYXRhfQ0Kc2Nob2xhcnMgPC0gZmxvYWQoIi4vZGF0YS9wcm9jZXNzZWQvc2Nob2xhcnNfMjAyNDA5MjQucmRhIikgDQojbWFrZSBzdXJlIHRvIGxlYWQgZmxvYWQgZmlyc3Qgb2YgY291cnNlDQpgYGANCg0KYGBge3Igc2F2aW5nIHNjaG9sYXIgb3V0cHV0fQ0KIyBzYXZlIHRoZSBvdXRwdXQgb2YgeW91ciBmdW5jdGlvbg0KDQp0ZXN0ICA8LSBmY29sbmV0KGRhdGEgPSBzY2hvbGFycywgDQogICAgICAgICAgICAgICAgdW5pdmVyc2l0eSA9ICJSVSIsIA0KICAgICAgICAgICAgICAgIGRpc2NpcGxpbmUgPSBjKCJzb2Npb2xvZ3kiLCAicG9saXRpY2FsIHNjaWVuY2UiKSwNCiAgICAgICAgICAgICAgICB3YXZlcyA9IGxpc3QoYygyMDE1LCAyMDE4KSwgYygyMDE5LCAyMDIzKSksIA0KICAgICAgICAgICAgICAgIHR5cGUgPSBjKCJmaXJzdCIpKQ0KYGBgDQoNCkVnbyBkYXRhDQoNCmBgYHtyIGRmX2VnbyBkYXRhfQ0KZGZfZWdvIDwtIGZsb2FkKCIuL2RhdGEvcHJvY2Vzc2VkL2RmX2Vnb18yMDI0MTEwOC5yZGEiKQ0KDQpgYGANCg0KYGBge3IgbWF0cml4IGRhdGEgZWdvfQ0KDQp0ZXN0X3cxIDwtIGlncmFwaDo6Z3JhcGhfZnJvbV9hZGphY2VuY3lfbWF0cml4KA0KICB0ZXN0JG5ldHNbMSwsXSwgIyBmaXJzdCB3YXZlIG9mIGRhdGEuIA0KICAjICh0aHVzIEkgc2VsZWN0IHRoZSBhcnJheSBvZiBuZXR3b3JrcyBhbmQgdGFrZSB0aGUgZmlyc3QgbWF0cml4KQ0KICBtb2RlID0gYygiZGlyZWN0ZWQiKSwNCiAgd2VpZ2h0ZWQgPSBOVUxMLA0KICBkaWFnID0gRkFMU0UsDQogIGFkZC5jb2xuYW1lcyA9IE5VTEwsDQogIGFkZC5yb3duYW1lcyA9IE5VTEwpDQoNCmBgYA0KDQojIyBOZXR3b3JrIERlc2NyaXB0aW9uDQoNClRoZSBuZXR3b3JrIGRhdGEgd2UgYXJlIGxvb2tpbmcgYXQgcGVydGFpbnMgdG8gMTAxIHNjaG9sYXJzIGFuZCB0aGVpciBwdWJsaWNhdGlvbnMuIEluIHRoZSB0aW1lIGZyYW1lIG9mIHRoZSB3YXZlIGF0IGhhbmQsIG5hbWVseSBmb3JtIDIwMTUgdG8gMjAxOCwgd2UgZmluZCA0NyBlZGdlcywgd2l0aCA2IHJlY2lwcm9jYXRlZCBjb2xsYWJvcmF0aW9ucyAzNiB0aWVzIHRoYXQgYXJlIGFzeW1tZXRyaWMuIEFkZGl0aW9uYWxseSwgdGhlcmUgd2VyZSA1MDA5IG9jY2FzaW9ucyBpbiB3aGljaCBhIHRpZXMgY291bGQgaGF2ZSBiZWVuIG1hZGUgYnV0IHdhcyBub3QuIFRoZSBlZGdlIGRlbnNpdHkgb2YgMC4wMDQgc3VnZ2VzdHMgdGhhdCBmcm9tIGFsbCBwb3NzaWJsZSBlZGdlcywgdGhpcyBzYW1wbGUgY29udGFpbnMgcmVsYXRpdmVseSBmZXcuDQoNCkluIHRlcm1zIG9mIHRyaWFkLWNvbmZpZ3VyYXRpb25zLCBwZXJ0YWluaW5nIHRvIHRoZSBkaWZmZXJlbnQgcG9zc2liaWxpdGllcyB0aHJlZSBzY2hvbGFycyBjb3VsZCBjb2xsYWJvcmF0ZSwgd2UgZmluZCB0aGF0IHRoZSBtb3N0IGNvbW1vbiBvbmUgaXMgbm8gY29sbGFib3JhdGlvbiBhdCBhbGwgKGNvbmZpZ3VyYXRpb24gJzAwMycpLiBCZXlvbmQgdGhhdCwgdGhlIGNvbmZpZ3VyYXRpb24gJzAxMicgaXMgYWxzbyBjb21tb24sIG1lYW5pbmcgdGhhdCBvbmx5IG9uZSBkaXJlY3RlZCBlZGdlIGlzIHByZXNlbnQgaW4gdGhlIHRyaWFkLiBJbiBvdXIgc2FtcGxlIGl0IGlzIGFsc28gY29tbW9uIGZvciBzdWNoIGVkZ2UgdG8gYmUgcmVjaXByb2NhdGVkLCBhcyBzZWVuIGluIHRoZSB0aGlyZC1oaWdoZXMtdCBjb3VudCBvZiB0aGUgdHJpYWQtY29uZmlndXJhdGlvbiAnMTAyJywgYSBncmFwaCB3aXRoIGEgbXV0dWFsIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28gdmVydGljZXMuIE92ZXJhbGwsIHRoZSBzZWVtcyB0byBiZSBoaWdoIG51bWJlciBvZiBpc29sYXRlcyBpbiB0aGUgc2FtcGxlIG5ldHdvcmsuDQoNCiMjIyBOci4gb2Ygbm9kZXMvdmVydGljZXMNCg0KYGBge3Igbm9kZXN9DQp2Y291bnQodGVzdF93MSkNCmBgYA0KDQojIyMgTnIuIG9mIGVkZ2VzDQoNCmBgYHtyIGVkZ2VzfQ0KZWNvdW50KHRlc3RfdzEpDQpgYGANCg0KIyMjIER5YWQgY2Vuc3VzDQoNCmBgYHtyIGR5YWQgY2VufQ0KaWdyYXBoOjpkeWFkX2NlbnN1cyh0ZXN0X3cxKQ0KYGBgDQoNCiMjIyBUcmlhZC1jZW5zdXMNCg0KYGBge3IgdHJpYWQgY2VufQ0KaWdyYXBoOjp0cmlhZF9jZW5zdXModGVzdF93MSkNCmBgYA0KDQpgYGB7PWh0bWx9DQo8IS0tIA0KVFJJQUQgQ09ORklHVVJBVElPTlMgKDE2IHBvc3NpYmxlKQ0KDQpvICAgVGhyZWUgZGlnaXRzIFt4LCB4LCB4XQ0KICBGaXJzdDogbnIuIG9mIHJlY2lwcm9jYWwgdGllcyANCiAgTWlkZGxlIGNvdW50czogbnIgb2YgZGlyZWN0ZWQgdGllcw0KICBPbiByaWdodDogaWYgbm8gdGllcw0KbyAgIEQsIFUsIEMgDQogIERvd24gDQogIFVwIA0KICBDeWNsaWNhbCANCg0KDQoxLiAjIDAwMyBBLEIsQywgdGhlIGVtcHR5IGdyYXBoLg0KDQoyLiAjIDAxMiBBLT5CLCBDLCB0aGUgZ3JhcGggd2l0aCBhIHNpbmdsZSBkaXJlY3RlZCBlZGdlLg0KDQozLiAjIDEwMiBBPC0+QiwgQywgdGhlIGdyYXBoIHdpdGggYSBtdXR1YWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byB2ZXJ0aWNlcy4NCg0KNC4gIyAwMjFEIEE8LUItPkMsIHRoZSBvdXQtc3Rhci4NCg0KNS4gIyAwMjFVIEEtPkI8LUMsIHRoZSBpbi1zdGFyLg0KDQo2LiAjIDAyMUMgQS0+Qi0+QywgZGlyZWN0ZWQgbGluZS4NCg0KNy4gIyAxMTFEIEE8LT5CPC1DLg0KDQo4LiAjIDExMVUgQTwtPkItPkMuDQoNCjkuICMtIDAzMFQgQS0+QjwtQywgQS0+Qy4NCg0KMTAuI1ggMDMwQyBBPC1CPC1DLCBBLT5DLg0KDQoxMS4jLSAyMDEgQTwtPkI8LT5DLg0KDQoxMi4jWCAxMjBEIEE8LUItPkMsIEE8LT5DLg0KDQoxMy4jLSAxMjBVIEEtPkI8LUMsIEE8LT5DLg0KDQoxNC4jLSAxMjBDIEEtPkItPkMsIEE8LT5DLg0KDQoxNS4jLSAyMTAgQS0+QjwtPkMsIEE8LT5DLg0KDQoxNi4jWCAzMDAgQTwtPkI8LT5DLCBBPC0+QywgdGhlIGNvbXBsZXRlIGdyYXBoLg0KDQotLT4NCmBgYA0KIyMjIEVkZ2UtZGVuc2l0eQ0KDQpgYGB7ciBlZGdlIGRlbnN9DQojIGVkZ2UgZGVuc2l0eQ0KaWdyYXBoOjplZGdlX2RlbnNpdHkodGVzdF93MSkNCmBgYA0KDQojIyMgbW9yZSBpbiBkZXB0aDoNCg0KYGBgYHs9aHRtbH0NCjwhLS0NCg0KIyMjIyByZWNpcHJvY2l0eQ0KDQpgYGB7ciByZWNpcH0NCnJlY2lwcm9jaXR5KHRlc3RfdzEsIGlnbm9yZS5sb29wcyA9IFRSVUUsIG1vZGUgPSBjKCJkZWZhdWx0IiwgInJhdGlvIikpDQpgYGANCg0KLS0+DQpgYGBgDQoNCiMjIyMgRGVncmVlIGNlbnRyYWxpdHkNCg0KRGVncmVlIGNlbnRyYWxpdHksIG9mdGVuIHNpbXBseSBjYWxsZWQgJ2RlZ3JlZScsIG1lYXN1cmVzIHRoZSBudW1iZXIgb2YgY29ubmVjdGlvbnMgYSBzY2hvbGFyLCBvciBlZ28sIGhhcyB3aXRoIG90aGVyIHNjaG9sYXJzLCBrbm93biBhcyBhbHRlcnMuIEluIHRoZSBjb250ZXh0IG9mIG91ciBkYXRhc2V0LCB3ZSBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byB0eXBlcyBvZiBkZWdyZWVzOiBpbmNvbWluZyBjb25uZWN0aW9ucyAoaW5kZWdyZWVzKSBhbmQgb3V0Z29pbmcgY29ubmVjdGlvbnMgKG91dGRlZ3JlZXMpLiBJbmRlZ3JlZXMgcmVwcmVzZW50IHRpZXMgZGlyZWN0ZWQgdG93YXJkIHRoZSBlZ28sIHdoaWNoIGluIHRoaXMgY2FzZSBzaWduaWZ5IGluc3RhbmNlcyB3aGVyZSB0aGUgZWdvIGlzICoqbm90KiogdGhlIHByaW1hcnkgYXV0aG9yIG9mIGEgcGFwZXIuIENvbnZlcnNlbHksIG91dGRlZ3JlZXMgcmVwcmVzZW50IHRpZXMgb3JpZ2luYXRpbmcgZnJvbSB0aGUgZWdvLCBpbmRpY2F0aW5nIGNvbGxhYm9yYXRpb25zIHdoZXJlIHRoZSBlZ28gYXNzdW1lcyB0aGUgcm9sZSBvZiB0aGUgZmlyc3QgYXV0aG9yLg0KDQpgYGB7ciBkZWdyZWV9DQojIENhbGN1bGF0ZSBkZWdyZWUgY2VudHJhbGl0eQ0KZGVncmVlX3Rlc3R3MSA8LSBkZWdyZWUodGVzdF93MSkNCmRlZ3JlZV90ZXN0dzEgPC0gYXMuZGF0YS5mcmFtZShkZWdyZWVfdGVzdHcxKQ0KDQpnZ3Bsb3QoZGVncmVlX3Rlc3R3MSwgYWVzKHggPSBhcy5udW1lcmljKGRlZ3JlZV90ZXN0dzEpKSkgKw0KICBnZW9tX2hpc3RvZ3JhbShiaW53aWR0aCA9IDAuOSwgZmlsbCA9ICIjRkZGRkIzIiwgY29sb3IgPSAiYmxhY2siKSArICANCiAgbGFicygNCiAgICB0aXRsZSA9ICJEaXN0cmlidXRpb24gRGVncmVlcyBXYXZlIDEiLA0KICAgIHggPSAiRGlzdHJpYnV0aW9uIG9mIERlZ3JlZXMiLA0KICAgIHkgPSAiQ291bnQiDQogICkgKw0KICB5bGltKDAsIDE1KSArICAjIFNldCB5LWF4aXMgbGltaXRzIA0KICB0aGVtZV9taW5pbWFsKGJhc2VfZmFtaWx5ID0gIkFyaWFsIikgKyAgIyBNaW5pbWFsLCBjbGVhbiBiYXNlIHRoZW1lDQogIHRoZW1lKA0KICAgIHBsb3QuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwgICMgRGFyayBiYWNrZ3JvdW5kDQogICAgcGFuZWwuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwgICMgRGFyayBwYW5lbCBiYWNrZ3JvdW5kDQogICAgcGFuZWwuZ3JpZC5tYWpvciA9IGVsZW1lbnRfbGluZShjb2xvciA9ICIjNDQ0NDQ0IiksICAjIFN1YnRsZSBncmlkIGxpbmVzDQogICAgcGFuZWwuZ3JpZC5taW5vciA9IGVsZW1lbnRfbGluZShjb2xvciA9ICIjNDQ0NDQ0IiksDQogICAgYXhpcy50ZXh0ID0gZWxlbWVudF90ZXh0KGNvbG9yID0gIiNmMGYwZjAiKSwgICMgV2hpdGUgYXhpcyB0ZXh0DQogICAgYXhpcy50aXRsZSA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIiwgZmFjZSA9ICJib2xkIiksICAjIEJvbGQgd2hpdGUgYXhpcyB0aXRsZXMNCiAgICBwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KGNvbG9yID0gIiNmMGYwZjAiLCBmYWNlID0gImJvbGQiLCBoanVzdCA9IDAuNSksICAjIFdoaXRlIGNlbnRlcmVkIHRpdGxlDQogICAgbGVnZW5kLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksICAjIERhcmsgbGVnZW5kIGJhY2tncm91bmQNCiAgICBsZWdlbmQudGV4dCA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIikgICMgV2hpdGUgbGVnZW5kIHRleHQNCiAgKSArDQogIGd1aWRlcyhmaWxsID0gIm5vbmUiKSAgIyBSZW1vdmUgdGhlIGxlZ2VuZA0KDQpgYGANCg0KPCEtLSB5bGltIHdhcyA2NSBhdCBzb21lIHBvaW50IHByaW90IGR1ZSB0byBvbmUgaGlnaGVyIGJhciwgSSB3b25kZXIgd2hhdCBjaGFuZ2VkIHNpbmNlLi4uIC0tPg0KDQpUaGUgaW5kZWdyZWUgZGlzdHJpYnV0aW9uIGlzIHJpZ2h0LXNrZXdlZC4gVGhpcyBzdWdnZXN0cyB0aGF0IG9ubHkgdmVyeSBmZXcgdmVydGljZXMgaGF2ZSBtYW55IGluZmVncmVlcywgYW5kIHRoYXQgbW9zdCB2ZXJ0aWNlcyBoYXZlIGEgbG93IG51bWJlciBvZiBpbmRlZ3JlZXMuDQoNCiMjIyMgQmV0d2Vlbm5lc3MgQ2VudHJhbGl0eQ0KDQood2l0aCBpc29sYXRlcykNCg0KYGBge3IgYmV0d2Vlbm5lc3N9DQojIENhbGN1bGF0ZSBiZXR3ZWVubmVzcyBjZW50cmFsaXR5DQpiZXR3ZWVubmVzc193MSA8LSBpZ3JhcGg6OmJldHdlZW5uZXNzKHRlc3RfdzEsIGRpcmVjdGVkID0gVFJVRSkNCmJldHdlZW5uZXNzX3cxIDwtIGFzLmRhdGEuZnJhbWUoYmV0d2Vlbm5lc3NfdzEpDQoNCg0KZ2dwbG90KGJldHdlZW5uZXNzX3cxLCBhZXMoYXMubnVtZXJpYyhiZXR3ZWVubmVzc193MSksIGNvbG91ciA9IGFzLm51bWVyaWMoYmV0d2Vlbm5lc3NfdzEpKSkgKw0KICBnZW9tX2hpc3RvZ3JhbShiaW53aWR0aCA9IDEuMiwgZmlsbCA9ICIjRkZGRkIzIikgKw0KICBsYWJzKA0KICAgIHRpdGxlID0gIkRpc3RyaWJ1dGlvbiBCZXR3ZWVubmVzcyBXYXZlIDEiLA0KICAgIHggPSAiRGlzdHJpYnV0aW9uIG9mIEJldHdlZW5uZXNzIiwNCiAgICB5ID0gIkNvdW50IikgKw0KICAgdGhlbWVfbWluaW1hbChiYXNlX2ZhbWlseSA9ICJBcmlhbCIpICsgICMgTWluaW1hbCwgY2xlYW4gYmFzZSB0aGVtZQ0KICB0aGVtZSgNCiAgICBwbG90LmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksICAjIERhcmsgYmFja2dyb3VuZA0KICAgIHBhbmVsLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksICAjIERhcmsgcGFuZWwgYmFja2dyb3VuZA0KICAgIHBhbmVsLmdyaWQubWFqb3IgPSBlbGVtZW50X2xpbmUoY29sb3IgPSAiIzQ0NDQ0NCIpLCAgIyBTdWJ0bGUgZ3JpZCBsaW5lcw0KICAgIHBhbmVsLmdyaWQubWlub3IgPSBlbGVtZW50X2xpbmUoY29sb3IgPSAiIzQ0NDQ0NCIpLA0KICAgIGF4aXMudGV4dCA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIiksICAjIFdoaXRlIGF4aXMgdGV4dA0KICAgIGF4aXMudGl0bGUgPSBlbGVtZW50X3RleHQoY29sb3IgPSAiI2YwZjBmMCIsIGZhY2UgPSAiYm9sZCIpLCAgIyBCb2xkIHdoaXRlIGF4aXMgdGl0bGVzDQogICAgcGxvdC50aXRsZSA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIiwgZmFjZSA9ICJib2xkIiwgaGp1c3QgPSAwLjUpLCAgIyBXaGl0ZSBjZW50ZXJlZCB0aXRsZQ0KICAgIGxlZ2VuZC5iYWNrZ3JvdW5kID0gZWxlbWVudF9yZWN0KGZpbGwgPSAiIzJkMmQyZCIsIGNvbG9yID0gTkEpLCAgIyBEYXJrIGxlZ2VuZCBiYWNrZ3JvdW5kDQogICAgbGVnZW5kLnRleHQgPSBlbGVtZW50X3RleHQoY29sb3IgPSAiI2YwZjBmMCIpICAjIFdoaXRlIGxlZ2VuZCB0ZXh0DQogICkgKw0KICBndWlkZXMoZmlsbCA9IGd1aWRlX2xlZ2VuZCh0aXRsZSA9ICJCZXR3ZWVubmVzcyAocm91bmRlZCkiKSkgICMgQ3VzdG9taXplIGxlZ2VuZA0KDQoNCmBgYA0KDQojIyMjIENsdXN0ZXJpbmcNCg0KYGBge3J9DQojIENsdXN0ZXJpbmcgdGhlIHdhdmUgDQpjbHVzdGVyaW5nX3cxIDwtIGlncmFwaDo6dHJhbnNpdGl2aXR5KHRlc3RfdzEsIHR5cGUgPSAibG9jYWwiKQ0KY2x1c3RlcmluZ193MSA8LSBhcy5kYXRhLmZyYW1lKGNsdXN0ZXJpbmdfdzEpDQoNCiMgR2VuZXJhdGUgdGhlIGRhcmsgbW9kZSBwbG90IHdpdGggYSBzaW5nbGUgY29sb3IgZmlsbA0KZ2dwbG90KGNsdXN0ZXJpbmdfdzEsIGFlcyh4ID0gYXMubnVtZXJpYyhjbHVzdGVyaW5nX3cxKSkpICsNCiAgIGdlb21faGlzdG9ncmFtKGJpbndpZHRoID0gMC4wNSwgZmlsbCA9ICIjRkZGRkIzIiwgY29sb3IgPSAiYmxhY2siLCBwb3NpdGlvbiA9ICJkb2RnZSIpICsgIA0KICBsYWJzKA0KICAgIHRpdGxlID0gIkRpc3RyaWJ1dGlvbiBDbHVzdGVyaW5nIFdhdmUgMSIsDQogICAgeCA9ICJEaXN0cmlidXRpb24gb2YgQ2x1c3RlcmluZyIsDQogICAgeSA9ICJDb3VudCINCiAgKSArDQogIHRoZW1lX21pbmltYWwoYmFzZV9mYW1pbHkgPSAiQXJpYWwiKSArICAjIENsZWFuLCBtaW5pbWFsIGJhc2UgdGhlbWUNCiAgdGhlbWUoDQogICAgcGxvdC5iYWNrZ3JvdW5kID0gZWxlbWVudF9yZWN0KGZpbGwgPSAiIzJkMmQyZCIsIGNvbG9yID0gTkEpLCAgIyBEYXJrIGJhY2tncm91bmQNCiAgICBwYW5lbC5iYWNrZ3JvdW5kID0gZWxlbWVudF9yZWN0KGZpbGwgPSAiIzJkMmQyZCIsIGNvbG9yID0gTkEpLCAgIyBEYXJrIHBhbmVsIGJhY2tncm91bmQNCiAgICBwYW5lbC5ncmlkLm1ham9yID0gZWxlbWVudF9saW5lKGNvbG9yID0gIiM0NDQ0NDQiKSwgICMgU3VidGxlIGdyaWQgbGluZXMNCiAgICBwYW5lbC5ncmlkLm1pbm9yID0gZWxlbWVudF9saW5lKGNvbG9yID0gIiM0NDQ0NDQiKSwNCiAgICBheGlzLnRleHQgPSBlbGVtZW50X3RleHQoY29sb3IgPSAiI2YwZjBmMCIpLCAgIyBXaGl0ZSBheGlzIHRleHQNCiAgICBheGlzLnRpdGxlID0gZWxlbWVudF90ZXh0KGNvbG9yID0gIiNmMGYwZjAiLCBmYWNlID0gImJvbGQiKSwgICMgQm9sZCB3aGl0ZSBheGlzIHRpdGxlcw0KICAgIHBsb3QudGl0bGUgPSBlbGVtZW50X3RleHQoY29sb3IgPSAiI2YwZjBmMCIsIGZhY2UgPSAiYm9sZCIsIGhqdXN0ID0gMC41KSwgICMgV2hpdGUgY2VudGVyZWQgdGl0bGUNCiAgICBsZWdlbmQuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwgICMgRGFyayBsZWdlbmQgYmFja2dyb3VuZA0KICAgIGxlZ2VuZC50ZXh0ID0gZWxlbWVudF90ZXh0KGNvbG9yID0gIiNmMGYwZjAiKSAgIyBXaGl0ZSBsZWdlbmQgdGV4dA0KICApICsgZ3VpZGVzKGZpbGwgPSAibm9uZSIpICAjIFJlbW92ZSB0aGUgbGVnZW5kIChzaW5jZSBhbGwgYmFycyBhcmUgdGhlIHNhbWUgY29sb3IpDQoNCmBgYA0KDQojIE5ldHdvcmstbGV2ZWwgZGVzY3JpcHRpdmVzDQoNCiMjIHguIEF2ZXJhZ2UgcGF0aCBsZW5ndGgNCg0KYGBge3IgcGF0aCBsZW5ndGh9DQptZWFuKChlZ29fc2l6ZSh0ZXN0X3cxLCBvcmRlciA9IDIsIG1vZGUgPSAib3V0IikgLSAxKS92Y291bnQodGVzdF93MSkpDQpgYGANCg0KIyMgU1RJTEwgRE8hIFNlZ3JlZ2F0aW9uIC0gTW9ydG9ucyBJIC0gYWxzbyBncmFwaHMgYmVsb3cNCg0KKipTVElMTCBETyEqKg0KDQojIFBsb3R0aW5nOg0KDQojIyBQbG90cyBXSVRIIGlzb2xhdGVzIA0KIyMjR2VuZGVyIA0KIyMjIyB3aG9sZSBuZXR3b3JrDQpgYGB7ciBwbG90IGdlbmRlcn0NCg0KcGxvdCh0ZXN0X3cxLA0KICAgICB2ZXJ0ZXguY29sb3IgPSBpZmVsc2UoZGZfZWdvJGdlbmRlciA9PSAxLCAiI0ZGRUQ2RiIsICIjODBCMUQzIiksICMgbm93LCBJIGNhbiB1c2UgYWN0b3IgYXR0cmlidXRlcyBmb3IgcGxvdHRpbmcuDQojIGhlcmU6IGlmIGdlbmRlciA9IDEgKGFrYSBtYW4pIHRoZW4gcmVkIGRvdCwgaWYgbm90IHRoZW4gYmx1ZSANCiAgdmVydGV4LmxhYmVsID0gTkEsDQogIHZlcnRleC5zaXplID0gNy41LA0KICBlZGdlLndpZHRoID0gMC41LA0KICBlZGdlLmFycm93LnNpemUgPSAwLjEsDQogIG1haW4gPSAiTmV0d29yayB3aXRoIGlzb2xhdGVzIFt5ZWxsb3cgPSBmZW1hbGUsIGJsdWUgPSBtYWxlXSIsKQ0KDQpgYGANCg0KIyMjIyBwZXIgZGVwYXJ0bWVudA0KDQpgYGB7ciB3aXRoIGlzbyBnZW5kZXIgcGVyIGRlcCBvbGQgY29kZSB9DQoNCmluZGVncl93MSA8LSBkZWdyZWUodGVzdF93MSwgbW9kZSA9ICJpbiIpDQoNCiMgYXNzaWduIGdlbmRlciB0byBzY2hvbGFyDQpWKHRlc3RfdzEpJGdlbmRlciA8LSBkZl9lZ28kZ2VuZGVyDQoNCiMgYXNzaWduIGRpc2NpcGxpbmUgdG8gc2Nob2xhcg0KVih0ZXN0X3cxKSRkaXNjaXBsaW5lIDwtIGRmX2VnbyRkaXNjaXBsaW5lLjI0DQoNCg0KVih0ZXN0X3cxKSRpbmRlZ3JlZSA8LSBpbmRlZ3JfdzENCg0KDQpwX2dlbmRlciA8LSBnZ3JhcGgodGVzdF93MSwgbGF5b3V0ID0gImZyIikgKyBnZW9tX2VkZ2VfbGluayhlbmRfY2FwID0gY2lyY2xlKDQsICdtbScpLGNvbG9yID0gIiNEOUQ5RDkiLCB3aWR0aCA9IDAuNywgYXJyb3cgPSBhcnJvdyhsZW5ndGggPSB1bml0KDIsICJtbSIpLCB0eXBlID0gImNsb3NlZCIpKSArIGdlb21fbm9kZV9wb2ludChhZXMoc2l6ZSA9IGluZGVncmVlLA0KICAgIGNvbG9yID0gYXMuZmFjdG9yKGRpc2NpcGxpbmUpLCBzaGFwZSA9IGFzLmZhY3RvcihnZW5kZXIpKSkgKyBzY2FsZV9zaXplKHJhbmdlID0gYygzLCAxMCkpICsgdGhlbWVfdm9pZCgpICsgIHRoZW1lKA0KICAgIHBsb3QuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwgICMgRGFyayBiYWNrZ3JvdW5kDQogICAgcGFuZWwuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwNCiAgICB0ZXh0ID0gZWxlbWVudF90ZXh0KGNvbG9yID0gIiNmMGYwZjAiKSAgIyBXaGl0ZSB0ZXh0DQogICkNCg0KDQpwX2dlbmRlciArIGxhYnModGl0bGUgPSAiRGVwYXJ0bWVudHMgd2l0aCBpc29sYXRlcyIsIHN1YnRpdGxlID0gIlBsb3Qgb2YgaW5kZWdyZWUgYW5kIGdlbmRlciIsIGNhcHRpb24gPSAiR2VuZGVyOiAwID0gZmVtYWxlLCAxID0gbWFsZS5cbiBEYXRhIHJlZmVyIHRvIHNjaG9sYXJzIGZyb20gUmFkYm91ZCBVbml2ZXJzaXR5LiIpICsNCiAgICB0aGVtZShwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMC41LCBmYWNlID0gImJvbGQiLCBjb2xvciA9ICIjZjBmMGYwIiksIHBsb3Quc3VidGl0bGUgPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjUsIGNvbG9yID0gIiNmMGYwZjAiKSwgcGxvdC5jYXB0aW9uID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMSwgY29sb3IgPSAiI2YwZjBmMCIpKQ0KYGBgDQoNCg0KIyMjIEgtSW5kZXggDQojIyMjIHdob2xlIG5ldHdvcmsgDQpgYGB7ciAgaCBpbmQgd2l0aCBpc28gb2xkIGNvZGUgfQ0KaW5kZWdyX3cxIDwtIGRlZ3JlZSh0ZXN0X3cxLCBtb2RlID0gImluIikNCg0KIyBhc3NpZ24gaC1pbmRleCB0byBzY2hvbGFyDQpWKHRlc3RfdzEpJGhfaW5kZXggPC0gZGZfZWdvJGhfaW5kZXgNClYodGVzdF93MSkkaW5kZWdyZWUgPC0gaW5kZWdyX3cxDQoNCiMgc2V0IHNpemUgb2YgcGxvdA0Kb3B0aW9ucyhyZXByLnBsb3Qud2lkdGggPSAxNSwgcmVwci5wbG90LmhlaWdodCA9IDE4KQ0KDQojIHBsb3Qgd2F2ZSAxIHdpdGggaXNvbGF0ZXMNCnBfaXNvIDwtIGdncmFwaCh0ZXN0X3cxLCBsYXlvdXQgPSAiZnIiKSArIGdlb21fZWRnZV9saW5rKGVuZF9jYXAgPSBjaXJjbGUoNCwgJ21tJyksY29sb3IgPSAiI0Q5RDlEOSIsIHdpZHRoID0gMC4zLCBhcnJvdyA9IGFycm93KGxlbmd0aCA9IHVuaXQoMSwgIm1tIiksIHR5cGUgPSAiY2xvc2VkIikpICsgZ2VvbV9ub2RlX3BvaW50KGFlcyhzaXplID0gaW5kZWdyZWUsDQogICAgY29sb3IgPSBoX2luZGV4KSkgKyBzY2FsZV9zaXplKHJhbmdlID0gYygzLCAxMCkpICsNCiAgc2NhbGVfY29sb3JfZ3JhZGllbnQobG93ID0gIiNGNjIyMkUiLCBoaWdoID0gIiMzMjgzRkUiKSArICAjIFJldGFpbiBvcmlnaW5hbCBncmFkaWVudA0KICB0aGVtZV92b2lkKCkgKw0KICB0aGVtZSgNCiAgICBwbG90LmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksICAjIERhcmsgYmFja2dyb3VuZA0KICAgIHBhbmVsLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksDQogICAgdGV4dCA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIikgICMgV2hpdGUgdGV4dA0KICAgICkNCg0KcF9pc28gKyBsYWJzKHRpdGxlID0gIk5ldHdvcmsgd2l0aCBpc29sYXRlcyIsIHN1YnRpdGxlID0gIlBsb3Qgb2YgaW5kZWdyZWUgYW5kIEgtaW5kZXgiLCBjYXB0aW9uID0gIkRhdGEgcmVmZXIgdG86IFNjaG9sYXJzIFJVIHNvY2lvbG9neSBhbmQgcG9saXRpY2FsIHNjaWVuY2UgZGVwYXJ0bWVudHMiKSArDQogICAgdGhlbWUocGxvdC50aXRsZSA9IGVsZW1lbnRfdGV4dChoanVzdCA9IDAuNSwgZmFjZSA9ICJib2xkIiksIHBsb3Quc3VidGl0bGUgPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjUpLA0KICAgICAgICBwbG90LmNhcHRpb24gPSBlbGVtZW50X3RleHQoaGp1c3QgPSAxKSkNCmBgYA0KDQojIyMgSC1JbmRleCBhbmQgR2VuZGVyDQojIyMjIHdob2xlIG5ldHdvcmsgDQpgYGB7ciBkYXJrIGcmaCB3aXRoIGlzb30NCmluZGVncl93MSA8LSBkZWdyZWUodGVzdF93MSwgbW9kZSA9ICJpbiIpDQoNCiNhc3NpZ24gZ2VuZGVyIHRvIHNjaG9sYXIgDQpWKHRlc3RfdzEpJGdlbmRlciA8LSBkZl9lZ28kZ2VuZGVyDQojIFYodGVzdF93MSkkZ2VuZGVyIDwtIGlmZWxzZShkZl9lZ28kZ2VuZGVyID49IDAuNSwxLDApDQoNCiMgYXNzaWduIGgtaW5kZXggdG8gc2Nob2xhcg0KVih0ZXN0X3cxKSRoX2luZGV4IDwtIGRmX2VnbyRoX2luZGV4DQpWKHRlc3RfdzEpJGluZGVncmVlIDwtIGluZGVncl93MQ0KDQoNCnBfZ2VuZGVyIDwtIGdncmFwaCh0ZXN0X3cxLA0KICBsYXlvdXQgPSAiZnIiKSArDQogIGdlb21fZWRnZV9saW5rKGVuZF9jYXAgPSBjaXJjbGUoNCwgJ21tJyksY29sb3IgPSAiI0Q5RDlEOSIsIHdpZHRoID0gMC4zLCBhcnJvdyA9IGFycm93KGxlbmd0aCA9IHVuaXQoMSwgIm1tIiksIHR5cGUgPSAiY2xvc2VkIikpICsgICMgRGFya2VyIGVkZ2UgY29sb3INCiAgZ2VvbV9ub2RlX3BvaW50KGFlcyhzaXplID0gaW5kZWdyZWUsIGNvbG9yID0gaF9pbmRleCwgc2hhcGUgPSBhcy5mYWN0b3IoZ2VuZGVyKSkpICsgICANCiAgc2NhbGVfc2l6ZShyYW5nZSA9IGMoMywgMTApKSArIA0KICBzY2FsZV9jb2xvcl9ncmFkaWVudChsb3cgPSAiI0Y2MjIyRSIsIGhpZ2ggPSAiIzMyODNGRSIpICsgICMgUmV0YWluIG9yaWdpbmFsIGdyYWRpZW50DQogIHRoZW1lX3ZvaWQoKSArDQogIHRoZW1lKA0KICAgIHBsb3QuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwgICMgRGFyayBiYWNrZ3JvdW5kDQogICAgcGFuZWwuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwNCiAgICB0ZXh0ID0gZWxlbWVudF90ZXh0KGNvbG9yID0gIiNmMGYwZjAiKSAgIyBXaGl0ZSB0ZXh0DQogICkNCg0KcF9nZW5kZXIgKyANCiAgbGFicyh0aXRsZSA9ICJOZXR3b3JrIHdpdGggaXNvbGF0ZXMiLA0KICAgIHN1YnRpdGxlID0gIlBsb3Qgb2YgaW5kZWdyZWUsIEgtaW5kZXggYW5kIGdlbmRlciIsDQogICAgY2FwdGlvbiA9ICJHZW5kZXI6IDAgPSBmZW1hbGUsIDEgPSBtYWxlLlxuRGF0YSByZWZlciB0bzogU2Nob2xhcnMgUlUgc29jaW9sb2d5IGFuZCBwb2xpdGljYWwgc2NpZW5jZSBkZXBhcnRtZW50cy4iKSArDQogIHRoZW1lKHBsb3QudGl0bGUgPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjUsIGZhY2UgPSAiYm9sZCIsIGNvbG9yID0gIiNmMGYwZjAiKSwgcGxvdC5zdWJ0aXRsZSA9IGVsZW1lbnRfdGV4dChoanVzdCA9IDAuNSwgY29sb3IgPSAiI2YwZjBmMCIpLCBwbG90LmNhcHRpb24gPSBlbGVtZW50X3RleHQoaGp1c3QgPSAxLCBjb2xvciA9ICIjZjBmMGYwIikpDQoNCmBgYA0KDQoNCg0KLS0tDQoNCiMjIFBsb3RzIFdJVEhPVVQgaXNvbGF0ZXMgDQpUaGUgaXNvbGF0ZXMgb2YgdGhlIG5ldHdvcmsgaGF2ZSBiZWVuIHJlbW92ZWQgdG8gYWxsb3cgZm9yIGEgYmV0dGVyIHJlYWRhYmlsaXR5IG9mIHRoZSBncmFwaHMuIE9ubHkgdmVydGljZXMgd2l0aCBlZGdlcyByZW1haW4gcGFydCBvZiB0aGUgdmlzdWFsaXphdGlvbnMuIEluIG90aGVyIHdvcmRzLCBvbmx5IHNjaG9sYXJzIHdpdGggY29sbGFib3JhdGlvbnMgYXJlIHNlZW4gaW4gdGhlIGZvbGxvd2luZyBncmFwaHMuDQoNCmBgYHtyIHJlbW92aW5nIGlzb2xhdGVzfQ0KaW5kZWdyX3cxIDwtIGlncmFwaDo6ZGVncmVlKHRlc3RfdzEsIG1vZGUgPSAiaW4iKQ0KDQppc29sYXRlc193MSA8LSBWKHRlc3RfdzEpW2RlZ3JlZSh0ZXN0X3cxLCBtb2RlID0gImFsbCIpID09IDBdDQoNCm5vaXNvbGF0ZXNfdzEgPC0gZGVsZXRlX3ZlcnRpY2VzKHRlc3RfdzEsIGlzb2xhdGVzX3cxKQ0KDQpnc2l6ZShub2lzb2xhdGVzX3cxKSAjIGVkZ2VzDQpnb3JkZXIobm9pc29sYXRlc193MSkgIyB2ZXJ0aWNlcyANCmBgYA0KDQojIyMgR2VuZGVyIA0KIyMjIyBERVNDSVA8PiB3aG9sZSBuZXR3b3JrIA0KDQpgYGB7ciBwbG90IHdvIGlzb2xhdGVzfQ0KcGxvdChub2lzb2xhdGVzX3cxLA0KICB2ZXJ0ZXguY29sb3IgPSBpZmVsc2UoZGZfZWdvJGdlbmRlciA9PSAxLCAiIzgwQjFEMyIsICIjRkZFRDZGIiksICMgbm93LCBJIGNhbiB1c2UgYWN0b3IgYXR0cmlidXRlcyBmb3IgcGxvdHRpbmcuDQogICMgaGVyZTogaWYgZ2VuZGVyID0gMSAoYWthIG1hbikgdGhlbiByZWQgZG90LCBpZiBub3QgdGhlbiBibHVlIA0KICB2ZXJ0ZXgubGFiZWwgPSBOQSwNCiAgdmVydGV4LnNpemUgPSA5LA0KICB2ZXJ0ZXguZnJhbWUuY29sb3IgPSAiYmxhY2siLA0KICBlZGdlLmN1cnZlZCA9IDAuMSwNCiAgZWRnZS5hcnJvdy5zaXplID0gMC41LA0KICBlZGdlLmNvbG9yID0gIiM5OTk5OTkiLA0KICBlZGdlLndpZHRoID0gMC41LA0KICBtYWluID0gIk5ldHdvcmsgd2l0aG91dCBpc29sYXRlcyBbeWVsbG93ID0gZmVtYWxlLCBibHVlID0gbWFsZV0iLA0KICBhc3A9MCkNCmBgYA0KIyMjIyBSRVNVTFRTIDw+IGluZGVncmVlICYgZGVwYXJ0bWVudA0KDQpgYGB7ciB3aXRob3V0IGlzbyBnZW5kZXIgcGVyIGRlcCBvbGQgY29kZX0NCiMgYXNzaWduIGdlbmRlciB0byBzY2hvbGFyDQpWKHRlc3RfdzEpJGdlbmRlciA8LSBkZl9lZ28kZ2VuZGVyDQoNCiMgYXNzaWduIGRpc2NpcGxpbmVzIHRvIHNjaG9sYXJzDQpWKHRlc3RfdzEpJGRpc2NpcGxpbmUgPC0gZGZfZWdvJGRpc2NpcGxpbmUuMjQNClYodGVzdF93MSkkaW5kZWdyZWUgPC0gaW5kZWdyX3cxDQoNCg0KIyByZW1vdmUgaXNvbGF0ZXMNCm5vaXNvbGF0ZXNfdzEgPC0gZGVsZXRlX3ZlcnRpY2VzKHRlc3RfdzEsIFYodGVzdF93MSlbZGVncmVlKHRlc3RfdzEpID09IDBdKQ0KDQpwX25vaXNnZW5kZXIgPC0gZ2dyYXBoKG5vaXNvbGF0ZXNfdzEsIGxheW91dCA9ICJmciIpICsgZ2VvbV9lZGdlX2xpbmsoZW5kX2NhcCA9IGNpcmNsZSg0LCAnbW0nKSxjb2xvciA9ICIjRDlEOUQ5Iiwgd2lkdGggPSAwLjcsIGFycm93ID0gYXJyb3cobGVuZ3RoID0gdW5pdCgyLCAibW0iKSksIHR5cGUgPSAiY2xvc2VkIikgKw0KICAgIGdlb21fbm9kZV9wb2ludChhZXMoc2l6ZSA9IGluZGVncmVlLCBjb2xvciA9IGFzLmZhY3RvcihkaXNjaXBsaW5lKSwgc2hhcGUgPSBhcy5mYWN0b3IoZ2VuZGVyKSkpICsNCiAgICBzY2FsZV9zaXplKHJhbmdlID0gYygzLCAxMCkpICsgdGhlbWVfdm9pZCgpICsgICB0aGVtZSgNCiAgICBwbG90LmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksICAjIERhcmsgYmFja2dyb3VuZA0KICAgIHBhbmVsLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksDQogICAgdGV4dCA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIikgICMgV2hpdGUgdGV4dA0KICApDQoNCnBfbm9pc2dlbmRlciArIGxhYnModGl0bGUgPSAiRGVwYXJ0bWVudHMgd2l0aG91dCBpc29sYXRlcyIsIHN1YnRpdGxlID0gIlBsb3Qgb2YgaW5kZWdyZWUgYW5kIGdlbmRlciIsDQogICAgY2FwdGlvbiA9ICJHZW5kZXI6IDAgPSBmZW1hbGUsIDEgPSBtYWxlLlxuIERhdGEgcmVmZXIgdG8gc2Nob2xhcnMgZnJvbSBSYWRib3VkIFVuaXZlcnNpdHkuIikgKyB0aGVtZShwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMC41LCBmYWNlID0gImJvbGQiLCBjb2xvciA9ICIjZjBmMGYwIiksIHBsb3Quc3VidGl0bGUgPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjUsIGNvbG9yID0gIiNmMGYwZjAiKSwgcGxvdC5jYXB0aW9uID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMSwgY29sb3IgPSAiI2YwZjBmMCIpKQ0KYGBgDQoNCg0KIyMjIEgtaW5kZXggDQojIyMjIFJFU1VMVFM8PiBXaG9sZSBuZXR3b3JrIChpbmRlZ3JlZSkNCmBgYHtyfQ0KaW5kZWdyX3cxIDwtIGRlZ3JlZSh0ZXN0X3cxLCBtb2RlID0gImluIikNCg0KIyBhc3NpZ24gaC1pbmRleCB0byBzY2hvbGFyDQpWKHRlc3RfdzEpJGhfaW5kZXggPC0gZGZfZWdvJGhfaW5kZXgNClYodGVzdF93MSkkaW5kZWdyZWUgPC0gaW5kZWdyX3cxDQoNCiMgcmVtb3ZlIGlzb2xhdGVzDQpub2lzb2xhdGVzX3cxIDwtIGRlbGV0ZV92ZXJ0aWNlcyh0ZXN0X3cxLCBWKHRlc3RfdzEpW2RlZ3JlZSh0ZXN0X3cxKSA9PSAwXSkNCg0KIyBzZXQgc2l6ZSBvZiBwbG90DQpvcHRpb25zKHJlcHIucGxvdC53aWR0aCA9IDE1LCByZXByLnBsb3QuaGVpZ2h0ID0gMTUpDQoNCiMgcGxvdCB3YXZlIDEgd2l0aG91dCBpc29sYXRlcw0KcF9ub2lzbyA8LSBnZ3JhcGgobm9pc29sYXRlc193MSwgbGF5b3V0ID0gImZyIikgKyBnZW9tX2VkZ2VfbGluayhlbmRfY2FwID0gY2lyY2xlKDMsICdtbScpLGNvbG9yID0gIiNEOUQ5RDkiLCB3aWR0aCA9IDAuNywgYXJyb3cgPSBhcnJvdyhsZW5ndGggPSB1bml0KDIsICJtbSIpLCB0eXBlID0gImNsb3NlZCIpKSArIGdlb21fbm9kZV9wb2ludChhZXMoc2l6ZSA9IGluZGVncmVlLA0KICAgIGNvbG9yID0gaF9pbmRleCkpICsgc2NhbGVfc2l6ZShyYW5nZSA9IGMoMywgMTApKSArIHNjYWxlX2NvbG9yX2dyYWRpZW50KGxvdyA9ICJyZWQiLCBoaWdoID0gImJsdWUiKSArDQogICAgdGhlbWVfdm9pZCgpICsgICB0aGVtZSgNCiAgICBwbG90LmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksICAjIERhcmsgYmFja2dyb3VuZA0KICAgIHBhbmVsLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksDQogICAgdGV4dCA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIikgICMgV2hpdGUgdGV4dA0KICApDQoNCg0KcF9ub2lzbyArIGxhYnModGl0bGUgPSAiTmV0d29yayB3aXRob3V0IGlzb2xhdGVzIiwgc3VidGl0bGUgPSAiUGxvdCBvZiBpbmRlZ3JlZSBhbmQgSC1pbmRleCIsIGNhcHRpb24gPSAiRGF0YSByZWZlciB0bzogU2Nob2xhcnMgUlUgc29jaW9sb2d5IGFuZCBwb2xpdGljYWwgc2NpZW5jZSBkZXBhcnRtZW50cyIpICsNCiAgICB0aGVtZShwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMC41LCBmYWNlID0gImJvbGQiLCBjb2xvciA9ICIjZjBmMGYwIiksIHBsb3Quc3VidGl0bGUgPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjUsIGNvbG9yID0gIiNmMGYwZjAiKSwgcGxvdC5jYXB0aW9uID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMSwgY29sb3IgPSAiI2YwZjBmMCIpKQ0KYGBgDQoNCiMjIyMgcGVyIGRlcGFydG1lbnQNCmBgYHtyIGhpbmQgd2l0aG91dCBpc28gb2xkIGNvZGV9DQppbmRlZ3JfdzEgPC0gZGVncmVlKHRlc3RfdzEsIG1vZGUgPSAiaW4iKQ0KDQojIGFzc2lnbiBoLWluZGV4IHRvIHNjaG9sYXINClYodGVzdF93MSkkaF9pbmRleCA8LSBkZl9lZ28kaF9pbmRleA0KIyBhc3NpZ24gZGlzY2lwbGluZSB0byBzY2hvbGFyDQpWKHRlc3RfdzEpJGRpc2NpcGxpbmUgPC0gZGZfZWdvJGRpc2NpcGxpbmUuMjQNCg0KVih0ZXN0X3cxKSRpbmRlZ3JlZSA8LSBpbmRlZ3JfdzENCg0KIyByZW1vdmUgaXNvbGF0ZXMNCm5vaXNvbGF0ZXNfdzEgPC0gZGVsZXRlX3ZlcnRpY2VzKHRlc3RfdzEsIFYodGVzdF93MSlbZGVncmVlKHRlc3RfdzEpID09IDBdKQ0KDQojIHNldCBzaXplIG9mIHBsb3QNCm9wdGlvbnMocmVwci5wbG90LndpZHRoID0gMTUsIHJlcHIucGxvdC5oZWlnaHQgPSAxNSkNCg0KIyBwbG90IHdhdmUgMSB3aXRob3V0IGlzb2xhdGVzDQpwX25vaXNvIDwtIGdncmFwaChub2lzb2xhdGVzX3cxLCBsYXlvdXQgPSAiZnIiKSArIGdlb21fZWRnZV9saW5rKGVuZF9jYXAgPSBjaXJjbGUoNCwgJ21tJyksY29sb3IgPSAiI0Q5RDlEOSIsIHdpZHRoID0gMC43LCBhcnJvdyA9IGFycm93KGxlbmd0aCA9IHVuaXQoMiwgIm1tIiksIHR5cGUgPSAiY2xvc2VkIikpICsgZ2VvbV9ub2RlX3BvaW50KGFlcyhzaXplID0gaW5kZWdyZWUsDQogICAgY29sb3IgPSBoX2luZGV4LCBzaGFwZSA9IGFzLmZhY3RvcihkaXNjaXBsaW5lKSkpICsgc2NhbGVfc2l6ZShyYW5nZSA9IGMoMywgMTApKSArIHNjYWxlX2NvbG9yX2dyYWRpZW50KGxvdyA9ICJyZWQiLA0KICAgIGhpZ2ggPSAiYmx1ZSIpICsgdGhlbWVfdm9pZCgpICsgICB0aGVtZSgNCiAgICBwbG90LmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksICAjIERhcmsgYmFja2dyb3VuZA0KICAgIHBhbmVsLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICIjMmQyZDJkIiwgY29sb3IgPSBOQSksDQogICAgdGV4dCA9IGVsZW1lbnRfdGV4dChjb2xvciA9ICIjZjBmMGYwIikgICMgV2hpdGUgdGV4dA0KICApDQoNCg0KcF9ub2lzbyArIGxhYnModGl0bGUgPSAiRGVwYXJ0bWVudHMgd2l0aG91dCBpc29sYXRlcyIsIHN1YnRpdGxlID0gIlBsb3Qgb2YgaW5kZWdyZWUgYW5kIEgtaW5kZXgiLCBjYXB0aW9uID0gIkRhdGEgcmVmZXIgdG8gc2Nob2xhcnMgZnJvbSBSYWRib3VkIFVuaXZlcnNpdHkuIikgKw0KICAgIHRoZW1lKHBsb3QudGl0bGUgPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjUsIGZhY2UgPSAiYm9sZCIsIGNvbG9yID0gIiNmMGYwZjAiKSwgcGxvdC5zdWJ0aXRsZSA9IGVsZW1lbnRfdGV4dChoanVzdCA9IDAuNSwgY29sb3IgPSAiI2YwZjBmMCIpLCBwbG90LmNhcHRpb24gPSBlbGVtZW50X3RleHQoaGp1c3QgPSAxLCBjb2xvciA9ICIjZjBmMGYwIikpDQpgYGANCg0KDQojIyMgUkVTVUxUUyA8PiBILWluZGV4IEFORCBHZW5kZXIgKGluZGVncmVlKQ0KDQpgYGB7ciBkYXJrIGcmaCB3aXRob3V0IGlzb30NCiNhc3NpZ24gZ2VuZGVyIHRvIHNjaG9sYXIgDQpWKHRlc3RfdzEpJGdlbmRlciA8LSBkZl9lZ28kZ2VuZGVyDQoNCiMgYXNzaWduIGgtaW5kZXggdG8gc2Nob2xhcg0KVih0ZXN0X3cxKSRoX2luZGV4IDwtIGRmX2VnbyRoX2luZGV4DQpWKHRlc3RfdzEpJGluZGVncmVlIDwtIGluZGVncl93MQ0KDQoNCiNyZW1vdmUgaXNvbGF0ZXMNCm5vaXNvbGF0ZXNfdzEgPC0gZGVsZXRlX3ZlcnRpY2VzKHRlc3RfdzEsIFYodGVzdF93MSlbZGVncmVlKHRlc3RfdzEpID09IDBdKQ0KDQpwX25vaXNvZ2VuZGVyIDwtIGdncmFwaChub2lzb2xhdGVzX3cxLA0KICBsYXlvdXQgPSAiZnIiKSArDQogIGdlb21fZWRnZV9saW5rKGVuZF9jYXAgPSBjaXJjbGUoMywgJ21tJyksY29sb3IgPSAiI0Q5RDlEOSIsIHdpZHRoID0gMC43LCBhcnJvdyA9IGFycm93KGxlbmd0aCA9IHVuaXQoMS43NSwgIm1tIiksIHR5cGUgPSAiY2xvc2VkIikpICsgICMgRGFya2VyIGVkZ2UgY29sb3INCiAgZ2VvbV9ub2RlX3BvaW50KGFlcyhzaXplID0gaW5kZWdyZWUsIGNvbG9yID0gaF9pbmRleCwgc2hhcGUgPSBhcy5mYWN0b3IoZ2VuZGVyKSkpICsgICANCiAgc2NhbGVfc2l6ZShyYW5nZSA9IGMoMywgMTApKSArIA0KICBzY2FsZV9jb2xvcl9ncmFkaWVudChsb3cgPSAiI0Y2MjIyRSIsIGhpZ2ggPSAiIzMyODNGRSIpICsgICMgUmV0YWluIG9yaWdpbmFsIGdyYWRpZW50DQogIHRoZW1lX3ZvaWQoKSArDQogIHRoZW1lKA0KICAgIHBsb3QuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwgICMgRGFyayBiYWNrZ3JvdW5kDQogICAgcGFuZWwuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gIiMyZDJkMmQiLCBjb2xvciA9IE5BKSwNCiAgICB0ZXh0ID0gZWxlbWVudF90ZXh0KGNvbG9yID0gIiNmMGYwZjAiKSAgIyBXaGl0ZSB0ZXh0DQogICkNCg0KcF9ub2lzb2dlbmRlciArIGxhYnModGl0bGUgPSAiTmV0d29yayB3aXRob3V0IGlzb2xhdGVzIiwNCiAgICAgICAgc3VidGl0bGUgPSAiUGxvdCBvZiBpbmRlZ3JlZSwgSC1pbmRleCBhbmQgZ2VuZGVyIiwNCiAgICAgICAgY2FwdGlvbiA9ICJHZW5kZXI6IDAgPSBmZW1hbGUsIDEgPSBtYWxlLlxuIERhdGEgcmVmZXIgdG86IFNjaG9sYXJzIFJVIHNvY2lvbG9neSBhbmQgcG9saXRpY2FsIHNjaWVuY2UgZGVwYXJ0bWVudHMuIikgKyAgIA0KICB0aGVtZShwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMC41LCBmYWNlID0gImJvbGQiLCBjb2xvciA9ICIjZjBmMGYwIiksIHBsb3Quc3VidGl0bGUgPSBlbGVtZW50X3RleHQoaGp1c3QgPSAwLjUsIGNvbG9yID0gIiNmMGYwZjAiKSwgcGxvdC5jYXB0aW9uID0gZWxlbWVudF90ZXh0KGhqdXN0ID0gMSwgY29sb3IgPSAiI2YwZjBmMCIpKQ0KDQoNCmBgYA0KDQoNCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("draft1desresults.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
